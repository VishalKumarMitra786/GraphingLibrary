function MetaCalcMath(){new Ratio;this.metaCalc={is:function(a,b){return"number"==typeof a&&b==Number?!0:"string"==typeof a&&b==String?!0:a instanceof b},createClass:function(a){return function(){for(var b in a)this[b]=a[b];this.initialize.apply(this,arguments)}},extendObject:function(a,b){for(var c in b)a[c]=b[c];return a}};var a=this.metaCalc.createClass({initialize:function(){this.Values=[],this.errorMes="",this.errorStatus=0}}),b=this.metaCalc.createClass({initialize:function(){this.PolishArray=[],this.errorMes="",this.errorStatus=0,this.fractions={}}}),c=this.metaCalc.createClass("RangeParser",{initialize:function(){},parseRangeFour:function(b,d,e,f){var g,h,i=this,j=0,k=new a,l=new MathParser([]);for(g=[b,d,e,f],j=0;4>j;j++){if(0==g[j].length)return k.errorStatus=1,k.errorMes=c.errVariablesRanges,k.Values=[],k;if(g[j]=g[j].toLowerCase(),h=l.doCompile(g[j]),1==h.errorStatus)return k.errorStatus=1,k.errorMes=c.errVariablesRanges,k.Values=[],k;if(k.Values[j]=l.doEval(h,[]),i.isNotLegal(k.Values[j]))return k.errorStatus=1,k.errorMes=c.errVariablesRanges,k.Values=[],k}return k.Values[0]>=k.Values[1]||k.Values[2]>=k.Values[3]?(k.errorStatus=1,k.errorMes=c.errVariablesRanges,k.Values=[],k):(k.errorStatus=0,k.errorMes="",k)},parseRangeTwo:function(b,d){var e,f,g=this,h=0,i=new a,j=new MathParser([]);for(e=[b,d],h=0;2>h;h++){if(0==e[h].length)return i.errorStatus=1,i.errorMes=c.errVariablesRanges,i.Values=[],i;if(e[h]=e[h].toLowerCase(),f=j.doCompile(e[h]),1==f.errorStatus)return i.errorStatus=1,i.errorMes=c.errVariablesRanges,i.Values=[],i;if(i.Values[h]=j.doEval(f,[]),g.isNotLegal(i.Values[h]))return i.errorStatus=1,i.errorMes=c.errVariablesRanges,i.Values=[],i}return i.Values[0]>=i.Values[1]?(i.errorStatus=1,i.errorMes=c.errVariablesRanges,i.Values=[],i):(i.errorStatus=0,i.errorMes="",i)},isNotLegal:function(a){return"number"!=typeof a||isNaN(a)||!isFinite(a)?!0:!1}});metaCalc.extendObject(c,{errVariablesRanges:"Check your variables ranges."}),this.MathParser=this.metaCalc.createClass({initialize:function(a){this.DECIMALPLACES=15,this.RAD2DEG=Number(180/Math.PI),this.DEG2RAD=Number(Math.PI/180),this.f1Array=["sin","cos","tan","csc","cosec","sec","cot","asin","acos","atan","acsc","acosec","asec","acot","sinh","cosh","tanh","csch","cosech","sech","coth","asinh","acosh","atanh","acsch","acosech","asech","acoth","sind","cosd","tand","cscd","cosecd","secd","cotd","asind","acosd","atand","acscd","acosecd","asecd","acotd","sinhd","coshd","tanhd","cschd","cosechd","sechd","cothd","asinhd","acoshd","atanhd","acschd","acosechd","asechd","acothd","sing","cosg","tang","cscg","cosecg","secg","cotg","asing","acosg","atang","acscg","acosecg","asecg","acotg","sinhg","coshg","tanhg","cschg","cosechg","sechg","cothg","asinhg","acoshg","atanhg","acschg","acosechg","asechg","acothg","pow2","pow3","pow10x","exp","log2","log10","logtwo","logten","ln","logn","log","fac","root3","abs","ceil","floor","round","random","sqrt"],this.f2Array=["max","min","plus","minus","mul","div","pow","root","npr","ncr","lcm","gcd"];var b=this;this.aVarNames=0==a.length?[]:b.setVars(a),this.iserror=0,this.errorMes="",this.nums="0123456789.",this.lets="abcdefghijklmnopqrstuwvxzy",this.opers="^*+-/(),|";var c=b.functions={sin:function(a){var c=Math.sin(a);return!isNaN(c)&&isFinite(c)?Number(c.toFixed(b.DECIMALPLACES)):c},cos:function(a){var c=Math.cos(a);return!isNaN(c)&&isFinite(c)?Number(c.toFixed(b.DECIMALPLACES)):c},tan:function(a){var c=Math.tan(a);return!isNaN(c)&&isFinite(c)?Number(c.toFixed(b.DECIMALPLACES)):c},csc:function(a){return 1/Math.sin(a)},cosec:function(a){return 1/Math.sin(a)},sec:function(a){return 1/Math.cos(a)},cot:function(a){return 1/Math.tan(a)},sind:function(a){return c.sin(a*b.DEG2RAD)},cosd:function(a){return c.cos(a*b.DEG2RAD)},tand:function(a){return c.tan(a*b.DEG2RAD)},cscd:function(a){return c.csc(a*b.DEG2RAD)},cosecd:function(a){return c.cosec(a*b.DEG2RAD)},secd:function(a){return c.sec(a*b.DEG2RAD)},cotd:function(a){return c.cot(a*b.DEG2RAD)},asin:Math.asin,acos:Math.acos,atan:Math.atan,acsc:function(a){return Math.asin(1/a)},acosec:function(a){return Math.asin(1/a)},asec:function(a){return Math.acos(1/a)},acot:function(a){return Math.atan(1/a)},asind:function(a){return c.asin(a)*b.RAD2DEG},acosd:function(a){return c.acos(a)*b.RAD2DEG},atand:function(a){return c.atan(a)*b.RAD2DEG},acscd:function(a){return c.acsc(a)*b.RAD2DEG},acosecd:function(a){return c.acosec(a)*b.RAD2DEG},asecd:function(a){return c.asec(a)*b.RAD2DEG},acotd:function(a){return c.acot(a)*b.RAD2DEG},sinh:function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh:function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh:function(a){return.5*Math.log((1+a)/(1-a))},csch:function(a){return c.asinh(1/a)},cosech:function(a){return c.asinh(1/a)},sech:function(a){return c.acosh(1/a)},coth:function(a){return c.atanh(1/a)},sinhd:function(a){return c.sinh(a*b.DEG2RAD)},coshd:function(a){return c.cosh(a*b.DEG2RAD)},tanhd:function(a){return c.tanh(a*b.DEG2RAD)},cschd:function(a){return c.csch(a*b.DEG2RAD)},cosechd:function(a){return c.cosech(a*b.DEG2RAD)},sechd:function(a){return c.sech(a*b.DEG2RAD)},cothd:function(a){return c.coth(a*b.DEG2RAD)},asinh:function(a){return Math.log(a+Math.sqrt(a*a+1))},acosh:function(a){return Math.log(a+Math.sqrt(a*a-1))},atanh:function(a){return c.asinh(a)/c.acosh(a)},acsch:function(a){return 1/c.asinh(a)},acosech:function(a){return 1/c.asinh(a)},asech:function(a){return 1/c.acosh(a)},acoth:function(a){return 1/c.atanh(a)},asinhd:function(a){return c.asinh(a)*b.RAD2DEG},acoshd:function(a){return c.acosh(a)*b.RAD2DEG},atanhd:function(a){return c.atanh(a)*b.RAD2DEG},acschd:function(a){return c.acsch(a)*b.RAD2DEG},acosechd:function(a){return c.acosech(a)*b.RAD2DEG},asechd:function(a){return c.asech(a)*b.RAD2DEG},acothd:function(a){return c.acoth(a)*b.RAD2DEG},pow:Math.pow,pow2:function(a){return Math.pow(a,2)},pow3:function(a){return Math.pow(a,3)},pow10x:function(a){return Math.pow(10,a)},exp:Math.exp,pi:Math.PI,sqrt:function(a,b){return arguments.length<2&&(b=2),Math.pow(a,1/b)},root3:function(a){return Math.pow(a,1/3)},root:function(a,b){return Math.pow(a,1/b)},log2:function(a){return Math.log(a)*Math.LOG2E},logtwo:function(a){return Math.log(a)*Math.LOG2E},log10:function(a){return Math.log(a)*Math.LOG10E},logten:function(a){return Math.log(a)*Math.LOG10E},ln:Math.log,log:Math.log,logn:function(a,b){return Math.log(b)/Math.log(a)},e:Math.E,fac:function(a){if(0>a)throw new Error("Factorial does not exist for negative numbers.");return 1>=a?a:c.fac(a-1)*a},npr:function(a,b){return c.fac(a)/c.fac(b)},ncr:function(a,b){return c.fac(a)/c.fac(b)/c.fac(a-b)},gcd:b._gcd,lcm:b._lcm,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,random:Math.random,round:Math.round,plus:function(a,b){return a+b},minus:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){return a/b}}},setVars:function(a){var b=[],c=0/0;for(c=0;c<a.length;c++)"string"!=typeof a[c]&&console.log("All variables must be entered as strings into MathParser constructor. Don't forget quotation marks."),b[c]=a[c].toLowerCase();return b},doCompile:function(a){var c=this;a=a.replace(/log2/g,"logtwo"),a=a.replace(/log10/g,"logten");var d=new b,e=null,f=null,g=[];return c.iserror=0,c.errorMes="",e=c.whiteSpaces(a),""==e?(d.PolishArray=[],d.errorMes="",d.errorStatus=0,d):(c.checkLegal(e),1==c.iserror?(d.PolishArray=[],d.errorMes=c.errorMes,d.errorStatus=1,d):(c.checkPars(e),1==c.iserror?(d.PolishArray=[],d.errorMes=c.errorMes,d.errorStatus=1,d):(c.checkToks(e),1==c.iserror?(d.PolishArray=[],d.errorMes=c.errorMes,d.errorStatus=1,d):(f=c.conOper(c.conOper(c.conOper(c.conOper(c.conUnary(c.conCaret(e)),"/"),"*"),"-"),"+"),1==c.iserror?(d.PolishArray=[],d.errorMes=c.errorMes,d.errorStatus=1,d):(g=c.makeStack(f),1==c.iserror?(d.PolishArray=[],d.errorMes=c.errorMes,d.errorStatus=1,d):(d.PolishArray=g,d.errorMes="",d.errorStatus=0,d))))))},istokf1:function(a){var b=this,c=0/0;for(c=0;c<b.f1Array.length;c++)if(a==b.f1Array[c])return!0;return!1},isVar:function(a){var b=this,c=0/0;for(c=0;c<b.aVarNames.length;c++)if(a==b.aVarNames[c])return!0;return!1},istokf2:function(a){var b=this,c=0/0;for(c=0;c<b.f2Array.length;c++)if(a==b.f2Array[c])return!0;return!1},isLet:function(a){var b=this;return b.lets.indexOf(a)>=0},isOper:function(a){var b=this;return b.opers.indexOf(a)>=0},isNum:function(a){var b=this;return b.nums.indexOf(a)>=0},setToken:function(a,b,c){var d=this;d.tokentype=a,d.tokenvalue=b,d.tokenlength=c},nextToken:function(a,b){var c,d,e,f,g,h=this;if(g=a,f=b,e=a.length,f>=e||0>f)return!1;if(c=g.charAt(f),h.isLet(c)){for(d=c;;){if(f+=1,f>=e)break;if(c=g.charAt(f),!h.isLet(c))break;d+=c}return h.istokf1(d)?(h.setToken("f1",d,d.length),!0):h.istokf2(d)?(h.setToken("f2",d,d.length),!0):(h.setToken("v",d,d.length),!0)}if(h.isNum(c)){for(d=c;;){if(f+=1,f>=e)break;if(c=g.charAt(f),!h.isNum(c))break;d+=c}return h.setToken("n",d,d.length),!0}return h.isOper(c)?(h.setToken("oper",c,1),!0):!1},checkToks:function(a){var b=this,c=null,d=0/0,e=0/0,f=0/0,g=0/0,h=null,i=null,j=0/0,k=0/0,l=!1,m=0/0;if(c=a,e=0,j=0,m=0,d=c.length,c.indexOf("---")>=0)return void b.callError(MathParser.errManyMinuses);for(;d>e&&2*d>j;){if(b.nextToken(c,e)){if(f=e+b.tokenlength,h=c.charAt(f),g=e-1,i=c.charAt(g),"f1"==b.tokentype){if("("!=h)return void b.callError(MathParser.errExpected+f+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".")}if("f2"==b.tokentype){if("max"!=b.tokenvalue&&"min"!=b.tokenvalue)return void b.callError(MathParser.errUnknownFunctions+f+".");if("("!=h)return void b.callError(MathParser.errExpected+f+".");for(k=1,l=!1,m=0;k>0&&d>m;)m+=1,"("==c.charAt(f+m)&&(k+=1),")"==c.charAt(f+m)&&(k+=-1),","==c.charAt(f+m)&&(l+=1);if(0==l)return void b.callError(MathParser.errTwoArgumentsExpected+e+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".")}if("v"==b.tokentype){if(!b.isVar(b.tokenvalue)&&"pi"!=b.tokenvalue&&"e"!=b.tokenvalue)return void b.callError(MathParser.errUnknownEntries+e+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".");if(d>f&&!b.isOper(h))return void b.callError(MathParser.errOperatorExpected+f+".");if(d>f&&"("==h)return void b.callError(MathParser.errOperatorExpected+f+".")}if("n"==b.tokentype){if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".");if(d>f&&!b.isOper(h))return void b.callError(MathParser.errOperatorExpected+f+".");if(d>f&&"("==h)return void b.callError(MathParser.errOperatorExpected+f+".")}if("("==b.tokenvalue&&d>f&&"^*,)+/".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if(")"==b.tokenvalue){if(d>f&&-1=="^*+-,/)".indexOf(h))return void b.callError(MathParser.errEntriesExpected+f+".");if(g>=0&&"^*+-,/(".indexOf(i)>=0)return void b.callError(MathParser.errEntriesExpected+f+".")}if(","==b.tokenvalue){if(0==e||e==d-1)return void b.callError(MathParser.errStrayComma+e+".");if(d>f&&"^*+,/)".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if(g>=0&&"^*+-,/(".indexOf(i)>=0)return void b.callError(MathParser.errEntriesExpected+f+".")}if("^/*-+".indexOf(b.tokenvalue)>=0){if("+*^/),".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if("+*^/(,".indexOf(i)>=0&&"-"!=b.tokenvalue)return void b.callError(MathParser.errEntriesExpected+f+".")}}else b.callError(MathParser.errUnknownChar+e);e+=b.tokenlength,j+=1}},conOper:function(a,b){var c=this,d=null,e=0/0,f=0/0,g=0/0,h=null,i=null,j=0/0,k=0/0;if(e=a.length,d=a,-1==d.indexOf(b))return d;if(0==d.indexOf(b)&&"-"!=b)return c.callError(MathParser.errFirst+b),"";if(d.charAt(d.length-1)==b)return c.callError(MathParser.errLast+b+"."),"";for(f=0;d.indexOf(b)>0&&6*e>f;){if(f+=1,g=d.indexOf(b),j=c.goLeft(d,g),1==c.iserror)return c.callError(MathParser.errCharNumber.replace("%s",b).replace("%f",f)),"";if(h=d.substring(j+1,g),k=c.goRight(d,g),1==c.iserror)return c.callError(MathParser.errCharNumber.replace("%s",b).replace("%f",f)),"";if(i=d.substring(g+1,k),"*"==b&&(d=d.substring(0,j+1)+"mul("+h+","+i+")"+d.substring(k,d.length+1)),"/"==b&&(d=d.substring(0,j+1)+"div("+h+","+i+")"+d.substring(k,d.length+1)),"-"==b&&(d=d.substring(0,j+1)+"minus("+h+","+i+")"+d.substring(k,d.length+1)),"+"==b&&(d=d.substring(0,j+1)+"plus("+h+","+i+")"+d.substring(k,d.length+1)),d.length>7*e)return c.callError(MathParser.errOoops),""}return d},conUnary:function(a){var b,c,d,e,f=this;if(c=a.length,b=a,-1==b.indexOf("-"))return b;if("-"==b.charAt(b.length-1))return f.callError(MathParser.errLastMinus),"";for(d=0;d<b.length;d++){if("-"==b.charAt(d)&&f.unaryId(b.charAt(d-1))){if(e=f.goRight(b,d),1==f.iserror)return f.callError(MathParser.errPosition+d),"";b=b.substring(0,d)+"minus(0,"+b.substring(d+1,e)+")"+b.substring(e,b.length)}if(b.length>9*c)return f.callError(MathParser.errOoops),""}return b},unaryId:function(a){return"+-,(/*^".indexOf(a)>-1?!0:!1},goRight:function(a,b){var c=this,d=null,e=0/0,f=0/0;if(d=a.charAt(b+1),e=b+1,"-"==d){if(e+=1,e>=a.length)return c.iserror=1,e;d=a.charAt(e)}if(c.nums.indexOf(d)>-1)for(;c.nums.indexOf(a.charAt(e))>-1&&e<a.length;)e+=1;else if(c.lets.indexOf(d)>-1){for(;c.lets.indexOf(a.charAt(e))>-1&&e<a.length;)e+=1;if("("==a.charAt(e))for(f=1;f>0&&e<a.length;)e+=1,"("==a.charAt(e)&&(f+=1),")"==a.charAt(e)&&(f+=-1);if(f>0)return c.iserror=1,e}else{if("("!=d)return c.iserror=1,e;for(f=1;f>0&&e<a.length;)e+=1,"("==a.charAt(e)&&(f+=1),")"==a.charAt(e)&&(f+=-1);if(e+=1,f>0)return c.iserror=1,e}return e},goLeft:function(a,b){var c=this,d=null,e=0/0,f=0/0;if(d=a.charAt(b-1),e=b-1,c.nums.indexOf(d)>-1)for(;c.nums.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1;else if(c.lets.indexOf(d)>-1)for(;c.lets.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1;else{if(")"!=d)return c.iserror=1,e;if(f=1,0==e)return c.iserror=1,e;for(;f>0&&e>0;)e+=-1,")"==a.charAt(e)&&(f+=1),"("==a.charAt(e)&&(f+=-1);if(e+=-1,f>0)return c.iserror=1,e;if(e>=0&&c.nums.indexOf(a.charAt(e))>-1)return c.iserror=1,e;if(0==e&&"-"!=a.charAt(e)&&"("!=a.charAt(e))return c.iserror=1,e;if(e>0&&c.lets.indexOf(a.charAt(e))>-1)for(;c.lets.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1}return e},conCaret:function(a){var b=this,c=null,d=0/0,e=0/0,f=0/0,g=0/0,h=0/0,i=null,j=null;if(d=a.length,c=a,-1==c.indexOf("^"))return c;if(0==c.indexOf("^"))return b.callError(MathParser.errFisrt2),"";if("^"==c.charAt(c.length-1))return b.callError(MathParser.errLast2),"";for(e=0;c.indexOf("^")>0&&6*d>e;){if(e+=1,f=c.lastIndexOf("^"),g=b.goLeft(c,f),1==b.iserror)return b.callError(MathParser.errNumber2.replace("%f",e)),"";if(i=c.substring(g+1,f),h=b.goRight(c,f),1==b.iserror)return b.callError(MathParser.errNumber2.replace("%f",e)),"";if(j=c.substring(f+1,h),c=c.substring(0,g+1)+"pow("+i+","+j+")"+c.substring(h,c.length+1),c.length>7*d)return b.callError(MathParser.errOoops),""}return c},whiteSpaces:function(a){var b=0/0,c=null,d=0/0,e=0;for(d=a.length,c=a.toLowerCase();c.indexOf(" ")>-1&&d+1>e;)b=c.indexOf(" "),c=c.substring(0,b)+c.substring(b+1,c.length),e+=1;return c},checkLegal:function(a){var b,c,d,e=this;if(""==a)return e.callError(MathParser.errImput),!1;for(b=0;b<a.length;b++)if(d=a.charAt(b),c=e.nums.indexOf(d)+e.lets.indexOf(d)+e.opers.indexOf(d),-3==c)return e.callError(MathParser.errUnknownChar2),!1;return!0},checkPars:function(a){var b,c,d,e=this,f=0,g=0,h=0;for(b=0;b<a.length;b++)"("==a.charAt(b)&&(f+=1),")"==a.charAt(b)&&(g+=1);if(f!=g)return e.callError(MathParser.errMismatchedParenthesis),!1;for(c=0;c<a.length;c++)if("("==a.charAt(c)){for(d=1,h=0;d>0&&h<a.length;)h+=1,"("==a.charAt(c+h)&&(d+=1),")"==a.charAt(c+h)&&(d+=-1);if(d>0)return c+=1,e.callError(MathParser.errMismatchedParenthesis2+c),!1}for(c=0;c<a.length;c++)if(")"==a.charAt(c)){for(d=1,h=0;d>0&&h<a.length;)h+=1,")"==a.charAt(c-h)&&(d+=1),"("==a.charAt(c-h)&&(d+=-1);if(d>0)return c+=1,e.callError(MathParser.errMismatchedParenthesis2+c),!1}return!0},makeStack:function(a){var b,c,d,e,f=this,g=null,h=0/0,i=0/0,j=0/0;for(g=a,i=0,b=[],c=[],h=g.length,d=[],e=[],j=0;h>i&&2*h>j;){if(!f.nextToken(g,i))return f.callError(MathParser.errUnknownChar2),[];"f1"==f.tokentype&&(b.push(f.functions[f.tokenvalue]),b.push("f1"),c.push(f.functions.sin),c.push("f1")),"f2"==f.tokentype&&(b.push(f.functions[f.tokenvalue]),b.push("f2"),c.push(f.functions.plus),c.push("f2")),"v"==f.tokentype&&(b.push(f.tokenvalue),b.push("v"),c.push("x"),c.push("v")),"n"==f.tokentype&&(b.push(Number(f.tokenvalue)),b.push("n"),c.push(Number(f.tokenvalue)),c.push("n")),i+=f.tokenlength,j+=1}return b.reverse(),d=c.reverse(),f.checkEval(d),1==f.iserror?[]:b},callError:function(a){var b=this;throw b.errorMes=MathParser.errSyntaxError+a,b.iserror=1,new Error(b.errorMes)},checkEval:function(a){for(var b,c,d=this,e="",f=[],g=0;g<a.length;g++)if(e=a[g++],"n"==e)f.push(a[g]);else if("v"==e)f.push(1);else if("f1"==e){if(f.length<1)return void d.callError(MathParser.errNumberArguments);f.push(a[g](f.pop()))}else{if("f2"!=e)return void d.callError(MathParser.errEvaluate);if(f.length<2)return void d.callError(MathParser.errNumberArguments);b=f.pop(),c=f.pop(),f.push(a[g](b,c))}return 1!=f.length?void d.callError(""):isNaN(f[0])?void d.callError(""):void 0},pow:function(a,b){return 0>a&&b==Math.floor(b)?b%2==0?Math.pow(-a,b):-Math.pow(-a,b):0==a&&b>0?0:isNaN(a)&&0==b?0/0:Math.pow(a,b)},doEval:function(a,b){var c,d,e,f=this,g=a.PolishArray,h="",i=[],j=0/0,k=0/0;if(b.length!=f.aVarNames.length)return 0/0;for(k=0;k<b.length;k++)if("number"!=typeof b[k])return 0/0;for(j=0;j<g.length;j++)if(h=g[j++],"n"==h)i.push(g[j]);else if("v"==h)if("e"==g[j])i.push(Math.E);else if("pi"==g[j])i.push(Math.PI);else for(k=0;k<f.aVarNames.length;k++)g[j]==f.aVarNames[k]&&i.push(b[k]);else if("f1"==h)c=i.pop(),i.push(g[j](c));else{if("f2"!=h)return 0/0;d=i.pop(),e=i.pop(),e.toString()in a.fractions||(a.fractions[e.toString()]=Ratio.simplify(e));var l=a.fractions[e.toString()];i.push(g[j]===Math.pow&&1!=l[1]?f.rationalPower(d,l[0],l[1]):g[j](d,e))}return i[0]},rationalPower:function(a,b,c){if(0>a&&c%2==0)return 0/0;var d=b%2==1&&c%2==1&&0>a;d&&(a=-a),b%2==0&&(a=Math.abs(a));var e=Math.pow(a,b/c),f=Math.pow(e,c/b);return Math.abs(a-f)<1&&a>0==f>0?d?-e:e:0/0},doDeriv:function(a,b){var c=this;if(b.length>1)return 0/0;var d,e,f,g="",h=[],i=0/0,j=0/0;if(b.length!=c.aVarNames.length)return 0/0;for(j=0;j<b.length;j++)if("number"!=typeof b[j])return 0/0;for(i=0;i<a.length;i++)if(g=a[i++],"n"==g)h.push([a[i],0]);else if("v"==g)if("e"==a[i])h.push([Math.E,0]);else if("pi"==a[i])h.push([Math.PI,0]);else for(j=0;j<c.aVarNames.length;j++)a[i]==c.aVarNames[j]&&h.push([b[j],1]);else if("f1"==g)d=h.pop(),h.push(a[i](d));else{if("f2"!=g)return 0/0;e=h.pop(),f=h.pop(),h.push(a[i](e,f))}return h[0][1]},_gcd:function(a,b){var c=this,d=[].slice.call(arguments,2),e=1;if(a>b&&(a+=b,b=a-b,a-=b),b==Math.round(b/a)*a)e=a;else for(var f=Number(Math.round(a/2));f>1;f--)a==Math.round(a/f)*f&&b==Math.round(b/f)*f&&(e=f,f=-1);return d.length?c._gcd.apply(this,d.concat(e)):e},_lcm:function(a,b){var c=this,d=[].slice.call(arguments,2),e=Number(a*b/c._gcd(a,b));return d.length?c._lcm.apply(this,d.concat(e)):e}}),metaCalc.extendObject(MathParser,{errManyMinuses:"No need for so many minuses.",errExpected:"'(' expected at position ",errOperatorExpected:"Operator expected at position ",errUnknownFunctions:"Unknown functions at position ",errTwoArgumentsExpected:"Two arguments expected for function at position ",errUnknownEntries:"Unknown entries at position ",errEntriesExpected:"Entries expected at position ",errStrayComma:"Stray comma at position ",errUnknownChar:"Unknown characters at position ",errFirst:"Error at the first ",errLast:"Error at the last ",errCharNumber:"Error at %s number %f.",errOoops:"Oooops!",errLastMinus:"Error at the last minus.",errPosition:"Error at position ",errFisrt2:"Error at the first ^.",errLast2:"Error at the last ^.",errNumber2:"Error at ^ number %f from the end.",errImput:"Empty input.",errUnknownChar2:"Unknown characters.",errMismatchedParenthesis:"Mismatched parenthesis.",errMismatchedParenthesis2:"Mismatched parenthesis at position number ",errSyntaxError:"Syntax error. ",errNumberArguments:"Check number of arguments in your functions.",errEvaluate:"Can't evaluate."})}function localeAndActivateCalc(){$.get("lang2.xml",function(a){Locale.init(a);var b="<span>Need a different language?</span>",c=0;for(var d in Locale.languages)b+="<div class='language' class='' onclick='Locale.setLanguage(Locale.languages[\""+d+"\"])'>"+(0!=c?"&nbsp;&nbsp;|&nbsp;&nbsp;":"")+Locale.languages[d].name+"</div>",c++;$("#home .languageButtons").html(b);var e=getQueryParamsJSON();e.lang?Locale.setLanguage(Locale.languages[e.lang]):(-1!==window.location.hostname.search(/mathwarehouse\.cn\.com$/)||-1!==window.location.pathname.search(/index\.cn\.html$/))&&Locale.setLanguage(Locale.languages["zh-cn"])})}function themeSetup(){$("#theme-picker").change(function(){var a=null!=$(this).val()?$(this).val():"light";$.cookie("metacalculator-theme",a),$("body").attr("data-theme",a),console.log($.cookie("metacalculator-theme")),console.log($("body").attr("data-theme")),"#panel-102-graph"===PanelManager.getActivePanel()&&jQuery("#panel-101-equations .btnGraph").click()});var a=$.cookie("metacalculator-theme");$("body").attr("data-theme",void 0!==a?a:"light"),$("#theme-picker").val(a)}function adCheck(){if("en"==$("body").data("language")){var a=$(".ads").height()>1?!0:!1;a||$(".ads").append('<div class="static-ad"><a href="https://www.mathway.com/problemwidget.aspx?affiliateid=affil18092" target="_blank"><img class="img-responsive" src="images/picture-v.gif" alt="" /></a></div>')}}function getAndActivateValidators(){$.getJSON("rules.json",function(a){PanelAlerts.initRules(a)})}function browserCheck(){function a(){console.log("displayOldVersion() ");var a=' <div style="color:#900; background-color:#F9F; border-color:#900; border-style:solid; border-width:1px;border-radius: 5px;';a+='   -moz-border-radius: 5px; -webkit-border-radius: 5px; padding:20px;;">',a+=" <h1> Incompatible Browser Warning </h1>",a+="  <blockquote>",a+="   You appear to be using an older browser that does not support the newest version of  our graphing calculator.",a+='  Please upgrade your browswer (we recommend <a target="_blank" href="http://www.google.com/chrome">Chrome</a> or <a target="_blank" href="http://www.mozilla.org/en-US/firefox/new/">Mozilla</a>). </blockquote>',a+='<b> You can still use the older, Flash based, version of our calculator, <a href="index_swf.html">here </a></b>',a+=" </div> ",$("#outerWrapper").html(a)}var b=$.browser,c=(b.version.indexOf("."),parseInt(b.version.slice(0,3))),d="META_stronglyUrge",e="META_UNSURE",f="META_DISCOURAGE",g=null;b.webkit||b.mozilla||b.chrome?g=d:b.msie?c>=9?g=d:(g=f,a()):g=e;var h='<a href="http://www.meta-calculator.com/online/" id="metacalc2link" > Try out Meta Calculator 2.0 </a>  Improved to support implicit equations and more.';msg=h;var i="";i+=msg;var j=$("#versioninfo");"undefined"!=j.get(0)&&(j.html('<div style="margin:10px;margin-left:30px;">'+i+"</div>"),$("#metacalc2link").live("click",function(a){g==f&&(alert("Sorry, Meta Calculator 2 requires a more recent browser."),a.preventDefault())}))}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")||a.expr.filters.hidden(this)}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i=b.split(".")[0];b=b.split(".")[1],e=i+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[i]=a[i]||{},f=a[i][b],g=a[i][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,e){a.isFunction(e)&&(d[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=d,b=e.apply(this,arguments),this._super=c,this._superApply=f,b}}())}),g.prototype=a.widget.extend(h,{widgetEventPrefix:b},d,{constructor:g,namespace:i,widgetName:b,widgetBaseClass:e,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.widget.extend({},c[e],f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():new e(g,this)}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var d=this;a.each(c,function(c,e){function f(){return d.options.disabled===!0||a(this).hasClass("ui-state-disabled")?void 0:("string"==typeof e?d[e]:e).apply(d,arguments)}"string"!=typeof e&&(f.guid=e.guid=e.guid||f.guid||a.guid++);var g=c.match(/^(\w+)\s*(.*)$/),h=g[1]+d.eventNamespace,i=g[2];i?d.widget().delegate(i,h,f):b.bind(h,f)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.fn.caret=function(a,b){var c=this[0],d="true"===c.contentEditable;if(0==arguments.length){if(window.getSelection){if(d){c.focus();var e=window.getSelection().getRangeAt(0),f=e.cloneRange();return f.selectNodeContents(c),f.setEnd(e.endContainer,e.endOffset),f.toString().length}return{start:c.selectionStart,end:c.selectionEnd}}if(document.selection){if(c.focus(),d){var e=document.selection.createRange(),f=document.body.createTextRange();return f.moveToElementText(c),f.setEndPoint("EndToEnd",e),f.text.length}var a=0,b=c.value.length,g=c.createTextRange(),f=document.selection.createRange().duplicate(),h=f.getBookmark();for(g.moveToBookmark(h);0!==g.moveStart("character",-1);)a++;for(;0!==g.moveEnd("character",1);)b--;return{start:a,end:b}}return{start:0,end:0}}if("input"!==c.nodeName.toLowerCase())return 0;if(-1==a&&(a=this[d?"text":"val"]().length),window.getSelection)d?(c.focus(),window.getSelection().collapse(c.firstChild,a)):c.setSelectionRange(a,b);else if(document.body.createTextRange){var g=c.createTextRange(),i=a-(c.value.slice(0,a).split("\r\n").length-1);g.collapse(!0),a==b?g.move("character",i):(g.moveEnd("character",offsetToRangeCharacterMove(el,b)),g.moveStart("character",i)),g.select()}return d||c.focus(),{start:a,end:b}}}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a){"use strict";var b=a.document,c=a.setTimeout||c,d=a.clearTimeout||d,e=a.setInterval||e,f=a.History=a.History||{};if("undefined"!=typeof f.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");f.initHtml4=function(){return"undefined"!=typeof f.initHtml4.initialized?!1:(f.initHtml4.initialized=!0,f.enabled=!0,f.savedHashes=[],f.isLastHash=function(a){var b,c=f.getHashByIndex();return b=a===c},f.isHashEqual=function(a,b){return a=encodeURIComponent(a).replace(/%25/g,"%"),b=encodeURIComponent(b).replace(/%25/g,"%"),a===b},f.saveHash=function(a){return f.isLastHash(a)?!1:(f.savedHashes.push(a),!0)},f.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?f.savedHashes[f.savedHashes.length-1]:0>a?f.savedHashes[f.savedHashes.length+a]:f.savedHashes[a]},f.discardedHashes={},f.discardedStates={},f.discardState=function(a,b,c){var d,e=f.getHashByState(a);return d={discardedState:a,backState:c,forwardState:b},f.discardedStates[e]=d,!0},f.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return f.discardedHashes[a]=d,!0},f.discardedState=function(a){var b,c=f.getHashByState(a);return b=f.discardedStates[c]||!1},f.discardedHash=function(a){var b=f.discardedHashes[a]||!1;return b},f.recycleState=function(a){var b=f.getHashByState(a);return f.discardedState(a)&&delete f.discardedStates[b],!0},f.emulated.hashChange&&(f.hashChangeInit=function(){f.checkerFunction=null;var c,d,g,h,i="",j=Boolean(f.getHash());return f.isInternetExplorer()?(c="historyjs-iframe",d=b.createElement("iframe"),d.setAttribute("id",c),d.setAttribute("src","#"),d.style.display="none",b.body.appendChild(d),d.contentWindow.document.open(),d.contentWindow.document.close(),g="",h=!1,f.checkerFunction=function(){if(h)return!1;h=!0;var b=f.getHash(),c=f.getHash(d.contentWindow.document);return b!==i?(i=b,c!==b&&(g=c=b,d.contentWindow.document.open(),d.contentWindow.document.close(),d.contentWindow.document.location.hash=f.escapeHash(b)),f.Adapter.trigger(a,"hashchange")):c!==g&&(g=c,j&&""===c?f.back():f.setHash(c,!1)),h=!1,!0}):f.checkerFunction=function(){var b=f.getHash()||"";return b!==i&&(i=b,f.Adapter.trigger(a,"hashchange")),!0},f.intervalList.push(e(f.checkerFunction,f.options.hashChangeInterval)),!0},f.Adapter.onDomLoad(f.hashChangeInit)),f.emulated.pushState&&(f.onHashChange=function(b){var c,d=b&&b.newURL||f.getLocationHref(),e=f.getHashByUrl(d),g=null,h=null;return f.isLastHash(e)?(f.busy(!1),!1):(f.doubleCheckComplete(),f.saveHash(e),e&&f.isTraditionalAnchor(e)?(f.Adapter.trigger(a,"anchorchange"),f.busy(!1),!1):(g=f.extractState(f.getFullUrl(e||f.getLocationHref()),!0),f.isLastSavedState(g)?(f.busy(!1),!1):(h=f.getHashByState(g),c=f.discardedState(g),c?(f.getHashByIndex(-2)===f.getHashByState(c.forwardState)?f.back(!1):f.forward(!1),!1):(f.pushState(g.data,g.title,encodeURI(g.url),!1),!0))))},f.Adapter.bind(a,"hashchange",f.onHashChange),f.pushState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),f.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(e!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:e}),!1;f.busy(!0);var g=f.createStateObject(b,c,d),h=f.getHashByState(g),i=f.getState(!1),j=f.getHashByState(i),k=f.getHash(),l=f.expectedStateId==g.id;return f.storeState(g),f.expectedStateId=g.id,f.recycleState(g),f.setTitle(g),h===j?(f.busy(!1),!1):(f.saveState(g),l||f.Adapter.trigger(a,"statechange"),!f.isHashEqual(h,k)&&!f.isHashEqual(h,f.getShortUrl(f.getLocationHref()))&&f.setHash(h,!1),f.busy(!1),!0)},f.replaceState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),f.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");
if(e!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:e}),!1;f.busy(!0);var g=f.createStateObject(b,c,d),h=f.getHashByState(g),i=f.getState(!1),j=f.getHashByState(i),k=f.getStateByIndex(-2);return f.discardState(i,g,k),h===j?(f.storeState(g),f.expectedStateId=g.id,f.recycleState(g),f.setTitle(g),f.saveState(g),f.Adapter.trigger(a,"statechange"),f.busy(!1)):f.pushState(g.data,g.title,g.url,!1),!0}),f.emulated.pushState&&f.getHash()&&!f.emulated.hashChange&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(a,"hashchange")}),void 0)},"undefined"!=typeof f.init&&f.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;try{f=a.sessionStorage,f.setItem("TEST","1"),f.removeItem("TEST")}catch(o){f=!1}if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.disableSuid=m.options.disableSuid||!1,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.options.html4Mode=m.options.html4Mode||!1,m.options.delayInit=m.options.delayInit||!1,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h="undefined"!=typeof c&&"undefined"!=typeof c.log&&"undefined"!=typeof c.log.apply,i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated=m.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||m.getLocationHref();return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=m.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.getLocationHref=function(a){return a=a||d,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof m.idToState[c]||"undefined"!=typeof m.store.idToState[c];);m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(a.url?a.url:m.getLocationHref()),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&m.options.disableSuid!==!0&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),!e&&b&&!m.isTraditionalAnchor(a)&&(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getCurrentIndex=function(){var a=null;return a=m.savedStates.length<1?0:m.savedStates.length-1},m.getHash=function(a){var b,c=m.getLocationHref(a);return b=m.getHashByUrl(c)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=decodeURIComponent(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(m.busy(!0),c=m.extractState(a,!0),c&&!m.emulated.pushState?m.pushState(c.data,c.title,c.url,!1):m.getHash()!==a&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+a,!1)):d.location.hash=a),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.encodeURIComponent(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(m.getLocationHref());return m.isLastSavedState(c)?void 0:(b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m)},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var d,e,f=!1,g=!1;return m.doubleCheckComplete(),d=m.getHash(),d?(e=m.extractState(d||m.getLocationHref(),!0),e?m.replaceState(e.data,e.title,e.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(f=m.Adapter.extractEventData("state",b,c)||!1,g=f?m.getStateById(f):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(m.getLocationHref()),g||(g=m.createStateObject(null,null,m.getLocationHref())),m.expectedStateId=!1,m.isLastSavedState(g)?(m.busy(!1),!1):(m.storeState(g),m.saveState(g),m.setTitle(g),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(m.getLocationHref(),!0))),f&&(m.onUnload=function(){var a,b,c;try{a=k.parse(f.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),c=k.stringify(a);try{f.setItem("History.store",c)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;f.length&&(f.removeItem("History.store"),f.setItem("History.store",c))}},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},(!m.options||!m.options.delayInit)&&m.init()}(window);var Ratio=function(){"use strict";var a=function(b,c,d){if(this instanceof a){this.divSign="/",this.alwaysReduce=!!d;var e=a.getStandardRatioArray(b,c,this.alwaysReduce);return this._n=e[0],this._d=e[1],this}return new a(b,c,d)};return a.MAX_PRECISION=(1/3).toString().length-2,a.MAX_VALUE=Math.pow(2,53),a.MIN_VALUE=-Math.pow(2,53),a.regex={divSignCheck:/(\d|Infinity)\s*\//,divSignSplit:/\//,cleanFormat:/^\d+\.\d+$/,mixedNumbers:/(\S+)\s+(\S[\w\W]*)/,repeatingDecimals:/[^\.]+\.\d*(\d{2,})+(?:\1)$/,repeatingNumbers:/^(\d+)(?:\1)$/},a.VERSION="0.4.0",a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.getValueIfDefined=function(a,b){return"undefined"!=typeof b&&null!==b?b:a},a.gcd=function(a,b){var c;for(b=+b&&+a?+b:0,a=b?a:1;b;)c=a%b,a=b,b=c;return Math.abs(a)},a.getNumeratorWithSign=function(a,b){var c=0>+a*(+b||1)?-1:1;return Math.abs(+a)*c},a.guessType=function(b){var c="NaN";return b instanceof a?c="Ratio":isNaN(b)?a.regex.divSignCheck.test(b)&&(c=/\d\s+[+\-]?\d/.test(b)?"mixed":"fraction"):(c="number",-1<(+b).toString().indexOf("e")?c="e":b%1&&(c="decimal")),c},a.parseToArray=function(b){var c,d,e,f=[],g=[];switch(a.guessType(b)){case"mixed":f=b.match(a.regex.mixedNumbers),g=a.parseToArray(f[2]),c=+f[1]<0||+g[0]<0?-1:1,g[0]=c*(Math.abs(g[0])+Math.abs(f[1]*g[1]));break;case"fraction":f=b.split(a.regex.divSignSplit),g[0]=a.getNumeratorWithSign(f[0],f[1]),g[1]=Math.abs(+f[1]);break;case"decimal":f=(+b).toString().split("."),g[1]=Math.pow(10,f[1].length),g[0]=Math.abs(f[0])*g[1]+ +f[1],g[0]=-1<f[0].indexOf("-")?-g[0]:g[0];break;case"number":g=[+b,1];break;case"e":f=(+b).toString().split(/e/i),e=a.parseToArray(f[0]),d=Math.abs(+b)<1?[0,1]:[1,0],g[d[0]]=e[d[0]],g[d[1]]=Number(e[d[1]]+"e"+Math.abs(+f[1]));break;case"Ratio":g=[b._n,b._d];break;default:g=[0/0,1]}return g},a.parse=function(b,c){var d,e=a.parseToArray(b);return e.length&&void 0!==c&&null!==c&&(d=a.parseToArray(c),e[0]*=d[1],e[1]*=d[0]),new a(e[0],e[1])},a.simplify=function(b,c){b=a.parse(b,c);var d,e=b._n,f=e||!b._d?b._d:1,g=a.getRepeatProps(e/f);return g.length&&(e=Number(g.join(""))-Number(g[0]+String(g[1])),f=Math.pow(10,g[1].length)*(Math.pow(10,g[2].length)-1)),d=a.gcd(e,f),[e/d,f/d]},a.getRepeatProps=function(b){b=String(b||"");var c,d=[],e=a.regex.repeatingDecimals.exec(b),f=a.regex.repeatingNumbers;return e||(b=b.replace(/\d$/,""),e=a.regex.repeatingDecimals.exec(b)),e&&1<e.length&&/\.\d{10}/.test(e[0])&&(e[1]=f.test(e[1])?f.exec(e[1])[1]:e[1],c=new RegExp("("+e[1]+")+$"),d=b.split(/\./).concat(e[1]),d[1]=d[1].replace(c,"")),d},a.getPrimeFactors=function(a){a=Math.floor(a);for(var b,c,d=[],e=Math.sqrt,f=a>1&&isFinite(a);f;){if(b=e(a),c=2,a%c)for(c=3;a%c&&(c+=2)<b;);c=c>b?a:c,d.push(c),f=c!==a,a/=c}return d},a.getCleanENotation=function(a){if(a=(+a||0).toString(),/\.\d+(0|9){8,}\d?e/.test(a)){var b=a.match(/(?:\d+\.)(\d+)(?:e[\w\W]*)/)[1].replace(/(0|9)+\d$/,"").length+1;a=(+a).toPrecision(b).toString()}return a},a.simplifyENotation=function(a,b){var c=a/b,d=/[eE]/;if(!isNaN(c)&&d.test(a)&&d.test(b)){var e=a.toString().split("e"),f=b.toString().split("e");Number(f[1])<Number(e[1])?(e[1]=Number(e[1])+-1*f[1],f[1]=0):(f[1]=Number(f[1])+-1*e[1],e[1]=0),a=Number(e.join("e")),b=Number(f.join("e"))}return[a,b]},a.getCombinedRatio=function(b,c){return b instanceof a&&void 0===c||(b=a.parse(b,c)),b},a.random=function(){var b=Math.random().toFixed(Math.floor(16*Math.random()));return a.parse(b).simplify()},a.getStandardRatioArray=function(b,c,d){"undefined"==typeof c&&(c=1,"undefined"==typeof b&&(b=0));var e=+Math.abs(c),f=a.getNumeratorWithSign(b,c||1),g=[f,e];return g[1]&&d&&(g=a.simplify(g[0],g[1])),g},a.prototype={constructor:a,numerator:function(b){return"undefined"!=typeof b&&(this._n=a.parse(b).valueOf()),this._n},denominator:function(b){return"undefined"!=typeof b&&(this._d=a.parse(b).valueOf(),this.correctRatio()),this._d},correctRatio:function(){var b=a.getStandardRatioArray(this._n,this._d,this.alwaysReduce);return this._n=b[0],this._d=b[1],this},toArray:function(){return[this._n,this._d]},valueOf:function(){var b=a.simplifyENotation(this._n,this._d);return b[0]/b[1]},toLocaleString:function(){var a,b,c=this.valueOf();return isNaN(c)?b="NaN":c%1!==0&&1!==this._d&&isFinite(c%1)?1<Math.abs(c)?(a=parseInt(c,10),b=a+" "+Math.abs(this._n%this._d)+String(this.divSign)+this._d):b=this._n+String(this.divSign)+this._d:b=String(c),b},toString:function(){return String(this._n+this.divSign+this._d)},clone:function(b,c,d){var e=a.getValueIfDefined;return b=e(this._n,b),c=e(this._d,c),d=e(this.alwaysReduce,d),new a(b,c,d)},isNaN:function(){return!a.isNumeric(this.valueOf())},simplify:function(){var b=a.simplify(this._n,this._d);return this.clone(b[0],b[1])},add:function(b,c){b=a.getCombinedRatio(b,c);var d,e,f;return this._d===b._d?(e=this._n+b._n,f=this._d):(d=a.gcd(this._d,b._d),e=(this._n*b._d+this._d*b._n)/d,f=this._d*b._d/d),this.clone(e,f)},divide:function(b,c){return b=a.getCombinedRatio(b,c),this.clone(this._n*b._d,this._d*b._n)},equals:function(b){var c=a.isNumeric(b)||b instanceof a?b.valueOf():a.parse(b).valueOf();return this._n/this._d===+c},deepEquals:function(b){return b instanceof a&&this._n===b._n&&this._d===b._d&&this.divSign===b.divSign&&this.alwaysReduce===b.alwaysReduce},multiply:function(b,c){return b=a.getCombinedRatio(b,c),this.clone(this._n*b._n,this._d*b._d)},subtract:function(b,c){b=a.getCombinedRatio(b,c);var d,e,f;return this._d===b._d?(e=this._n-b._n,f=this._d):(d=a.gcd(this._d,b._d),e=(this._n*b._d-this._d*b._n)/d,f=this._d*b._d/d),this.clone(e,f)},descale:function(b,c){var d=a.getCombinedRatio(b,c);return this.clone(this._n/d,this._d/d)},pow:function(b,c){var d=a.getCombinedRatio(b,c);return this.clone(Math.pow(this._n,+d),Math.pow(this._d,+d))},scale:function(b,c){var d=a.getCombinedRatio(b,c);return this.clone(this._n*+d,this._d*+d)},cleanFormat:function(){var b,c=a.regex.cleanFormat;return c.test(this._n)||c.test(this._d)?a.parse(this._n,this._d):(b=this.clone(),b._n=a.getCleanENotation(b._n),b._d=a.getCleanENotation(b._d),b)},abs:function(){return this.clone(Math.abs(this._n))},mod:function(){return this.clone(this._n%this._d,1)},negate:function(){return this.clone(-this._n)},isProper:function(){return Math.abs(this._n)<this._d},findX:function(b){var c=String(b).split("/");return 2!==c.length||!isNaN(c[0])&&!isNaN(c[1])?null:isNaN(c[0])?new a(c[1]).multiply(this):new a(c[0]).divide(this)},reciprocal:function(){return this.clone(this._d,this._n)},toQuantityOf:function(){var a,b,c,d=this.valueOf(),e=1/0,f=arguments.length;for(c=0;f>c;c+=1)b=Math.abs(Math.round(d*arguments[c])/arguments[c]-d),e>b&&(a=arguments[c],e=b);return this.clone(Math.round(d*a),a)},floor:function(){return this.clone(Math.floor(this.valueOf()),1)},ceil:function(){return this.clone(Math.ceil(this.valueOf()),1)},makeProper:function(){return this.clone(this._n%this._d,this._d)}},a}();"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Ratio),exports.Ratio=Ratio):this.Ratio=Ratio,!function(a){"use strict";function b(a){return a.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function c(a){return parseFloat(b(a))>=10}var d,e={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},f={},g=0,h={},i=0,j={},k=null,l=null,m=function(){var a,b,c,d,e="ZeroClipboard.swf";if(document.currentScript&&(d=document.currentScript.src));else{var f=document.getElementsByTagName("script");if("readyState"in f[0])for(a=f.length;a--&&("interactive"!==f[a].readyState||!(d=f[a].src)););else if("loading"===document.readyState)d=f[f.length-1].src;else{for(a=f.length;a--;){if(c=f[a].src,!c){b=null;break}if(c=c.split("#")[0].split("?")[0],c=c.slice(0,c.lastIndexOf("/")+1),null==b)b=c;else if(b!==c){b=null;break}}null!==b&&(d=b)}}return d&&(d=d.split("#")[0].split("?")[0],e=d.slice(0,d.lastIndexOf("/")+1)+e),e}(),n=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),o=function(b,c){var d,e,f;return a.getComputedStyle?d=a.getComputedStyle(b,null).getPropertyValue(c):(e=n(c),d=b.currentStyle?b.currentStyle[e]:b.style[e]),"cursor"!==c||d&&"auto"!==d||(f=b.tagName.toLowerCase(),"a"!==f)?d:"pointer"},p=function(b){b||(b=a.event);var c;this!==a?c=this:b.target?c=b.target:b.srcElement&&(c=b.srcElement),K.activate(c)},q=function(a,b,c){a&&1===a.nodeType&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},r=function(a,b,c){a&&1===a.nodeType&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))},s=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)||a.classList.add(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},t=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)&&a.classList.remove(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},u=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(b/c*100)/100),d},v=function(b,c){var d={left:0,top:0,width:0,height:0,zIndex:B(c)-1};if(b.getBoundingClientRect){var e,f,g,h=b.getBoundingClientRect();"pageXOffset"in a&&"pageYOffset"in a?(e=a.pageXOffset,f=a.pageYOffset):(g=u(),e=Math.round(document.documentElement.scrollLeft/g),f=Math.round(document.documentElement.scrollTop/g));var i=document.documentElement.clientLeft||0,j=document.documentElement.clientTop||0;d.left=h.left+e-i,d.top=h.top+f-j,d.width="width"in h?h.width:h.right-h.left,d.height="height"in h?h.height:h.bottom-h.top}return d},w=function(a,b){var c=null==b||b&&b.cacheBust===!0&&b.useNoCache===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+(new Date).getTime():""},x=function(b){var c,d,e,f=[],g=[],h=[];if(b.trustedOrigins&&("string"==typeof b.trustedOrigins?g.push(b.trustedOrigins):"object"==typeof b.trustedOrigins&&"length"in b.trustedOrigins&&(g=g.concat(b.trustedOrigins))),b.trustedDomains&&("string"==typeof b.trustedDomains?g.push(b.trustedDomains):"object"==typeof b.trustedDomains&&"length"in b.trustedDomains&&(g=g.concat(b.trustedDomains))),g.length)for(c=0,d=g.length;d>c;c++)if(g.hasOwnProperty(c)&&g[c]&&"string"==typeof g[c]){if(e=E(g[c]),!e)continue;if("*"===e){h=[e];break}h.push.apply(h,[e,"//"+e,a.location.protocol+"//"+e])}return h.length&&f.push("trustedOrigins="+encodeURIComponent(h.join(","))),"string"==typeof b.jsModuleId&&b.jsModuleId&&f.push("jsModuleId="+encodeURIComponent(b.jsModuleId)),f.join("&")},y=function(a,b,c){if("function"==typeof b.indexOf)return b.indexOf(a,c);var d,e=b.length;for("undefined"==typeof c?c=0:0>c&&(c=e+c),d=c;e>d;d++)if(b.hasOwnProperty(d)&&b[d]===a)return d;return-1},z=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},A=function(b,c,d,e){e?a.setTimeout(function(){b.apply(c,d)},0):b.apply(c,d)},B=function(a){var b,c;return a&&("number"==typeof a&&a>0?b=a:"string"==typeof a&&(c=parseInt(a,10))&&!isNaN(c)&&c>0&&(b=c)),b||("number"==typeof N.zIndex&&N.zIndex>0?b=N.zIndex:"string"==typeof N.zIndex&&(c=parseInt(N.zIndex,10))&&!isNaN(c)&&c>0&&(b=c)),b||0},C=function(a,b){if(a&&b!==!1&&"undefined"!=typeof console&&console&&(console.warn||console.log)){var c="`"+a+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(c):console.log(c)}},D=function(){var a,b,c,d,e,f,g=arguments[0]||{};for(a=1,b=arguments.length;b>a;a++)if(null!=(c=arguments[a]))for(d in c)if(c.hasOwnProperty(d)){if(e=g[d],f=c[d],g===f)continue;void 0!==f&&(g[d]=f)}return g},E=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},F=function(){var a=function(a,b){var c,d,e;if(null!=a&&"*"!==b[0]&&("string"==typeof a&&(a=[a]),"object"==typeof a&&"length"in a))for(c=0,d=a.length;d>c;c++)if(a.hasOwnProperty(c)&&(e=E(a[c]))){if("*"===e){b.length=0,b.push("*");break}-1===y(e,b)&&b.push(e)}},b={always:"always",samedomain:"sameDomain",never:"never"};return function(c,d){var e,f=d.allowScriptAccess;if("string"==typeof f&&(e=f.toLowerCase())&&/^always|samedomain|never$/.test(e))return b[e];var g=E(d.moviePath);null===g&&(g=c);var h=[];a(d.trustedOrigins,h),a(d.trustedDomains,h);var i=h.length;if(i>0){if(1===i&&"*"===h[0])return"always";if(-1!==y(c,h))return 1===i&&c===g?"sameDomain":"always"}return"never"}}(),G=function(a){if(null==a)return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},H=function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},I=function(){try{return document.activeElement}catch(a){}return null},J=function(){var a=!1;if("boolean"==typeof e.disabled)a=e.disabled===!1;else{if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0)}return a},K=function(a,b){return this instanceof K?(this.id=""+g++,h[this.id]={instance:this,elements:[],handlers:{}},a&&this.clip(a),"undefined"!=typeof b&&(C("new ZeroClipboard(elements, options)",N.debug),K.config(b)),this.options=K.config(),"boolean"!=typeof e.disabled&&(e.disabled=!J()),void(e.disabled===!1&&e.outdated!==!0&&null===e.bridge&&(e.outdated=!1,e.ready=!1,O()))):new K(a,b)};K.prototype.setText=function(a){return a&&""!==a&&(f["text/plain"]=a,e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setText?e.bridge.setText(a):e.ready=!1),this},K.prototype.setSize=function(a,b){return e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a,b):e.ready=!1,this};var L=function(a){e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setHandCursor?e.bridge.setHandCursor(a):e.ready=!1};K.prototype.destroy=function(){this.unclip(),this.off(),delete h[this.id]};var M=function(){var a,b,c,d=[],e=G(h);for(a=0,b=e.length;b>a;a++)c=h[e[a]].instance,c&&c instanceof K&&d.push(c);return d};K.version="1.3.5";var N={swfPath:m,trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0};K.config=function(a){if("object"==typeof a&&null!==a&&D(N,a),"string"!=typeof a||!a){var b={};for(var c in N)N.hasOwnProperty(c)&&(b[c]="object"==typeof N[c]&&null!==N[c]?"length"in N[c]?N[c].slice(0):D({},N[c]):N[c]);return b}return N.hasOwnProperty(a)?N[a]:void 0},K.destroy=function(){K.deactivate();for(var a in h)if(h.hasOwnProperty(a)&&h[a]){var b=h[a].instance;b&&"function"==typeof b.destroy&&b.destroy()}var c=P(e.bridge);c&&c.parentNode&&(c.parentNode.removeChild(c),e.ready=null,e.bridge=null)},K.activate=function(a){d&&(t(d,N.hoverClass),t(d,N.activeClass)),d=a,s(a,N.hoverClass),Q();var b=N.title||a.getAttribute("title");if(b){var c=P(e.bridge);c&&c.setAttribute("title",b)}var f=N.forceHandCursor===!0||"pointer"===o(a,"cursor");L(f)},K.deactivate=function(){var a=P(e.bridge);a&&(a.style.left="0px",a.style.top="-9999px",a.removeAttribute("title")),d&&(t(d,N.hoverClass),t(d,N.activeClass),d=null)};var O=function(){var b,c,d=document.getElementById("global-zeroclipboard-html-bridge");if(!d){var f=K.config();f.jsModuleId="string"==typeof k&&k||"string"==typeof l&&l||null;var g=F(a.location.host,N),h=x(f),i=N.moviePath+w(N.moviePath,N),j='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+i+'"/>         <param name="allowScriptAccess" value="'+g+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+h+'"/>         <embed src="'+i+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+g+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+h+'"           scale="exactfit">         </embed>       </object>';
d=document.createElement("div"),d.id="global-zeroclipboard-html-bridge",d.setAttribute("class","global-zeroclipboard-container"),d.style.position="absolute",d.style.left="0px",d.style.top="-9999px",d.style.width="15px",d.style.height="15px",d.style.zIndex=""+B(N.zIndex),document.body.appendChild(d),d.innerHTML=j}b=document["global-zeroclipboard-flash-bridge"],b&&(c=b.length)&&(b=b[c-1]),e.bridge=b||d.children[0].lastElementChild},P=function(a){for(var b=/^OBJECT|EMBED$/,c=a&&a.parentNode;c&&b.test(c.nodeName)&&c.parentNode;)c=c.parentNode;return c||null},Q=function(){if(d){var a=v(d,N.zIndex),b=P(e.bridge);b&&(b.style.top=a.top+"px",b.style.left=a.left+"px",b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.zIndex=a.zIndex+1),e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a.width,a.height):e.ready=!1}return this};K.prototype.on=function(a,b){var c,d,f,g={},i=h[this.id]&&h[this.id].handlers;if("string"==typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.on(c,a[c]);if(f&&f.length){for(c=0,d=f.length;d>c;c++)a=f[c].replace(/^on/,""),g[a]=!0,i[a]||(i[a]=[]),i[a].push(b);g.noflash&&e.disabled&&T.call(this,"noflash",{}),g.wrongflash&&e.outdated&&T.call(this,"wrongflash",{flashVersion:e.version}),g.load&&e.ready&&T.call(this,"load",{flashVersion:e.version})}return this},K.prototype.off=function(a,b){var c,d,e,f,g,i=h[this.id]&&h[this.id].handlers;if(0===arguments.length)f=G(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=i[a],g&&g.length)if(b)for(e=y(b,g);-1!==e;)g.splice(e,1),e=y(b,g,e);else i[a].length=0;return this},K.prototype.handlers=function(a){var b,c=null,d=h[this.id]&&h[this.id].handlers;if(d){if("string"==typeof a&&a)return d[a]?d[a].slice(0):null;c={};for(b in d)d.hasOwnProperty(b)&&d[b]&&(c[b]=d[b].slice(0))}return c};var R=function(b,c,d,e){var f=h[this.id]&&h[this.id].handlers[b];if(f&&f.length){var g,i,j,k=c||this;for(g=0,i=f.length;i>g;g++)j=f[g],c=k,"string"==typeof j&&"function"==typeof a[j]&&(j=a[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(c=j,j=j.handleEvent),"function"==typeof j&&A(j,c,d,e)}return this};K.prototype.clip=function(a){a=z(a);for(var b=0;b<a.length;b++)if(a.hasOwnProperty(b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===y(this.id,j[a[b].zcClippingId])&&j[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+i++,j[a[b].zcClippingId]=[this.id],N.autoActivate===!0&&q(a[b],"mouseover",p));var c=h[this.id].elements;-1===y(a[b],c)&&c.push(a[b])}return this},K.prototype.unclip=function(a){var b=h[this.id];if(b){var c,d=b.elements;a="undefined"==typeof a?d.slice(0):z(a);for(var e=a.length;e--;)if(a.hasOwnProperty(e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=y(a[e],d,c));)d.splice(c,1);var f=j[a[e].zcClippingId];if(f){for(c=0;-1!==(c=y(this.id,f,c));)f.splice(c,1);0===f.length&&(N.autoActivate===!0&&r(a[e],"mouseover",p),delete a[e].zcClippingId)}}}return this},K.prototype.elements=function(){var a=h[this.id];return a&&a.elements?a.elements.slice(0):[]};var S=function(a){var b,c,d,e,f,g=[];if(a&&1===a.nodeType&&(b=a.zcClippingId)&&j.hasOwnProperty(b)&&(c=j[b],c&&c.length))for(d=0,e=c.length;e>d;d++)f=h[c[d]].instance,f&&f instanceof K&&g.push(f);return g};N.hoverClass="zeroclipboard-is-hover",N.activeClass="zeroclipboard-is-active",N.trustedOrigins=null,N.allowScriptAccess=null,N.useNoCache=!0,N.moviePath="ZeroClipboard.swf",K.detectFlashSupport=function(){return C("ZeroClipboard.detectFlashSupport",N.debug),J()},K.dispatch=function(a,b){if("string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");if(c)for(var e=d&&N.autoActivate===!0?S(d):M(),f=0,g=e.length;g>f;f++)T.call(e[f],c,b)}},K.prototype.setHandCursor=function(a){return C("ZeroClipboard.prototype.setHandCursor",N.debug),a="boolean"==typeof a?a:!!a,L(a),N.forceHandCursor=a,this},K.prototype.reposition=function(){return C("ZeroClipboard.prototype.reposition",N.debug),Q()},K.prototype.receiveEvent=function(a,b){if(C("ZeroClipboard.prototype.receiveEvent",N.debug),"string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");c&&T.call(this,c,b)}},K.prototype.setCurrent=function(a){return C("ZeroClipboard.prototype.setCurrent",N.debug),K.activate(a),this},K.prototype.resetBridge=function(){return C("ZeroClipboard.prototype.resetBridge",N.debug),K.deactivate(),this},K.prototype.setTitle=function(a){if(C("ZeroClipboard.prototype.setTitle",N.debug),a=a||N.title||d&&d.getAttribute("title")){var b=P(e.bridge);b&&b.setAttribute("title",a)}return this},K.setDefaults=function(a){C("ZeroClipboard.setDefaults",N.debug),K.config(a)},K.prototype.addEventListener=function(a,b){return C("ZeroClipboard.prototype.addEventListener",N.debug),this.on(a,b)},K.prototype.removeEventListener=function(a,b){return C("ZeroClipboard.prototype.removeEventListener",N.debug),this.off(a,b)},K.prototype.ready=function(){return C("ZeroClipboard.prototype.ready",N.debug),e.ready===!0};var T=function(a,g){a=a.toLowerCase().replace(/^on/,"");var h=g&&g.flashVersion&&b(g.flashVersion)||null,i=d,j=!0;switch(a){case"load":if(h){if(!c(h))return void T.call(this,"onWrongFlash",{flashVersion:h});e.outdated=!1,e.ready=!0,e.version=h}break;case"wrongflash":h&&!c(h)&&(e.outdated=!0,e.ready=!1,e.version=h);break;case"mouseover":s(i,N.hoverClass);break;case"mouseout":N.autoActivate===!0&&K.deactivate();break;case"mousedown":s(i,N.activeClass);break;case"mouseup":t(i,N.activeClass);break;case"datarequested":if(i){var k=i.getAttribute("data-clipboard-target"),l=k?document.getElementById(k):null;if(l){var m=l.value||l.textContent||l.innerText;m&&this.setText(m)}else{var n=i.getAttribute("data-clipboard-text");n&&this.setText(n)}}j=!1;break;case"complete":H(f),i&&i!==I()&&i.focus&&i.focus()}var o=i,p=[this,g];return R.call(this,a,o,p,j)};"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return k=c&&c.id||null,K}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports&&"function"==typeof a.require?(l=module.id||null,module.exports=K):a.ZeroClipboard=K}(function(){return this}()),Array.prototype.sortOn=function(){var a=this.slice();if(!arguments.length)return a.sort();var b=Array.prototype.slice.call(arguments);return a.sort(function(a,c){for(var d=b.slice(),e=d.shift();a[e]==c[e]&&d.length;)e=d.shift();return a[e]==c[e]?0:a[e]>c[e]?1:-1})};var metaCalc={is:function(a,b){return"number"==typeof a&&b==Number?!0:"string"==typeof a&&b==String?!0:a instanceof b},createClass:function(a){return function(){for(var b in a)this[b]=a[b];this.initialize.apply(this,arguments)}},extendObject:function(a,b){for(var c in b)a[c]=b[c];return a},utils:{clamp:function(a,b,c){return arguments.length<3&&(c=1.79e308),arguments.length<2&&(b=-1.79e308),isNaN(a)?0:b>a?b:a>c?c:a},isEquationInFxForm:function(a){return/^ *y *(<|>|<=|>=|=)[^y]*$/.test(a)},isInequation:function(a){return/[<>]=?/.test(a)},getInequalitySign:function(a){return a.match(/([<>]=?)/)[1]},isPolar:function(a){return/\b[rt]\b/.test(a)},rectangularToPolar:function(a){return a.replace(/\br\b/g,"(sqrt(x^2+y^2))").replace(/\bt\b/g,"(atan(y/abs(x)))")},piEval:function(val,degrees){var pi=degrees?180:Math.PI;val=val.toString().replace(/([0-9\)]) *([\(a-z])/gi,"$1*$2").replace(/\b(r|t|x|y|e|pi) +([a-z0-9])/gi,"$1*$2");var f,s="f = "+val;try{return eval(s),degrees?f/180*Math.PI:f}catch(e){return 0/0}}}},MathProcessor=metaCalc.createClass({initialize:function a(){this.DECIMALPLACES=15,this.RAD2DEG=Number(180/Math.PI),this.DEG2RAD=Number(Math.PI/180),this.MOREISINFINITE=Math.pow(2,52),this.LESSISINFINITE=-Math.pow(2,52),this.MINDIFERENCE=1e-11;var b=this;b.o={"+":function(a,b){return+a+b},"-":function(a,b){return a-b},"%":function(a,b){return a-b*Math.floor(a/b)},"/":function(a,c){return b.toRound(a/c)},"*":function(a,c){return b.toRound(a*c)},"^":function(a,b){return Math.pow(a,b)},"~":function(a,b){return Math.pow(a,1/b)}},b.s={"^":3,"~":3,"*":2,"/":2,"%":1,"+":0,"-":0},b.u={"+":1,"-":-1},b.p={"(":1,")":-1},b.toRound=function(a){if(!isNaN(a)&&isFinite(a)){if(a>b.MOREISINFINITE)return 1/0;if(a<b.LESSISINFINITE)return-1/0;var c=Math.round(a);if(Math.abs(c-a)<b.MINDIFERENCE)return Number(c.toFixed(b.DECIMALPLACES))}return a},b.toDeg=function(a){return b.toRound(a*b.RAD2DEG)},b.toRad=function(a){return b.toRound(a*b.DEG2RAD)},b.ctx=b.methods={sin:function(a){return b.toRound(Math.sin(a))},cos:function(a){return b.toRound(Math.cos(a))},tan:function(a){return b.toRound(Math.tan(a))},csc:function(a){return b.toRound(1/b.ctx.sin(a))},cosec:function(a){return b.toRound(1/b.ctx.sin(a))},sec:function(a){return b.toRound(1/b.ctx.cos(a))},cot:function(a){return b.toRound(1/b.ctx.tan(a))},sind:function(a){return b.ctx.sin(a*b.DEG2RAD)},cosd:function(a){return b.ctx.cos(a*b.DEG2RAD)},tand:function(a){return b.ctx.tan(a*b.DEG2RAD)},cscd:function(a){return b.ctx.csc(a*b.DEG2RAD)},cosecd:function(a){return b.ctx.cosec(a*b.DEG2RAD)},secd:function(a){return b.ctx.sec(a*b.DEG2RAD)},cotd:function(a){return b.ctx.cot(a*b.DEG2RAD)},asin:function(a){return b.toRound(Math.asin(a))},acos:function(a){return b.toRound(Math.acos(a))},atan:function(a){return b.toRound(Math.atan(a))},acsc:function(a){return b.ctx.asin(1/a)},acosec:function(a){return b.ctx.asin(1/a)},asec:function(a){return b.ctx.acos(1/a)},acot:function(a){return b.ctx.atan(1/a)},asind:function(a){return b.toDeg(b.ctx.asin(a))},acosd:function(a){return b.toDeg(b.ctx.acos(a))},atand:function(a){return b.toDeg(b.ctx.atan(a))},acscd:function(a){return b.toDeg(b.ctx.acsc(a))},acosecd:function(a){return b.toDeg(b.ctx.acosec(a))},asecd:function(a){return b.toDeg(b.ctx.asec(a))},acotd:function(a){return b.toDeg(b.ctx.acot(a))},sinh:function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh:function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh:function(a){return b.ctx.sinh(a)/b.ctx.cosh(a)},csch:function(a){return 1/b.ctx.sinh(a)},cosech:function(a){return 1/b.ctx.sinh(a)},sech:function(a){return 1/b.ctx.cosh(a)},coth:function(a){return 1/b.ctx.tanh(a)},sinhd:function(a){return b.ctx.sinh(a*b.DEG2RAD)},coshd:function(a){return b.ctx.cosh(a*b.DEG2RAD)},tanhd:function(a){return b.ctx.tanh(a*b.DEG2RAD)},cschd:function(a){return b.ctx.csch(a*b.DEG2RAD)},cosechd:function(a){return b.ctx.cosech(a*b.DEG2RAD)},sechd:function(a){return b.ctx.sech(a*b.DEG2RAD)},cothd:function(a){return b.ctx.coth(a*b.DEG2RAD)},asinh:function(a){return Math.log(a+Math.sqrt(a*a+1))},acosh:function(a){return Math.log(a+Math.sqrt(a*a-1))},atanh:function(a){return.5*Math.log((1+a)/(1-a))},acsch:function(a){return b.ctx.asinh(1/a)},acosech:function(a){return b.ctx.asinh(1/a)},asech:function(a){return b.ctx.acosh(1/a)},acoth:function(a){return b.ctx.atanh(1/a)},asinhd:function(a){return b.ctx.asinh(a)*b.RAD2DEG},acoshd:function(a){return b.ctx.acosh(a)*b.RAD2DEG},atanhd:function(a){return b.ctx.atanh(a)*b.RAD2DEG},acschd:function(a){return b.ctx.acsch(a)*b.RAD2DEG},acosechd:function(a){return b.ctx.acosech(a)*b.RAD2DEG},asechd:function(a){return b.ctx.asech(a)*b.RAD2DEG},acothd:function(a){return b.ctx.acoth(a)*b.RAD2DEG},pow:Math.pow,pow2:function(a){return Math.pow(a,2)},pow3:function(a){return Math.pow(a,3)},pow10x:function(a){return Math.pow(10,a)},exp:Math.exp,pi:Math.PI,sqrt:function(a,b){return arguments.length<2&&(b=2),Math.pow(a,1/b)},root3:function(a){return Math.pow(a,1/3)},root:function(a,b){return Math.pow(a,1/b)},log2:function(a){return b.toRound(Math.log(a)*Math.LOG2E)},log10:function(a){return b.toRound(Math.log(a)*Math.LOG10E)},logtwo:function(a){return b.toRound(Math.log(a)*Math.LOG2E)},logten:function(a){return b.toRound(Math.log(a)*Math.LOG10E)},ln:Math.log,log:Math.log,logn:function(a,b){return Math.log(b)/Math.log(a)},e:Math.E,fac:function(c){if(0>c)throw new Error(a.errFactorialNegative);return 1>=c?1:b.ctx.fac(c-1)*c},npr:function(a,c){return b.ctx.fac(a)/b.ctx.fac(a-c)},ncr:function(a,c){return c>a?0:b.ctx.fac(a)/b.ctx.fac(c)/b.ctx.fac(a-c)},gcd:b._gcd,lcm:b._lcm,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,random:Math.random,round:Math.round}},parse:function(a,b){if(b="undefined"==typeof b?!1:b,"Infinity"===a)return a;if(a=a.replace(/\s*/g,"").replace(/\bpi\b/g,Math.PI).replace(/\be\b/g,Math.E).replace(/–/g,"-").replace(/×/g,"*").replace(/%/g,"/100").replace(/mod/g,"%").replace(/([\^])( *[\-] *[0-9\.]*)\b/g,"$1($2)").replace(/([\+\-\*\/])( *[\-+] *[0-9\.]*)\b/g,"$1($2)").replace(/(^|[^0-9])\.([0-9]+)/g,"$10.$2").replace(/([0-9]+)\.([^0-9]|$)/g,"$1.0$2"),a=a.replace(/([0-9])\s*\(/g,"$1*("),a=a.replace(/([a-z]+[0-9]+)\*\(/gi,"$1("),a=a.replace(/\)\s*([0-9])/g,")*$1"),a=a.replace(/\)\s*\(/g,")*("),a=a.replace(/-\s*-/g,"+"),a=a.replace(/\+\s*\+/g,"+"),a=a.replace("xy","x*y"),a=a.replace("yx","y*x"),a=a.replace(/(.*)\%(.*)/g,"($1)%($2)"),a=a.replace(/([0-9]+)([a-z]+)/g,"$1*$2"),a=a.replace(/(pow10\*x)/gi,"pow10x"),a=this.replaceVerticalBars(a),b&&(a=a.replace(/\b(a?(sin|cos|tan|csc|sec|cot)h?)\b/g,"$1d")),a=a.replace(/\(\-/g,"(0-").replace(/,\-/g,",0-"),a=a.replace(/\(\+/g,"(0+").replace(/,\+/g,",0+"),("-"===a.charAt(0)||"+"===a.charAt(0))&&(a="0"+a),-1!==a.search(/[\-\+\*\/\^]$/))throw new Error(MathProcessor.errSyntax);if(-1!==a.search(/\^[\+\*\/]/))throw new Error(MathProcessor.errSyntax);try{var c=this.InfixToPostfix(a),d=this.EvaluateExpression(c);return d}catch(a){this.error(a)}},replaceVerticalBars:function(a){if(-1===a.indexOf("|"))return a;for(var b=a.split(""),c=[],d=0;d<a.length;d++)"|"===a[d]&&c.push(d);for(var d=0;d<c.length/2;d++)b[c[d]]="abs(",b[c[c.length-(d+1)]]=")";return b.join("")},getTokens:function(a){var b,c="(",d=(new MathParser([]),[]);d=["asinhg","acoshg","atanhg","acschg","acosechg","asechg","acothg","asinhd","acoshd","atanhd","acschd","acosechd","asechd","acothd","asind","acosd","atand","acscd","acosecd","asecd","acotd","asinh","acosh","atanh","acsch","acosech","asech","acoth","asing","acosg","atang","acscg","acosecg","asecg","acotg","asin","acos","atan","acsc","acosec","asec","acot","sinhg","coshg","tanhg","cschg","cosechg","sechg","cothg","sinhd","coshd","tanhd","cschd","cosechd","sechd","cothd","sinh","cosh","tanh","csch","cosech","sech","coth","sind","cosd","tand","cscd","cosecd","secd","cotd","sing","cosg","tang","cscg","cosecg","secg","cotg","sin","cos","tan","csc","cosec","sec","cot","pow2","pow3","pow10x","exp","log2","log10","logtwo","logten","ln","logn","log","fac","root3","abs","ceil","floor","round","random","sqrt","max","min","plus","minus","mul","div","pow","root","npr","ncr","lcm","gcd"];for(var e=0;e<d.length;e++)c+=d[e]+"|";return c+="[0-9]+(?:\\.[0-9]+)?|[*+-\\^\\/()])",b=new RegExp(c),a.split(b)},InfixToPostfix:function(a){for(var b=this.getTokens(a),c=[],d=[];0!=b.length;){var e=b.shift();if(this.isNumber(e))c.push(e);else if(this.isFunction(e))d.push(e);else if(this.isFunctionArgumentSeparator(e))for(;"("!==d[d.length-1];){if(0===d.length)throw new Error(MathProcessor.errMisplacedCommas);c.push(d.pop())}else if(this.isOperator(e)){for(;"left"==this.getAssociativity(e)&&this.getPrecedence(e)<=this.getPrecedence(d[d.length-1])||"right"==this.getAssociativity(e)&&this.getPrecedence(e)<this.getPrecedence(d[d.length-1]);)c.push(d.pop());d.push(e)}else if("("==e)d.push(e);else if(")"==e){for(;"("!==d[d.length-1];){if(0==d.length)throw new Error(MathProcessor.errMisplacedCommas);c.push(d.pop())}var f=d.pop();this.isFunction(f)&&c.push(f)}}for(;0!=d.length;){if(d[d.length-1].match(/([()])/))throw new Error(MathProcessor.errMisplacedCommas);c.push(d.pop())}return c.join(" ")},EvaluateExpression:function(a){for(var b=this.getTokens(a),c=[];0!=b.length;){var d=b.shift();if(this.isNumber(d))c.push(d);else if(this.isOperator(d)||this.isFunction(d)){var e=0/0,f=0/0;if(d=d.replace(/\s+/g,""),this.isFunction(d)){var g=new MathParser([]);if(g.istokf1(d))f=c.pop();else if(g.istokf2(d))f=c.pop(),e=c.pop(),isNaN(e)&&(e=0);else if(g.istokfN(d)){var h=this.f(d+"("+c.join(",")+")");c.push(h);continue}}else f=c.pop(),e=c.pop(),isNaN(e)&&(e=0);isNaN(f)&&(f=0);var i=this.PerformOperation(parseFloat(e),parseFloat(f),d);c.push(i)}}return c.pop()},isOperator:function(a){return a.match(/([*+-\^\/%])/)?!0:!1},isNumber:function(a){return a.match(/^\s*([0-9]+(?:\.[0-9]+)?)\s*$/)?!0:!1},isFunction:function(a){return"undefined"!=typeof a&&/^\s*[a-zA-Z]{2}/.test(a)?!0:!1},isFunctionArgumentSeparator:function(a){return/,/.test(a)?!0:!1},getPrecedence:function(a){if(this.isFunction(a))return 10;switch(a){case"^":return 9;case"*":case"/":case"%":return 8;case"+":case"-":return 6;default:return-1}},getAssociativity:function(a){switch(a){case"+":case"-":case"*":case"/":return"left";case"^":return"right";default:return"right"}},PerformOperation:function(a,b,c){switch(c=c.replace(/^\s+|\s+$/g,"")){case"+":return a+b;case"-":return a-b;case"*":return a*b;case"/":return a/b;case"%":return a-b*Math.floor(a/b);case"^":return Math.pow(a,b);default:var d;return d=isNaN(a)?b:a+", "+b,this.f(c.replace(/\s+/g,"")+"("+d+")")}},RPN:function(a){var b,c,d=([].slice.call(arguments,1),c=[void 0,void 0,void 0,0]);if(a[0]in this.u||!a.unshift("+"))for(;a[1]in this.u;a[0]=this.u[a.shift()]*this.u[a[0]]+1?"+":"-");(d[3]=[this.u[a.shift()],d,void 0,0])[1][0]="*",(c=[void 0,void 0,d,0])[2][1]=c,(d[2]=this.v(a))[1]=d,!a.length&&(c=d)||a[0]in this.s&&((d=c)[0]=a.shift(),!a.length&&this.error());for(;a.length;){if(a[0]in this.u){for(;a[1]in this.u;a[0]=this.u[a.shift()]*this.u[a[0]]+1?"+":"-");(d=d[3]=["*",d,void 0,0])[2]=[-1,d,void 0,0]}(d[3]=this.v(a))[1]=d,a[0]in this.s&&(d=this.s[a[0]]>this.s[d[0]]?((d[3]=(b=d[3],d[2]))[1][2]=[a.shift(),d,b,0])[2][1]=d[2]:c==d?(c=[a.shift(),void 0,d,0])[2][1]=c:((c[2]=(b=c[2],[a.shift(),c,void 0,0]))[2]=b)[1]=c[2])}return c},v:function(a){var b,c,d,e;if("0123456789.".indexOf(a[0])+1){for(b=-1,c=a.length;++b<c&&"0123456789.".indexOf(a[b])+1;);return[+a.splice(0,b).join(""),void 0,void 0,0]}if("("==a[0]){for(b=0,c=a.length,d=1;++b<c&&(a[b]in this.p&&(d+=this.p[a[b]]),d););return this.RPN(c=a.splice(0,b),c.shift(),!d&&a.shift())}if(b=0,e=a[0].toLowerCase(),e>="a"&&"z">=e||"_"==e){for(;(e=a[++b].toLowerCase())>="a"&&"z">=e||"_"==e||e>=0&&9>=e;);if("("==e){for(c=a.length,d=1;++b<c&&(a[b]in this.p&&(d+=this.p[a[b]]),d););return[a.splice(0,b+1).join(""),void 0,void 0,0]}}return this.error(),null},f:function(a){var b,c,d,e=0;if((a=a.split(""))[e]>="a"&&a[e]<="z"||"_"==a[e]){for(;a[++e]>="a"&&a[e]<="z"||"_"==a[e]||a[e]>=0&&a[e]<=9;);if("("==a[e]){for(!this.methods[b=a.splice(0,e).join("")]&&this.error('Function "'+b+'" not found!'),a.shift(),c=[],e=-1,d=1;a[++e]&&(a[e]in this.p&&(d+=this.p[a[e]]),d);)1==d&&","==a[e]&&(c.push(parseFloat(this.parse(a.splice(0,e).join("")))),a.shift(),e=-1);c.push(parseFloat(this.parse(a.splice(0,e).join("")))),!d&&a.shift()}return this.methods[b].apply(this,c)}},error:function(a){throw arguments.length<1&&(a=null),new Error(MathProcessor.errMathProcessor+(a||MathProcessor.errSyntax))},_gcd:function(a,b){(0>=a||0>=b||a%1!==0||b%1!==0)&&this.error(MathProcessor.errOnlyAllowPositive);var c=this,d=[].slice.call(arguments,2),e=1;if(a>b&&(a+=b,b=a-b,a-=b),b==Math.round(b/a)*a)e=a;else for(var f=Number(Math.round(a/2));f>1;f--)a==Math.round(a/f)*f&&b==Math.round(b/f)*f&&(e=f,f=-1);return d.length?c._gcd.apply(this,d.concat(e)):e},_lcm:function(a,b){(0>=a||0>=b||a%1!==0||b%1!==0)&&this.error(MathProcessor.errOnlyAllowPositive);var c=this,d=[].slice.call(arguments,2),e=Number(a*b/c._gcd(a,b));return d.length?c._lcm.apply(this,d.concat(e)):e}});metaCalc.extendObject(MathProcessor,{errFactorialNegative:"Factorial does not exist for negative numbers.",errParenthesesBalancing:"Parentheses balancing error.",errMisplacedCommas:"Incorrect syntax on Commas, please remove commas from formatted numbers.",errMathProcessor:"MathProcessor: ",errSyntax:"Syntax error in expression!",errOnlyAllowPositive:"1024, We only allow positive and integers for gcd and lcm."});var LinearEquation=metaCalc.createClass({initialize:function(a){var b=this;b.equation=a,b.coefficients=null,b.constant=0},evaluate:function(){var a=this,b=null,c=a.equation.replace(/ /g,"").replace(/(^|[\-\+=])([a-z])/gi,"$11$2").split("=");if(c.length>2)throw new Error(LinearEquation.errEvalError);var d={};if(c.length<2||c[0].match(/([a-z]{2,}|[\(\)\/])/))throw new Error(LinearEquation.errEvalError);for(var e in c[0].match(/([\-\+]*[0-9\.]*)[a-z]/gi))({}).hasOwnProperty.call(c[0].match(/([\-\+]*[0-9\.]*)[a-z]/gi),e)&&(b=c[0].match(/([\-\+]*[0-9\.]*)[a-z]/gi)[e],d[b.substr(-1)]?d[b.substr(-1)]+=parseFloat(b):d[b.substr(-1)]=+parseFloat(b));for(var f in c[1].match(/([\-\+]*[0-9\.]*)[a-z]/gi))({}).hasOwnProperty.call(c[1].match(/([\-\+]*[0-9\.]*)[a-z]/gi),f)&&(b=c[1].match(/([\-\+]*[0-9\.]*)[a-z]/gi)[f],d[b.substr(-1)]?d[b.substr(-1)]-=parseFloat(b):d[b.substr(-1)]=-parseFloat(b));for(var g in c[0].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi))({}).hasOwnProperty.call(c[0].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi),g)&&(b=c[0].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi)[g],a.constant?a.constant-=parseFloat(b):a.constant=-parseFloat(b));for(var h in c[1].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi))({}).hasOwnProperty.call(c[1].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi),h)&&(b=c[1].match(/([\-\+]*[0-9\.]+)([\+\-]|$)/gi)[h],a.constant?a.constant+=parseFloat(b):a.constant=+parseFloat(b));a.coefficients=d},getCoefficients:function(){var a=this;return a.coefficients?a.coefficients:(a.evaluate(),a.coefficients)},getConstant:function(){var a=this;return a.coefficients?a.constant:(a.evaluate(),a.constant)}});metaCalc.extendObject(LinearEquation,{errEvalError:"There was an error evaluating one of the equations. The equations must be in the format Ax + By + ... = C."});var SystemOfEquations=metaCalc.createClass({initialize:function(){for(var a=this,b=[].slice.call(arguments,0),c=0,d=parseInt(b.length);d>c;c++)b[c]=new LinearEquation(b[c]);a.equations=b,a._variables=null},addEquations:function(){for(var a=this,b=[].slice.call(arguments,0),c=0,d=parseInt(b.length);d>c;c++)b[c]=new LinearEquation(b[c]);a.equations=a.equations.concat(b)},solve:function(){var a=this;if(a.equations.length<2)throw new Error(SystemOfEquations.errLT2Equations);var b=a.getCoefficientMatrix().transpose(),c=a.getConstantMatrix();if(!b.isSquare())throw new Error(SystemOfEquations.errNotSolvable1);try{var d=b.invert().multiply(c)}catch(e){throw e instanceof Error?new Error(SystemOfEquations.errNotSolvable2):e}for(var f=d.get(),g={},h=0;h<a._variables.length;h++)if(g[a._variables.charAt(h)]=f[h],isNaN(f[h]))throw new Error(SystemOfEquations.errSyntaxError);return g},getCoefficientMatrix:function(){for(var a=this,b=[],c=0,d=parseInt(a.equations.length);d>c;c++)b[c]=a.equations[c].getCoefficients();for(c=0,d=b.length;d>c;c++)for(var e in b[c])for(var f=0;f<b.length;f++)c!=f&&(b[f][e]||(b[f][e]=0));var g=[],h=0,i="";for(e in b[0]){for(c=0,d=b.length;d>c;c++)g.push(b[c][e]);h++,i+=e}a._variables=i;var j=new Matrix(h,b.length);return j.set.apply(j,g),j},getConstantMatrix:function(){for(var a=this,b=[],c=0,d=parseInt(a.equations.length);d>c;c++)b[c]=a.equations[c].getConstant();var e=new Matrix(b.length,1);return e.set.apply(e,b),e}}),Matrix=metaCalc.createClass({initialize:function(a,b){var c=this;c._rows=metaCalc.utils.clamp(a,1),c._cols=metaCalc.utils.clamp(b,1),c._m=[];for(var d=0;d<c._rows;d++){c._m[d]=[];for(var e=0;e<c._cols;e++)c._m[d][e]=0}},add:function(a){var b=this;if(!b.sizeEquals(a))throw new Error(Matrix.errUnequalSizes);for(var c=0;c<b.rows();c++)for(var d=0;d<b.cols();d++)b.setElement(c,d,a.getElement(c,d)+b.getElement(c,d));return this},subtract:function(a){var b=this;return b.add(a.clone().negate())},multiply:function(a){var b=this;if(b.cols()!=a.rows())throw new Error(Matrix.errMultiply);var c=b.clone(),d=a;b.resize(c.rows(),d.cols());for(var e=0;e<d.cols();e++)for(var f=0;f<c.rows();f++){for(var g=0,h=0;h<d.rows();h++)g+=c.getElement(f,h)*d.getElement(h,e);b.setElement(f,e,g)}return this},negate:function(){var a=this;return a.scalarMultiply(-1)},transpose:function(){var a=this,b=a.clone();a.resize(a.cols(),a.rows());for(var c=0;c<a.rows();c++)for(var d=0;d<a.cols();d++)a.setElement(c,d,b.getElement(d,c));return this},minorMatrix:function(a,b){for(var c=this,d=new Matrix(c.rows()-1,c.cols()-1),e=[],f=0;f<c.rows();f++)for(var g=0;g<c.cols();g++)a!=f&&b!=g&&e.push(c.getElement(f,g));return d.set.apply(d,e),d},minor:function(a,b){var c=this;if(!c.isSquare())throw new Error(Matrix.errNotSquare1);return c.minorMatrix(a,b).determinant()},cofactor:function(a,b){var c=this;if(!c.isSquare())throw new Error(Matrix.errNotSquare2);return c.minor(a,b)*Math.pow(-1,a+b)},determinant:function(){var a=this;if(!a.isSquare())throw new Error(Matrix.errNotSquare3);if(1==a.rows())return a.getElement(0,0);for(var b=0,c=0;c<a.rows();c++)b+=a.getElement(0,c)*a.cofactor(0,c);return b},invert:function(){var a=this,b=Number(a.determinant());if(0==b)throw new Error(Matrix.errNotInvertible);return a.adjugate().scalarMultiply(1/a.determinant())},conjugate:function(){for(var a=this,b=new Matrix(a.rows(),a.cols()),c=[],d=0;d<a.rows();d++)for(var e=0;e<a.cols();e++)c.push(a.cofactor(d,e));return b.set.apply(b,c),b},adjugate:function(){var a=this;return a.conjugate().transpose()},clone:function(){var a=this,b=new Matrix(a.rows(),a.cols());return b.set.apply(b,a._m),b},scalarMultiply:function(a){for(var b=this,c=0;c<b.rows();c++)for(var d=0;d<b.cols();d++)b.setElement(c,d,a*b.getElement(c,d));return this},isInvertible:function(){var a=this;return 0!=a.determinant()},isSymmetric:function(){var a=this;return a.equals(a.clone().transpose())},isSkewSymmetric:function(){var a=this;return a.equals(a.clone().transpose().negate())},isSquare:function(){var a=this;return a.rows()==a.cols()},sizeEquals:function(a){var b=this;return a.rows()==b.rows()&&a.cols()==b.cols()},equals:function(a){var b=this;if(b.sizeEquals(a)){for(var c=0;c<b.rows();c++)for(var d=0;d<b.cols();d++)if(a.getElement(c,d)!=b.getElement(c,d))return!1;return!0}return!1},resize:function(a,b){var c=this,d=0,e=0,f=parseInt(a-c._rows),g=parseInt(b-c._cols);if(f>0)for(d=0;f>d;d++)for(c._m.push([]),e=0;e<c._cols+g;e++)c._m[d][e]=0;if(g>0)for(d=0;d<c._rows;d++)for(e=0;g>e;e++)c._m[d].push(0);if(0>f)for(d=0;d>f;d--)c._m.pop();if(0>g)for(d=0;a>d;d++)for(e=0;e>g;e--)c._m[d].pop();return c._rows=a,c._cols=b,this},setElement:function(a,b,c){var d=this;return d._m[metaCalc.utils.clamp(a,0,d._rows-1)][metaCalc.utils.clamp(b,0,d._cols-1)]=c,this},getElement:function(a,b){var c=this;return c._m[metaCalc.utils.clamp(a,0,c._rows-1)][metaCalc.utils.clamp(b,0,c._cols-1)]},set:function(){var a=this,b=[].slice.call(arguments,0);metaCalc.is(b[0],Array)&&(b=b.toString().split(","));var c=0,d=0,e=0;for(c=0;c<a._rows;c++)for(d=0;d<a._cols;d++)a.setElement(c,d,parseFloat(b[e++]));return this},get:function(){var a=this;return a._m.toString().split(",")},toString:function(){var a=this,b="",c=0,d=0;for(c=0;c<a._rows;c++){for(d=0;d<a._cols;d++)b+=a._m[c][d]+"	";b+="\n"}return b},rows:function(){return this._rows},cols:function(){return this._cols}});metaCalc.extendObject(Matrix,{errUnequalSizes:"Matrices with unequal sizes cannot be added/subtracted.",errMultiply:"Cols(A) must be equal to Rows(B) to multiply.",errNotSquare1:"Minors can only be calculated for square matrices.",errNotSquare2:"Cofactors can only be calculated for square matrices.",errNotSquare3:"Determinant can only be calculated for square matrices.",errNotInvertible:"Matrix is not invertible (since determinant = 0).",identity:function(a,b){for(var c=new Matrix(a,b),d=0;a>d;d++)for(var e=0;b>e;e++)d==e&&c.setElement(d,e,1);return c},scalar:function(a,b,c){return Matrix.identity(a,b).scalarMultiply(c)}}),metaCalc.extendObject(SystemOfEquations,{errLT2Equations:"Please enter at least two equations.",errNotSolvable1:"The given system of equations is not solvable. \n\nReason: Please enter N equations for N variables.",errNotSolvable2:"The given system of equations is not solvable. \n\nReason: Coeffiecient matrix is not invertible.",errSyntaxError:"There was an error evaluating one of the equations. The equations must be in the format Ax + By + ... = C."});var RawData=metaCalc.createClass({initialize:function(){this.cache=!0,this.cachedData={};var a=[].slice.call(arguments,0);this.data=a.sort(function(a,b){return a-b}),this.sort=!0},presetStats2:function(a,b,c){return this.cachedData={mean:a,standardErrorOfMean:b,count:c,minimum:a,maximum:a,sum:a*c,median:a,mode:a,sumOfSquares:Math.pow(Math.sqrt(c)*b,2)*(c-1),skewness:0/0,kurtosis:0/0},this},presetStats1:function(a,b,c){return this.cachedData={mean:a,standardDeviation:b,count:c,minimum:a,maximum:a,sum:a*c,median:a,mode:a,sumOfSquares:Math.pow(b,2)*(c-1),skewness:0/0,kurtosis:0/0},this},get:function(a){var b=this;if(a=metaCalc.utils.clamp(a,0,b.count()-1),Math.floor(a)==a)return this.data[a];var c=parseInt(Math.floor(a)),d=parseInt(Math.ceil(a));return this.data[c]+(a-c)*(this.data[d]-this.data[c])},add:function(){var a=this,b=[].slice.call(arguments,0);return this.data=this.data.concat(b),a.sort&&(this.data=this.data.sort(function(a,b){return a-b})),this},clear:function(){return this.data=[],this},clearCache:function(){return this.cachedData={},this},minimum:function(){return this.cache&&void 0!==this.cachedData.minimum?this.cachedData.minimum:this.cachedData.minimum=Math.min.apply(null,this.data)},maximum:function(){return this.cache&&void 0!==this.cachedData.maximum?this.cachedData.maximum:this.cachedData.maximum=Math.max.apply(null,this.data)},sum:function b(){var a=this;if(this.cache&&void 0!==this.cachedData.sum)return this.cachedData.sum;for(var b=0,c=0,d=parseInt(a.count());d>c;c++)b+=a.get(c);return this.cachedData.sum=b},count:function(){return this.cache&&void 0!==this.cachedData.count?this.cachedData.count:this.cachedData.count=this.data.length},mean:function(){var a=this;return this.cache&&void 0!==this.cachedData.mean?this.cachedData.mean:this.cachedData.mean=a.sum()/a.count()},median:function(){var a=this;return this.cache&&void 0!==this.cachedData.median?this.cachedData.median:this.cachedData.median=a.get((a.count()+1)/2-1)},mode:function(){var a=this;if(this.cache&&void 0!==this.cachedData.mode)return this.cachedData.mode;for(var b=[],c={},d=Number(-Number.MAX_VALUE),e=0;e<a.count();e++)c[a.get(e)]||(c[a.get(e)]=0),d=Math.max(d,++c[a.get(e)]);for(var f in c)c[f]==d&&b.push(f);return this.cachedData.mode=b},variance:function(){var a=this;return this.cache&&void 0!==this.cachedData.variance?this.cachedData.variance:this.cachedData.variance=a.sumOfSquares()/(a.count()-1)},standardDeviation:function(){var a=this;return this.cache&&void 0!==this.cachedData.standardDeviation?this.cachedData.standardDeviation:this.cachedData.standardDeviation=Math.sqrt(a.variance())},midrange:function(){var a=this;return this.cache&&void 0!==this.cachedData.midrange?this.cachedData.midrange:this.cachedData.midrange=a.minimum()/2+a.maximum()/2},quartile1:function(){var a=this;return this.cache&&void 0!==this.cachedData.quartile1?this.cachedData.quartile1:this.cachedData.quartile1=a.get((a.count()+1)/4-1)},quartile2:function(){var a=this;return this.cache&&void 0!==this.cachedData.quartile2?this.cachedData.quartile2:this.cachedData.quartile2=a.median()},quartile3:function(){var a=this;return this.cache&&void 0!==this.cachedData.quartile3?this.cachedData.quartile3:this.cachedData.quartile3=a.get(3*(a.count()+1)/4-1)},interquartileRange:function(){var a=this;return this.cache&&void 0!==this.cachedData.interquartileRange?this.cachedData.interquartileRange:this.cachedData.interquartileRange=a.quartile3()-a.quartile1()},sumOfSquares:function(){var a=this;if(this.cache&&void 0!==this.cachedData.sumOfSquares)return this.cachedData.sumOfSquares;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.count());e>d;d++)b+=Math.pow(a.get(d)-c,2);
return this.cachedData.sumOfSquares=b},meanDeviation:function(){var a=this;if(this.cache&&void 0!==this.cachedData.meanDeviation)return this.cachedData.meanDeviation;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.count());e>d;d++)b+=Math.abs(a.get(d)-c);return this.cachedData.meanDeviation=b/a.count()},rootMeanSquared:function(){var a=this;if(this.cache&&void 0!==this.cachedData.rootMeanSquared)return this.cachedData.rootMeanSquared;for(var b=0,c=0,d=parseInt(a.count());d>c;c++)b+=Math.pow(a.get(c),2);return this.cachedData.rootMeanSquared=Math.sqrt(b/a.count())},standardErrorOfMean:function(){var a=this;return this.cache&&void 0!==this.cachedData.standardErrorOfMean?this.cachedData.standardErrorOfMean:this.cachedData.standardErrorOfMean=a.standardDeviation()/Math.sqrt(a.count())},skewness:function(){var a=this;if(this.cache&&void 0!==this.cachedData.skewness)return this.cachedData.skewness;for(var b=0,c=0,d=parseInt(a.count());d>c;c++)b+=Math.pow(a.get(c)-a.mean(),3);return this.cachedData.skewness=b/(a.count()-1)/Math.pow(a.standardDeviation(),3)},kurtosis:function(){var a=this;if(this.cache&&void 0!==this.cachedData.kurtosis)return this.cachedData.kurtosis;for(var b=0,c=0,d=parseInt(a.count());d>c;c++)b+=Math.pow(a.get(c)-a.mean(),4);return this.cachedData.kurtosis=b/(a.count()-1)/Math.pow(a.standardDeviation(),4)},coefficientOfVariation:function(){var a=this;return this.cache&&void 0!==this.cachedData.coefficentOfVariation?this.cachedData.coefficientOfVariation:this.cachedData.coefficientOfVariation=a.standardDeviation()/a.mean()}}),GroupedData=metaCalc.createClass({initialize:function(){this.cache=!0,this.cachedData={};var a=this,b=[].slice.call(arguments,0);a.data=b.sortOn("x",function(a,b){return a-b})},get:function(a){var b=this;return a=metaCalc.utils.clamp(a,0,b.length()-1),b.data[a]},getrawx:function(a){var b=this;if(a=metaCalc.utils.clamp(a,0,b.count()-1),Math.floor(a)!=a){f=Math.floor(a);var c=parseInt(Math.ceil(a));return b.getrawx(f)+(a-f)*(b.getrawx(c)-b.getrawx(f))}for(var d=-1,e=0,f=parseInt(b.length());f>e;e++)if(d+=b.getf(e),d>=a)return b.getx(e);return 0},getx:function(a){var b=this;return b.get(a).x},getf:function(a){var b=this;return b.get(a).f},add:function(){var a=this,b=[].slice.call(arguments,0);return a.data=a.data.concat(b).sortOn("x",function(a,b){return a-b}),this},clear:function(){var a=this;return a.data=[],this},clearCache:function(){var a=this;return a.cachedData={},this},minimum:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.minimum,Number))return a.cachedData.minimum;for(var b=Number(Number.MAX_VALUE),c=0,d=parseInt(a.length());d>c;c++)b=Math.min(b,a.getx(c));return a.cachedData.minimum=b},maximum:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.maximum,Number))return a.cachedData.maximum;for(var b=Number(-Number.MAX_VALUE),c=0,d=parseInt(a.length());d>c;c++)b=Math.max(b,a.getx(c));return a.cachedData.maximum=b},sum:function c(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.sum,Number))return a.cachedData.sum;for(var c=0,b=0,d=parseInt(a.length());d>b;b++)c+=a.getx(b)*a.getf(b);return a.cachedData.sum=c},length:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.length,Number)?a.cachedData.length:a.cachedData.length=a.data.length},count:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.count,Number))return a.cachedData.count;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=a.getf(c);return a.cachedData.count=b},mean:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.mean,Number)?a.cachedData.mean:a.cachedData.mean=a.sum()/a.count()},median:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.median,Number)?a.cachedData.median:a.cachedData.median=a.getrawx((a.count()+1)/2-1)},mode:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.mode,Array))return a.cachedData.mode;for(var b=[],c={},d=Number(-Number.MAX_VALUE),e=0;e<a.length();e++)c[a.getx(e)]||(c[a.getx(e)]=0),d=Math.max(d,c[a.getx(e)]+=a.getf(e));for(var f in c)c[f]==d&&b.push(f);return a.cachedData.mode=b},variance:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.variance,Number))return a.cachedData.variance;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.variance=b/(a.count()-1)},standardDeviation:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.standardDeviation,Number)?a.cachedData.standardDeviation:a.cachedData.standardDeviation=Math.sqrt(a.variance())},midrange:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.midrange,Number)?a.cachedData.midrange:a.cachedData.midrange=a.minimum()/2+a.maximum()/2},quartile1:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.quartile1,Number)?a.cachedData.quartile1:a.cachedData.quartile1=a.getrawx((a.count()+1)/4-1)},quartile2:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.quartile2,Number)?a.cachedData.quartile2:a.cachedData.quartile2=a.median()},quartile3:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.quartile3,Number)?a.cachedData.quartile3:a.cachedData.quartile3=a.getrawx(3*(a.count()+1)/4-1)},interquartileRange:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.interquartileRange,Number)?a.cachedData.interquartileRange:a.cachedData.interquartileRange=a.quartile3()-a.quartile1()},sumOfSquares:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.sumOfSquares,Number))return a.cachedData.sumOfSquares;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.sumOfSquares=b},meanDeviation:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.meanDeviation,Number))return a.cachedData.meanDeviation;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.meanDeviation=b/a.count()},rootMeanSquared:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.rootMeanSquared,Number))return a.cachedData.rootMeanSquared;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c),2)*a.getf(c);return a.cachedData.rootMeanSquared=Math.sqrt(b/a.count())},standardErrorOfMean:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.standardErrorOfMean,Number)?a.cachedData.standardErrorOfMean:a.cachedData.standardErrorOfMean=a.standardDeviation()/Math.sqrt(a.count())},skewness:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.skewness,Number))return a.cachedData.skewness;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c)-a.mean(),3)*a.getf(c);return a.cachedData.skewness=Math.sqrt(b/(a.count()-1)/Math.pow(a.standardDeviation(),3))},kurtosis:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.kurtosis,Number))return a.cachedData.kurtosis;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c)-a.mean(),4)*a.getf(c);return a.cachedData.kurtosis=Math.sqrt(b/(a.count()-1)/Math.pow(a.standardDeviation(),4))},coefficientOfVariation:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.coefficentOfVariation,Number)?a.cachedData.coefficientOfVariation:a.cachedData.coefficientOfVariation=a.standardDeviation()/a.mean()}}),FrequencyDistribution=metaCalc.createClass({initialize:function(){this.cache=!0,this.cachedData={};var a=this,b=[].slice.call(arguments,0);a.data=b.sortOn("x",function(a,b){return a-b})},get:function(a){var b=this;return a=metaCalc.utils.clamp(a,0,b.length()-1),b.data[a]},getxa:function(a){var b=this;return b.get(a).xa},getxb:function(a){var b=this;return b.get(a).xb},getx:function(a){var b=this;return b.get(a).x},getf:function(a){var b=this;return b.get(a).f},add:function(){var a=this,b=[].slice.call(arguments,0);return a.data=a.data.concat(b).sortOn("x",function(a,b){return a-b}),this},clear:function(){var a=this;return a.data=[],this},clearCache:function(){var a=this;return a.cachedData={},this},minimum:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.minimum,Number))return a.cachedData.minimum;for(var b=Number(Number.MAX_VALUE),c=0,d=parseInt(a.length());d>c;c++)b=Math.min(b,a.getxa(c),a.getxb(c));return a.cachedData.minimum=b},maximum:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.maximum,Number))return a.cachedData.maximum;for(var b=Number(-Number.MAX_VALUE),c=0,d=parseInt(a.length());d>c;c++)b=Math.max(b,a.getxa(c),a.getxb(c));return a.cachedData.maximum=b},sum:function d(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.sum,Number))return a.cachedData.sum;for(var d=0,b=0,c=parseInt(a.length());c>b;b++)d+=a.getx(b)*a.getf(b);return a.cachedData.sum=d},length:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.length,Number)?a.cachedData.length:a.cachedData.length=a.data.length},count:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.count,Number))return a.cachedData.count;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=a.getf(c);return a.cachedData.count=b},mean:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.mean,Number)?a.cachedData.mean:a.cachedData.mean=a.sum()/a.count()},median:function(){for(var a=this,b=0,c=0;c<a.length();c++)if(b+=a.getf(c),b>=a.count()/2)return a.getxa(c)+(a.count()/2-b+a.getf(c))/a.getf(c)*(a.getxb(c)-a.getxa(c));return 0/0},mode:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.mode,Array))return a.cachedData.mode;for(var b=[],c={},d=Number(-Number.MAX_VALUE),e=0;e<a.length();e++)c[a.getx(e)]||(c[a.getx(e)]=0),d=Math.max(d,c[a.getx(e)]+=a.getf(e));for(var f in c)c[f]==d&&b.push(f);return a.cachedData.mode=b},variance:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.variance,Number))return a.cachedData.variance;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.variation=b/(a.count()-1)},standardDeviation:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.standardDeviation,Number)?a.cachedData.standardDeviation:a.cachedData.standardDeviation=Math.sqrt(a.variance())},midrange:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.midrange,Number)?a.cachedData.midrange:a.cachedData.midrange=a.minimum()/2+a.maximum()/2},quartile1:function(){for(var a=this,b=0,c=0;c<a.length();c++)if(b+=a.getf(c),b>=a.count()/4)return a.getxa(c)+(a.count()/4-b+a.getf(c))/a.getf(c)*(a.getxb(c)-a.getxa(c));return 0/0},quartile2:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.quartile2,Number)?a.cachedData.quartile2:a.cachedData.quartile2=a.median()},quartile3:function(){for(var a=this,b=0,c=0;c<a.length();c++)if(b+=a.getf(c),b>=3*a.count()/4)return a.getxa(c)+(3*a.count()/4-b+a.getf(c))/a.getf(c)*(a.getxb(c)-a.getxa(c));return 0/0},interquartileRange:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.interquartileRange,Number)?a.cachedData.interquartileRange:a.cachedData.interquartileRange=a.quartile3()-a.quartile1()},sumOfSquares:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.sumOfSquares,Number))return a.cachedData.sumOfSquares;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.sumOfSquares=b},meanDeviation:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.meanDeviation,Number))return a.cachedData.meanDeviation;for(var b=0,c=Number(a.mean()),d=0,e=parseInt(a.length());e>d;d++)b+=Math.pow(a.getx(d)-c,2)*a.getf(d);return a.cachedData.meanDeviation=b/a.count()},rootMeanSquared:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.rootMeanSquared,Number))return a.cachedData.rootMeanSquared;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c),2)*a.getf(c);return a.cachedData.rootMeanSquared=Math.sqrt(b/a.count())},standardErrorOfMean:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.standardErrorOfMean,Number)?a.cachedData.standardErrorOfMean:a.cachedData.standardErrorOfMean=a.standardDeviation()/Math.sqrt(a.count())},skewness:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.skewness,Number))return a.cachedData.skewness;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c)-a.mean(),3)*a.getf(c);return a.cachedData.skewness=Math.sqrt(b/(a.count()-1)/Math.pow(a.standardDeviation(),3))},kurtosis:function(){var a=this;if(a.cache&&metaCalc.is(a.cachedData.kurtosis,Number))return a.cachedData.kurtosis;for(var b=0,c=0,d=parseInt(a.length());d>c;c++)b+=Math.pow(a.getx(c)-a.mean(),4)*a.getf(c);return a.cachedData.kurtosis=Math.sqrt(b/(a.count()-1)/Math.pow(a.standardDeviation(),4))},coefficientOfVariation:function(){var a=this;return a.cache&&metaCalc.is(a.cachedData.coefficentOfVariation,Number)?a.cachedData.coefficientOfVariation:a.cachedData.coefficientOfVariation=a.standardDeviation()/a.mean()}}),RegressionCurve=metaCalc.createClass({initialize:function(a,b,c){this.type=RegressionCurve.LINEAR;var d=this;this.type=a,this.sx=this.sx2=this.sxy=this.sy=this.n=this.x=this.y=this.a=this.b=this.corelationCoeff=this.determinationCoeff=0/0,this.equation=null,this.formattedEquation=null,d.data(b,c)},data:function(a,b){var c=this,d=0;if(this.x=a,this.y=b,c.n=Math.min(a.length,b.length),c.sxy=c.sx=c.sx2=c.sy=c.sy2=0,c.type==RegressionCurve.LINEAR){if(c.n<2)throw new Error(RegressionCurve.errLT2Points);for(d=0;d<c.n;d++)c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d];c.b=(c.n*c.sxy-c.sx*c.sy)/(c.n*c.sx2-c.sx*c.sx),c.a=(c.sy-c.b*c.sx)/c.n,c.equation="y = "+c.a+" + "+c.b+" * x",c.formattedEquation="y = "+Math.round(1e4*c.a)/1e4+" + "+Math.round(1e4*c.b)/1e4+" x"}else if(c.type==RegressionCurve.LOGARITHMIC||c.type==RegressionCurve.NATURAL_LOGARITHMIC){if(c.n<2)throw new Error(RegressionCurve.errLT2Points);for(d=0;d<c.n;d++){if(a[d]<0)throw new Error(RegressionCurve.errNegative.replace("%f",d+1).replace("%f",a[d]));a[d]=c.type==RegressionCurve.LOGARITHMIC?Math.log(a[d])/Math.log(10):Math.log(a[d]),c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d]}c.b=(c.n*c.sxy-c.sx*c.sy)/(c.n*c.sx2-c.sx*c.sx),c.a=(c.sy-c.b*c.sx)/c.n,c.type==RegressionCurve.LOGARITHMIC?(c.equation="y = "+c.a+" + "+c.b+" * log(x)",c.formattedEquation="y = "+Math.round(1e4*c.a)/1e4+" + "+Math.round(1e4*c.b)/1e4+" log(x)"):(c.equation="y = "+c.a+" + "+c.b+" * ln(x)",c.formattedEquation="y = "+Math.round(1e4*c.a)/1e4+" + "+Math.round(1e4*c.b)/1e4+" ln(x)")}else if(c.type==RegressionCurve.POWER){if(c.n<2)throw new Error(RegressionCurve.errLT2Points);for(d=0;d<c.n;d++){if(a[d]<0)throw new Error(RegressionCurve.errNegative.replace("%f",d+1).replace("%f",a[d]));if(b[d]<0)throw new Error(RegressionCurve.errNegative.replace("%f",d+1).replace("%f",a[d]));a[d]=Math.log(a[d]),b[d]=Math.log(b[d]),c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d]}c.b=(c.n*c.sxy-c.sx*c.sy)/(c.n*c.sx2-c.sx*c.sx),c.a=(c.sy-c.b*c.sx)/c.n,c.a=Math.exp(c.a),c.equation="y = "+c.a+" * x ^ "+c.b,c.formattedEquation="y = "+Math.round(1e4*c.a)/1e4+" * x ^"+Math.round(1e4*c.b)/1e4}else if(c.type==RegressionCurve.EXPONENTIAL){if(c.n<2)throw new Error(RegressionCurve.errLT2Points);for(d=0;d<c.n;d++){if(b[d]<0)throw new Error(RegressionCurve.errNegative.replace("%f",d+1).replace("%f",a[d]));b[d]=Math.log(b[d]),c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d]}c.b=(c.n*c.sxy-c.sx*c.sy)/(c.n*c.sx2-c.sx*c.sx),c.a=(c.sy-c.b*c.sx)/c.n,c.b=Math.exp(c.b),c.a=Math.exp(c.a),c.equation="y = "+c.a+" * "+c.b+" ^ x",c.formattedEquation="y = "+Math.round(1e4*c.a)/1e4+" * "+Math.round(1e4*c.b)/1e4+" ^ x"}else if(c.type==RegressionCurve.QUADRATIC){for(d=0;d<c.n;d++)c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d];if(c.n<3)throw new Error(RegressionCurve.errLT3Points);var e=[],f=[];for(d=0;d<c.n;d++)e.push(1,a[d],Math.pow(a[d],2)),f.push(b[d]);var g=new Matrix(c.n,3),h=new Matrix(c.n,1);g.set(e),h.set(f);var i=g.clone().transpose(),j=i.clone().multiply(g).invert().multiply(i).multiply(h).get();c.equation="y = "+j[0]+" + "+j[1]+" * x + "+j[2]+" * x ^ 2",c.formattedEquation="y = "+Math.round(1e4*j[0])/1e4+" + "+Math.round(1e4*j[1])/1e4+" x + "+Math.round(1e4*j[2])/1e4+" x²"}else{if(c.type!=RegressionCurve.CUBIC)throw new Error(RegressionCurve.errInvalidRegressionType);for(d=0;d<c.n;d++)c.sx+=a[d],c.sy+=b[d],c.sx2+=a[d]*a[d],c.sy2+=b[d]*b[d],c.sxy+=a[d]*b[d];if(c.n<4)throw new Error(RegressionCurve.errLT4Points);for(e=[],f=[],d=0;d<c.n;d++)e.push(1,a[d],Math.pow(a[d],2),Math.pow(a[d],3)),f.push(b[d]);g=new Matrix(c.n,4),h=new Matrix(c.n,1),g.set(e),h.set(f),i=g.clone().transpose(),j=i.clone().multiply(g).invert().multiply(i).multiply(h).get(),c.equation="y = "+j[0]+" + "+j[1]+" * x + "+j[2]+" * x ^ 2 + "+j[3]+" * x ^ 3",c.formattedEquation="y = "+Math.round(1e4*j[0])/1e4+" + "+Math.round(1e4*j[1])/1e4+" x + "+Math.round(1e4*j[2])/1e4+" x² + "+Math.round(1e4*j[3])/1e4+" x³"}return c.formattedEquation=c.formattedEquation.replace(/\+ *\-/g,"-").replace(/\-/g,"– "),c.corelationCoeff=(c.n*c.sxy-c.sx*c.sy)/Math.sqrt((c.n*c.sx2-c.sx*c.sx)*(c.n*c.sy2-c.sy*c.sy)),c.determinationCoeff=Math.pow(c.corelationCoeff,2),this}});metaCalc.extendObject(RegressionCurve,{LINEAR:"linear",QUADRATIC:"quadratic",CUBIC:"cubic",EXPONENTIAL:"exponential",POWER:"power",LOGARITHMIC:"logarithmic",NATURAL_LOGARITHMIC:"naturalLogarithmic",errLT2Points:"Please introduce at least 2 points.",errLT3Points:"Please introduce at least 3 points.",errLT4Points:"Please introduce at least 4 points.",errNegative:"Please replace x(%f) = %f with a positive value.",errInvalidRegressionType:"Invalid Regression Type Selected."});var OneSidedConfidenceInterval={PERCENT_75:75,PERCENT_80:80,PERCENT_85:85,PERCENT_90:90,PERCENT_95:95,PERCENT_97_5:97.5,PERCENT_99:99,PERCENT_99_5:99.5,PERCENT_99_75:99.75,PERCENT_99_9:99.9,PERCENT_99_95:99.95},PValueType={ONE_SIDED:"One Sided",TWO_SIDED:"Two Sided"};TwoSidedConfidenceInterval={PERCENT_50:50,PERCENT_60:60,PERCENT_70:70,PERCENT_80:80,PERCENT_90:90,PERCENT_95:95,PERCENT_98:98,PERCENT_99:99,PERCENT_99_5:99.5,PERCENT_99_8:99.8,PERCENT_99_9:99.9};var TDistributionTable={ONE_SIDED:"One Sided",TWO_SIDED:"Two Sided",table:{"One Sided":[75,80,85,90,95,97.5,99,99.5,99.75,99.9,99.95],"Two Sided":[50,60,70,80,90,95,98,99,99.5,99.8,99.9],1:[1,1.376,1.963,3.078,6.314,12.71,31.82,63.66,127.3,318.3,636.6],2:[.816,1.061,1.386,1.886,2.92,4.303,6.965,9.925,14.09,22.33,31.6],3:[.765,.978,1.25,1.638,2.353,3.182,4.541,5.841,7.453,10.21,12.92],4:[.741,.941,1.19,1.533,2.132,2.776,3.747,4.604,5.598,7.173,8.61],5:[.727,.92,1.156,1.476,2.015,2.571,3.365,4.032,4.773,5.893,6.869],6:[.718,.906,1.134,1.44,1.943,2.447,3.143,3.707,4.317,5.208,5.959],7:[.711,.896,1.119,1.415,1.895,2.365,2.998,3.499,4.029,4.785,5.408],8:[.706,.889,1.108,1.397,1.86,2.306,2.896,3.355,3.833,4.501,5.041],9:[.703,.883,1.1,1.383,1.833,2.262,2.821,3.25,3.69,4.297,4.781],10:[.7,.879,1.093,1.372,1.812,2.228,2.764,3.169,3.581,4.144,4.587],11:[.697,.876,1.088,1.363,1.796,2.201,2.718,3.106,3.497,4.025,4.437],12:[.695,.873,1.083,1.356,1.782,2.179,2.681,3.055,3.428,3.93,4.318],13:[.694,.87,1.079,1.35,1.771,2.16,2.65,3.012,3.372,3.852,4.221],14:[.692,.868,1.076,1.345,1.761,2.145,2.624,2.977,3.326,3.787,4.14],15:[.691,.866,1.074,1.341,1.753,2.131,2.602,2.947,3.286,3.733,4.073],16:[.69,.865,1.071,1.337,1.746,2.12,2.583,2.921,3.252,3.686,4.015],17:[.689,.863,1.069,1.333,1.74,2.11,2.567,2.898,3.222,3.646,3.965],18:[.688,.862,1.067,1.33,1.734,2.101,2.552,2.878,3.197,3.61,3.922],19:[.688,.861,1.066,1.328,1.729,2.093,2.539,2.861,3.174,3.579,3.883],20:[.687,.86,1.064,1.325,1.725,2.086,2.528,2.845,3.153,3.552,3.85],21:[.686,.859,1.063,1.323,1.721,2.08,2.518,2.831,3.135,3.527,3.819],22:[.686,.858,1.061,1.321,1.717,2.074,2.508,2.819,3.119,3.505,3.792],23:[.685,.858,1.06,1.319,1.714,2.069,2.5,2.807,3.104,3.485,3.767],24:[.685,.857,1.059,1.318,1.711,2.064,2.492,2.797,3.091,3.467,3.745],25:[.684,.856,1.058,1.316,1.708,2.06,2.485,2.787,3.078,3.45,3.725],26:[.684,.856,1.058,1.315,1.706,2.056,2.479,2.779,3.067,3.435,3.707],27:[.684,.855,1.057,1.314,1.703,2.052,2.473,2.771,3.057,3.421,3.69],28:[.683,.855,1.056,1.313,1.701,2.048,2.467,2.763,3.047,3.408,3.674],29:[.683,.854,1.055,1.311,1.699,2.045,2.462,2.756,3.038,3.396,3.659],30:[.683,.854,1.055,1.31,1.697,2.042,2.457,2.75,3.03,3.385,3.646],40:[.681,.851,1.05,1.303,1.684,2.021,2.423,2.704,2.971,3.307,3.551],50:[.679,.849,1.047,1.299,1.676,2.009,2.403,2.678,2.937,3.261,3.496],60:[.679,.848,1.045,1.296,1.671,2,2.39,2.66,2.915,3.232,3.46],80:[.678,.846,1.043,1.292,1.664,1.99,2.374,2.639,2.887,3.195,3.416],120:[.677,.845,1.041,1.289,1.658,1.98,2.358,2.617,2.86,3.16,3.373],Infinity:[.674,.842,1.036,1.282,1.645,1.96,2.326,2.576,2.807,3.09,3.291]},find:function(a,b,c){if(!metaCalc.is(TDistributionTable.table[c.toString()],Array)||!/^(One|Two) Sided$/i.test(a))return 0/0;for(var d=0;d<TDistributionTable.table[a].length;d++)if(b==TDistributionTable.table[a][d])var e=parseInt(d);return TDistributionTable.table[c.toString()][e]||0/0}},OneSampleTTest=metaCalc.createClass({initialize:function(a,b){var c=this;c.sample=null,c.hypothesizedMean=0/0,arguments.length<2&&(b=0),arguments.length<1&&(a=null),c.sample=a?a:new RawData,c.hypothesizedMean=b},meanDifference:function(){var a=this;return a.sample.mean()-a.hypothesizedMean},tValue:function(){var a=this;return(a.sample.mean()-a.hypothesizedMean)/a.sample.standardErrorOfMean()},pValue:function(){var a=this,b=Number(1-a.erfc(a.tValue()));return.5>b&&(b*=2),b},df:function(){var a=this;return a.sample.count()-1},confidenceRange:function(a,b){var c=this,d=Number(this.df());d=30>=d?Math.round(d):60>=d?10*Math.round(d/10):130>=d?20*Math.round(d/20):1/0;var e=Number(TDistributionTable.find(a,b,d));return{upperLimit:e*c.sample.standardErrorOfMean()+(c.sample.mean()-c.hypothesizedMean),lowerLimit:c.sample.mean()-c.hypothesizedMean-e*c.sample.standardErrorOfMean()}},erfc:function(a){var b=0/0,c=0/0,d=0/0,e=0/0;return e=a/Math.sqrt(2),b=3.97886080735226/(Math.abs(e)+3.97886080735226),c=b-.5,d=(((((((((.00127109764952614*c+.000119314022838341)*c-.00396385097360514)*c-.000870779635317296)*c+.00773672528313527)*c+.00383335126264887)*c-.0127223813782123)*c-.013382364453346)*c+.0161315329733252)*c+.0390976845588484)*c+.00249367200053503,d=((((((((((((d*c-.0838864557023002)*c-.119463959964325)*c+.0166207924969367)*c+.357524274449531)*c+.805276408752911)*c+1.18902982909273)*c+1.37040217682338)*c+1.31314653831023)*c+1.07925515155857)*c+.774368199119539)*c+.490165080585318)*c+.275374741597377)*b*Math.exp(-e*e),0>e?d-1:1-d},standardErrorOfDifference:function(){var a=this;return a.sample.standardErrorOfMean()}}),TwoSamplePairedTTest=metaCalc.createClass({initialize:function(a,b){var c=this;arguments.length<2&&(b=null),arguments.length<1&&(a=null),c.sample1=null,c.sample2=null,c._difference=null,c.sample1=a?a:new RawData,c.sample2=b?b:new RawData},meanDifference:function(){var a=this;return a.difference().mean()},tValue:function(){var a=this;return Math.abs(a.difference().mean())/a.standardErrorOfDifference()},pValue:function(){var a=this,b=Number(1-a.erfc(a.tValue()));return.5>b&&(b*=2),b},confidenceRange:function(a,b){var c=this,d=Number(this.df());d=30>=d?Math.round(d):60>=d?10*Math.round(d/10):120>=d?20*Math.round(d/20):1/0;var e=Number(TDistributionTable.find(a,b,d));return{upperLimit:e*c.standardErrorOfDifference()+c.difference().mean(),lowerLimit:c.difference().mean()-e*c.standardErrorOfDifference()}},df:function(){var a=this;return a.difference().count()-1},erfc:function(a){var b=0/0,c=0/0,d=0/0,e=0/0;return e=a/Math.sqrt(2),b=3.97886080735226/(Math.abs(e)+3.97886080735226),c=b-.5,d=(((((((((.00127109764952614*c+.000119314022838341)*c-.00396385097360514)*c-.000870779635317296)*c+.00773672528313527)*c+.00383335126264887)*c-.0127223813782123)*c-.013382364453346)*c+.0161315329733252)*c+.0390976845588484)*c+.00249367200053503,d=((((((((((((d*c-.0838864557023002)*c-.119463959964325)*c+.0166207924969367)*c+.357524274449531)*c+.805276408752911)*c+1.18902982909273)*c+1.37040217682338)*c+1.31314653831023)*c+1.07925515155857)*c+.774368199119539)*c+.490165080585318)*c+.275374741597377)*b*Math.exp(-e*e),0>e?d-1:1-d},standardErrorOfDifference:function(){var a=this;return Math.sqrt(a.difference().sumOfSquares()/a.difference().count()/a.df())},difference:function(){var a=this;if(a._difference)return a._difference;a._difference=new RawData;for(var b=0,c=parseInt(Math.min(a.sample1.count(),a.sample2.count()));c>b;b++)a._difference.add(a.sample1.get(b)-a.sample2.get(b));return a._difference}}),TwoSampleUnpairedTTest=metaCalc.createClass({initialize:function(a,b){var c=this;c.sample1=null,c.sample2=null,arguments.length<2&&(b=null),arguments.length<1&&(a=null),c.sample1=a?a:new RawData,c.sample2=b?b:new RawData},meanDifference:function(){var a=this;return a.sample1.mean()-a.sample2.mean()},tValue:function(){var a=this;return Math.abs(a.meanDifference())/a.standardErrorOfDifference()},pValue:function(){var a=this,b=Number(1-a.erfc(a.tValue()));return.5>b&&(b*=2),b},confidenceRange:function(a,b){var c=this,d=Number(this.df());d=30>=d?Math.round(d):60>=d?10*Math.round(d/10):120>=d?20*Math.round(d/20):1/0;var e=Number(c.standardErrorOfDifference()),f=Number(TDistributionTable.find(a,b,d));return{upperLimit:f*e+c.meanDifference(),lowerLimit:c.meanDifference()-f*e}},df:function(){var a=this,b=Number(a.sample1.count()),c=Number(a.sample2.count());return b==c?b-1+c-1:Math.sqrt((b*b+c*c)/2)},erfc:function(a){var b=0/0,c=0/0,d=0/0,e=0/0;return e=a/Math.sqrt(2),b=3.97886080735226/(Math.abs(e)+3.97886080735226),c=b-.5,d=(((((((((.00127109764952614*c+.000119314022838341)*c-.00396385097360514)*c-.000870779635317296)*c+.00773672528313527)*c+.00383335126264887)*c-.0127223813782123)*c-.013382364453346)*c+.0161315329733252)*c+.0390976845588484)*c+.00249367200053503,d=((((((((((((d*c-.0838864557023002)*c-.119463959964325)*c+.0166207924969367)*c+.357524274449531)*c+.805276408752911)*c+1.18902982909273)*c+1.37040217682338)*c+1.31314653831023)*c+1.07925515155857)*c+.774368199119539)*c+.490165080585318)*c+.275374741597377)*b*Math.exp(-e*e),0>e?d-1:1-d},standardErrorOfDifference:function(){var a=this,b=Number(a.sample1.standardErrorOfMean()),c=Number(a.sample2.standardErrorOfMean());return Math.sqrt(b*b+c*c)}}),CompiledObject=metaCalc.createClass({initialize:function(){this.PolishArray=[],this.errorMes="",this.errorStatus=0}}),RangeParser=metaCalc.createClass("RangeParser",{initialize:function(){},parseRangeFour:function(a,b,c,d){var e,f,g=this,h=0,i=new RangeObject,j=new MathParser([]);for(e=[a,b,c,d],h=0;4>h;h++){if(0==e[h].length)return i.errorStatus=1,i.errorMes=RangeParser.errCheckVariablesRanges,i.Values=[],i;if(e[h]=e[h].toLowerCase(),f=j.doCompile(e[h]),1==f.errorStatus)return i.errorStatus=1,i.errorMes=RangeParser.errCheckVariablesRanges,i.Values=[],i;if(i.Values[h]=j.doEval(f.PolishArray,[]),g.isNotLegal(i.Values[h]))return i.errorStatus=1,i.errorMes=RangeParser.errCheckVariablesRanges,i.Values=[],i}return i.Values[0]>=i.Values[1]||i.Values[2]>=i.Values[3]?(i.errorStatus=1,i.errorMes=RangeParser.errCheckVariablesRanges,i.Values=[],i):(i.errorStatus=0,i.errorMes="",i)},parseRangeTwo:function(a,b){var c,d,e=this,f=0,g=new RangeObject,h=new MathParser([]);for(c=[a,b],f=0;2>f;f++){if(0==c[f].length)return g.errorStatus=1,g.errorMes=RangeParser.errCheckVariablesRanges,g.Values=[],g;if(c[f]=c[f].toLowerCase(),d=h.doCompile(c[f]),1==d.errorStatus)return g.errorStatus=1,g.errorMes=RangeParser.errCheckVariablesRanges,g.Values=[],g;if(g.Values[f]=h.doEval(d.PolishArray,[]),e.isNotLegal(g.Values[f]))return g.errorStatus=1,g.errorMes=RangeParser.errCheckVariablesRanges,g.Values=[],g}return g.Values[0]>=g.Values[1]?(g.errorStatus=1,g.errorMes=RangeParser.errCheckVariablesRanges,g.Values=[],g):(g.errorStatus=0,g.errorMes="",g)},isNotLegal:function(a){return"number"!=typeof a||isNaN(a)||!isFinite(a)?!0:!1}});metaCalc.extendObject(RangeParser,{errCheckVariablesRanges:"Check your variables ranges."});var MathParser=metaCalc.createClass({initialize:function(a){this.DECIMALPLACES=15,this.RAD2DEG=Number(180/Math.PI),this.DEG2RAD=Number(Math.PI/180),this.MOREISINFINITE=Math.pow(2,52),this.LESSISINFINITE=-Math.pow(2,52),this.MINDIFERENCE=1e-11,this.f1Array=["asinhg","acoshg","atanhg","acschg","acosechg","asechg","acothg","asinhd","acoshd","atanhd","acschd","acosechd","asechd","acothd","asind","acosd","atand","acscd","acosecd","asecd","acotd","asinh","acosh","atanh","acsch","acosech","asech","acoth","asing","acosg","atang","acscg","acosecg","asecg","acotg","asin","acos","atan","acsc","acosec","asec","acot","sinhg","coshg","tanhg","cschg","cosechg","sechg","cothg","sinhd","coshd","tanhd","cschd","cosechd","sechd","cothd","sinh","cosh","tanh","csch","cosech","sech","coth","sind","cosd","tand","cscd","cosecd","secd","cotd","sing","cosg","tang","cscg","cosecg","secg","cotg","sin","cos","tan","csc","cosec","sec","cot","pow2","pow3","pow10x","exp","log2","log10","logtwo","logten","ln","log","fac","root3","abs","ceil","floor","round","random","sqrt"],this.f2Array=["plus","minus","mul","div","pow","root","npr","ncr","logn"],this.fNArray=["max","min","lcm","gcd"];var b=this;this.aVarNames=0==a.length?[]:b.setVars(a),this.iserror=0,this.errorMes="",this.nums="0123456789.",this.lets="abcdefghijklmnopqrstuwvxzy",this.opers="^*+-/(),|",b.toRound=function(a){if(!isNaN(a)&&isFinite(a)){if(a>b.MOREISINFINITE)return 1/0;if(a<b.LESSISINFINITE)return-1/0;var c=Math.round(a);if(Math.abs(c-a)<b.MINDIFERENCE)return Number(c.toFixed(b.DECIMALPLACES))}return a},b.toDeg=function(a){return b.toRound(a*b.RAD2DEG)},b.toRad=function(a){return b.toRound(a*b.DEG2RAD)};var c=b.functions={sin:function(a){return b.toRound(Math.sin(a))},cos:function(a){return b.toRound(Math.cos(a))},tan:function(a){return b.toRound(Math.tan(a))},csc:function(a){return b.toRound(1/b.ctx.sin(a))},cosec:function(a){return b.toRound(1/b.ctx.sin(a))},sec:function(a){return b.toRound(1/b.ctx.cos(a))},cot:function(a){return b.toRound(1/b.ctx.tan(a))},sind:function(a){return b.ctx.sin(a*b.DEG2RAD)},cosd:function(a){return b.ctx.cos(a*b.DEG2RAD)},tand:function(a){return b.ctx.tan(a*b.DEG2RAD)},cscd:function(a){return b.ctx.csc(a*b.DEG2RAD)},cosecd:function(a){return b.ctx.cosec(a*b.DEG2RAD)},secd:function(a){return b.ctx.sec(a*b.DEG2RAD)},cotd:function(a){return b.ctx.cot(a*b.DEG2RAD)},asin:function(a){return b.toRound(Math.asin(a))},acos:function(a){return b.toRound(Math.acos(a))},atan:function(a){return b.toRound(Math.atan(a))},acsc:function(a){return b.ctx.asin(1/a)},acosec:function(a){return b.ctx.asin(1/a)},asec:function(a){return b.ctx.acos(1/a)},acot:function(a){return b.ctx.atan(1/a)},asind:function(a){return b.toDeg(b.ctx.asin(a))},acosd:function(a){return b.toDeg(b.ctx.acos(a))},atand:function(a){return b.toDeg(b.ctx.atan(a))},acscd:function(a){return b.toDeg(b.ctx.acsc(a))},acosecd:function(a){return b.toDeg(b.ctx.acosec(a))},asecd:function(a){return b.toDeg(b.ctx.asec(a))},acotd:function(a){return b.toDeg(b.ctx.acot(a))},sinh:function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh:function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh:function(a){return b.ctx.sinh(a)/b.ctx.cosh(a)},csch:function(a){return 1/b.ctx.sinh(a)},cosech:function(a){return 1/b.ctx.sinh(a)},sech:function(a){return 1/b.ctx.cosh(a)},coth:function(a){return 1/b.ctx.tanh(a)},sinhd:function(a){return b.ctx.sinh(a*b.DEG2RAD)},coshd:function(a){return b.ctx.cosh(a*b.DEG2RAD)},tanhd:function(a){return b.ctx.tanh(a*b.DEG2RAD)},cschd:function(a){return b.ctx.csch(a*b.DEG2RAD)},cosechd:function(a){return b.ctx.cosech(a*b.DEG2RAD)},sechd:function(a){return b.ctx.sech(a*b.DEG2RAD)},cothd:function(a){return b.ctx.coth(a*b.DEG2RAD)},asinh:function(a){return Math.log(a+Math.sqrt(a*a+1))},acosh:function(a){return Math.log(a+Math.sqrt(a*a-1))},atanh:function(a){return.5*Math.log((1+a)/(1-a))},acsch:function(a){return b.ctx.asinh(1/a)},acosech:function(a){return b.ctx.asinh(1/a)},asech:function(a){return b.ctx.acosh(1/a)},acoth:function(a){return b.ctx.atanh(1/a)},asinhd:function(a){return b.ctx.asinh(a)*b.RAD2DEG},acoshd:function(a){return b.ctx.acosh(a)*b.RAD2DEG
},atanhd:function(a){return b.ctx.atanh(a)*b.RAD2DEG},acschd:function(a){return b.ctx.acsch(a)*b.RAD2DEG},acosechd:function(a){return b.ctx.acosech(a)*b.RAD2DEG},asechd:function(a){return b.ctx.asech(a)*b.RAD2DEG},acothd:function(a){return b.ctx.acoth(a)*b.RAD2DEG},pow:Math.pow,pow2:function(a){return Math.pow(a,2)},pow3:function(a){return Math.pow(a,3)},pow10x:function(a){return Math.pow(10,a)},exp:Math.exp,pi:Math.PI,sqrt:function(a,b){return arguments.length<2&&(b=2),Math.pow(a,1/b)},root3:function(a){return Math.pow(a,1/3)},root:function(a,b){return Math.pow(a,1/b)},log2:function(a){return b.toRound(Math.log(a)*Math.LOG2E)},log10:function(a){return b.toRound(Math.log(a)*Math.LOG10E)},logtwo:function(a){return b.toRound(Math.log(a)*Math.LOG2E)},logten:function(a){return b.toRound(Math.log(a)*Math.LOG10E)},ln:Math.log,log:Math.log,logn:function(a,b){return Math.log(b)/Math.log(a)},e:Math.E,fac:function(a){return 1>=a?a:c.fac(a-1)*a},npr:function(a,b){return c.fac(a)/c.fac(b)},ncr:function(a,b){return c.fac(a)/c.fac(b)/c.fac(a-b)},gcd:b._gcd,lcm:b._lcm,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,random:Math.random,round:Math.round,plus:function(a,b){return a+b},minus:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){return a/b}}},setVars:function(a){var b=[],c=0/0;for(c=0;c<a.length;c++)"string"!=typeof a[c]&&console.log("All variables must be entered as strings into MathParser constructor. Don't forget quotation marks."),b[c]=a[c].toLowerCase();return b},doCompile:function(a){var b=this;a=a.replace(/log2/g,"logtwo"),a=a.replace(/log10/g,"logten");var c=new CompiledObject,d=null,e=null,f=[];return b.iserror=0,b.errorMes="",d=b.whiteSpaces(a),""==d?(c.PolishArray=[],c.errorMes="",c.errorStatus=0,c):(b.checkLegal(d),1==b.iserror?(c.PolishArray=[],c.errorMes=b.errorMes,c.errorStatus=1,c):(b.checkPars(d),1==b.iserror?(c.PolishArray=[],c.errorMes=b.errorMes,c.errorStatus=1,c):(b.checkToks(d),1==b.iserror?(c.PolishArray=[],c.errorMes=b.errorMes,c.errorStatus=1,c):(e=b.conOper(b.conOper(b.conOper(b.conOper(b.conUnary(b.conCaret(d)),"/"),"*"),"-"),"+"),1==b.iserror?(c.PolishArray=[],c.errorMes=b.errorMes,c.errorStatus=1,c):(f=b.makeStack(e),1==b.iserror?(c.PolishArray=[],c.errorMes=b.errorMes,c.errorStatus=1,c):(c.PolishArray=f,c.errorMes="",c.errorStatus=0,c))))))},istokf1:function(a){var b=this,c=0/0;for(c=0;c<b.f1Array.length;c++)if(a==b.f1Array[c])return!0;return!1},isVar:function(a){var b=this,c=0/0;for(c=0;c<b.aVarNames.length;c++)if(a==b.aVarNames[c])return!0;return!1},istokf2:function(a){var b=this,c=0/0;for(c=0;c<b.f2Array.length;c++)if(a==b.f2Array[c])return!0;return!1},istokfN:function(a){var b=this,c=0/0;for(c=0;c<b.fNArray.length;c++)if(a==b.fNArray[c])return!0;return!1},isLet:function(a){var b=this;return b.lets.indexOf(a)>=0},isOper:function(a){var b=this;return b.opers.indexOf(a)>=0},isNum:function(a){var b=this;return b.nums.indexOf(a)>=0},setToken:function(a,b,c){var d=this;d.tokentype=a,d.tokenvalue=b,d.tokenlength=c},nextToken:function(a,b){var c,d,e,f,g,h=this;if(g=a,f=b,e=a.length,f>=e||0>f)return!1;if(c=g.charAt(f),h.isLet(c)){for(d=c;;){if(f+=1,f>=e)break;if(c=g.charAt(f),!h.isLet(c))break;d+=c}return h.istokf1(d)?(h.setToken("f1",d,d.length),!0):h.istokf2(d)?(h.setToken("f2",d,d.length),!0):(h.setToken("v",d,d.length),!0)}if(h.isNum(c)){for(d=c;;){if(f+=1,f>=e)break;if(c=g.charAt(f),!h.isNum(c))break;d+=c}return h.setToken("n",d,d.length),!0}return h.isOper(c)?(h.setToken("oper",c,1),!0):!1},checkToks:function(a){var b=this,c=null,d=0/0,e=0/0,f=0/0,g=0/0,h=null,i=null,j=0/0,k=0/0,l=!1,m=0/0;if(c=a,e=0,j=0,m=0,d=c.length,c.indexOf("---")>=0)return void b.callError(MathParser.errManyMinuses);for(;d>e&&2*d>j;){if(b.nextToken(c,e)){if(f=e+b.tokenlength,h=c.charAt(f),g=e-1,i=c.charAt(g),"f1"==b.tokentype){if("("!=h)return void b.callError(MathParser.errExpected+f+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".")}if("f2"==b.tokentype){if("max"!=b.tokenvalue&&"min"!=b.tokenvalue)return void b.callError(MathParser.errUnknownFunctions+f+".");if("("!=h)return void b.callError(MathParser.errExpected+f+".");for(k=1,l=!1,m=0;k>0&&d>m;)m+=1,"("==c.charAt(f+m)&&(k+=1),")"==c.charAt(f+m)&&(k+=-1),","==c.charAt(f+m)&&(l+=1);if(0==l)return void b.callError(MathParser.errTwoArgumentsExpected+e+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".")}if("v"==b.tokentype){if(!b.isVar(b.tokenvalue)&&"pi"!=b.tokenvalue&&"e"!=b.tokenvalue&&"xy"!=b.tokenvalue)return void b.callError(MathParser.errUnknownEntries+e+".");if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".");if(d>f&&!b.isOper(h))return void b.callError(MathParser.errOperatorExpected+f+".");if(d>f&&"("==h)return void b.callError(MathParser.errOperatorExpected+f+".")}if("n"==b.tokentype){if(e>0&&!b.isOper(i))return void b.callError(MathParser.errOperatorExpected+g+".");if(e>0&&")"==i)return void b.callError(MathParser.errOperatorExpected+g+".");if(d>f&&!b.isOper(h))return void b.callError(MathParser.errOperatorExpected+f+".");if(d>f&&"("==h)return void b.callError(MathParser.errOperatorExpected+f+".")}if("("==b.tokenvalue&&d>f&&"^*,)+/".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if(")"==b.tokenvalue){if(d>f&&-1=="^*+-,/)".indexOf(h))return void b.callError(MathParser.errEntriesExpected+f+".");if(g>=0&&"^*+-,/(".indexOf(i)>=0)return void b.callError(MathParser.errEntriesExpected+f+".")}if(","==b.tokenvalue){if(0==e||e==d-1)return void b.callError(MathParser.errStrayComma+e+".");if(d>f&&"^*+,/)".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if(g>=0&&"^*+-,/(".indexOf(i)>=0)return void b.callError(MathParser.errEntriesExpected+f+".")}if("^/*-+".indexOf(b.tokenvalue)>=0){if("+*^/),".indexOf(h)>=0)return void b.callError(MathParser.errEntriesExpected+f+".");if("+*^/(,".indexOf(i)>=0&&"-"!=b.tokenvalue)return void b.callError(MathParser.errEntriesExpected+f+".")}}else b.callError(MathParser.errUnknownChar+e);e+=b.tokenlength,j+=1}},conOper:function(a,b){var c=this,d=null,e=0/0,f=0/0,g=0/0,h=null,i=null,j=0/0,k=0/0;if(e=a.length,d=a,-1==d.indexOf(b))return d;if(0==d.indexOf(b)&&"-"!=b)return c.callError(MathParser.errFirst+b),"";if(d.charAt(d.length-1)==b)return c.callError(MathParser.errLast+b+"."),"";for(f=0;d.indexOf(b)>0&&6*e>f;){if(f+=1,g=d.indexOf(b),j=c.goLeft(d,g),1==c.iserror)return c.callError(MathParser.errCharNumber.replace("%s",b).replace("%f",f)),"";if(h=d.substring(j+1,g),k=c.goRight(d,g),1==c.iserror)return c.callError(MathParser.errCharNumber.replace("%s",b).replace("%f",f)),"";if(i=d.substring(g+1,k),"*"==b&&(d=d.substring(0,j+1)+"mul("+h+","+i+")"+d.substring(k,d.length+1)),"/"==b&&(d=d.substring(0,j+1)+"div("+h+","+i+")"+d.substring(k,d.length+1)),"-"==b&&(d=d.substring(0,j+1)+"minus("+h+","+i+")"+d.substring(k,d.length+1)),"+"==b&&(d=d.substring(0,j+1)+"plus("+h+","+i+")"+d.substring(k,d.length+1)),d.length>7*e)return c.callError(MathParser.errOoops),""}return d},conUnary:function(a){var b,c,d,e,f=this;if(c=a.length,b=a,-1==b.indexOf("-"))return b;if("-"==b.charAt(b.length-1))return f.callError(MathParser.errLastMinus),"";for(d=0;d<b.length;d++){if("-"==b.charAt(d)&&f.unaryId(b.charAt(d-1))){if(e=f.goRight(b,d),1==f.iserror)return f.callError(MathParser.errPosition+d),"";b=b.substring(0,d)+"minus(0,"+b.substring(d+1,e)+")"+b.substring(e,b.length)}if(b.length>9*c)return f.callError(MathParser.errOoops),""}return b},unaryId:function(a){return"+-,(/*^".indexOf(a)>-1?!0:!1},goRight:function(a,b){var c=this,d=null,e=0/0,f=0/0;if(d=a.charAt(b+1),e=b+1,"-"==d){if(e+=1,e>=a.length)return c.iserror=1,e;d=a.charAt(e)}if(c.nums.indexOf(d)>-1)for(;c.nums.indexOf(a.charAt(e))>-1&&e<a.length;)e+=1;else if(c.lets.indexOf(d)>-1){for(;c.lets.indexOf(a.charAt(e))>-1&&e<a.length;)e+=1;if("("==a.charAt(e))for(f=1;f>0&&e<a.length;)e+=1,"("==a.charAt(e)&&(f+=1),")"==a.charAt(e)&&(f+=-1);if(f>0)return c.iserror=1,e}else{if("("!=d)return c.iserror=1,e;for(f=1;f>0&&e<a.length;)e+=1,"("==a.charAt(e)&&(f+=1),")"==a.charAt(e)&&(f+=-1);if(e+=1,f>0)return c.iserror=1,e}return e},goLeft:function(a,b){var c=this,d=null,e=0/0,f=0/0;if(d=a.charAt(b-1),e=b-1,c.nums.indexOf(d)>-1)for(;c.nums.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1;else if(c.lets.indexOf(d)>-1)for(;c.lets.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1;else{if(")"!=d)return c.iserror=1,e;if(f=1,0==e)return c.iserror=1,e;for(;f>0&&e>0;)e+=-1,")"==a.charAt(e)&&(f+=1),"("==a.charAt(e)&&(f+=-1);if(e+=-1,f>0)return c.iserror=1,e;if(e>=0&&c.nums.indexOf(a.charAt(e))>-1)return c.iserror=1,e;if(0==e&&"-"!=a.charAt(e)&&"("!=a.charAt(e))return c.iserror=1,e;if(e>0&&c.lets.indexOf(a.charAt(e))>-1)for(;c.lets.indexOf(a.charAt(e))>-1&&e>=0;)e+=-1}return e},conCaret:function(a){var b=this,c=null,d=0/0,e=0/0,f=0/0,g=0/0,h=0/0,i=null,j=null;if(d=a.length,c=a,-1==c.indexOf("^"))return c;if(0==c.indexOf("^"))return b.callError(MathParser.errFisrt2),"";if("^"==c.charAt(c.length-1))return b.callError(MathParser.errLast2),"";for(e=0;c.indexOf("^")>0&&6*d>e;){if(e+=1,f=c.lastIndexOf("^"),g=b.goLeft(c,f),1==b.iserror)return b.callError(MathParser.errNumber2.replace("%f",e)),"";if(i=c.substring(g+1,f),h=b.goRight(c,f),1==b.iserror)return b.callError(MathParser.errNumber2.replace("%f",e)),"";if(j=c.substring(f+1,h),c=c.substring(0,g+1)+"pow("+i+","+j+")"+c.substring(h,c.length+1),c.length>7*d)return b.callError(MathParser.errOoops),""}return c},whiteSpaces:function(a){var b=0/0,c=null,d=0/0,e=0;for(d=a.length,c=a.toLowerCase();c.indexOf(" ")>-1&&d+1>e;)b=c.indexOf(" "),c=c.substring(0,b)+c.substring(b+1,c.length),e+=1;return c},checkLegal:function(a){var b,c,d,e=this;if(""==a)return e.callError(MathParser.errImput),!1;for(b=0;b<a.length;b++)if(d=a.charAt(b),c=e.nums.indexOf(d)+e.lets.indexOf(d)+e.opers.indexOf(d),-3==c)return e.callError(MathParser.errUnknownChar2),!1;return!0},checkPars:function(a){var b,c,d,e=this,f=0,g=0,h=0;for(b=0;b<a.length;b++)"("==a.charAt(b)&&(f+=1),")"==a.charAt(b)&&(g+=1);if(f!=g)return e.callError(MathParser.errMismatchedParenthesis),!1;for(c=0;c<a.length;c++)if("("==a.charAt(c)){for(d=1,h=0;d>0&&h<a.length;)h+=1,"("==a.charAt(c+h)&&(d+=1),")"==a.charAt(c+h)&&(d+=-1);if(d>0)return c+=1,e.callError(MathParser.errMismatchedParenthesis2+c),!1}for(c=0;c<a.length;c++)if(")"==a.charAt(c)){for(d=1,h=0;d>0&&h<a.length;)h+=1,")"==a.charAt(c-h)&&(d+=1),"("==a.charAt(c-h)&&(d+=-1);if(d>0)return c+=1,e.callError(MathParser.errMismatchedParenthesis2+c),!1}return!0},makeStack:function(a){var b,c,d,e,f=this,g=null,h=0/0,i=0/0,j=0/0;for(g=a,i=0,b=[],c=[],h=g.length,d=[],e=[],j=0;h>i&&2*h>j;){if(!f.nextToken(g,i))return f.callError(MathParser.errUnknownChar2),[];"f1"==f.tokentype&&(b.push(f.functions[f.tokenvalue]),b.push("f1"),c.push(f.functions.sin),c.push("f1")),"f2"==f.tokentype&&(b.push(f.functions[f.tokenvalue]),b.push("f2"),c.push(f.functions.plus),c.push("f2")),"v"==f.tokentype&&(b.push(f.tokenvalue),b.push("v"),c.push("x"),c.push("v")),"n"==f.tokentype&&(b.push(Number(f.tokenvalue)),b.push("n"),c.push(Number(f.tokenvalue)),c.push("n")),i+=f.tokenlength,j+=1}return b.reverse(),d=c.reverse(),f.checkEval(d),1==f.iserror?[]:b},callError:function(a){var b=this;throw b.errorMes=MathParser.errSyntaxError+a,b.iserror=1,new Error(b.errorMes)},checkEval:function(a){for(var b,c,d=this,e="",f=[],g=0;g<a.length;g++)if(e=a[g++],"n"==e)f.push(a[g]);else if("v"==e)f.push(1);else if("f1"==e){if(f.length<1)return void d.callError(MathParser.errNumberArguments);f.push(a[g](f.pop()))}else{if("f2"!=e)return void d.callError(MathParser.errEvaluate);if(f.length<2)return void d.callError(MathParser.errNumberArguments);b=f.pop(),c=f.pop(),f.push(a[g](b,c))}return 1!=f.length?void d.callError(""):isNaN(f[0])?void d.callError(""):void 0},pow:function(a,b){return 0>a&&b==Math.floor(b)?b%2==0?Math.pow(-a,b):-Math.pow(-a,b):0==a&&b>0?0:isNaN(a)&&0==b?0/0:Math.pow(a,b)},doEval:function(a,b){var c,d,e,f=this,g="",h=[],i=0/0,j=0/0;if(b.length!=f.aVarNames.length)return 0/0;for(j=0;j<b.length;j++)if("number"!=typeof b[j])return 0/0;for(i=0;i<a.length;i++)if(g=a[i++],"n"==g)h.push(a[i]);else if("v"==g)if("e"==a[i])h.push(Math.E);else if("pi"==a[i])h.push(Math.PI);else for(j=0;j<f.aVarNames.length;j++)a[i]==f.aVarNames[j]&&h.push(b[j]);else if("f1"==g)c=h.pop(),h.push(a[i](c));else{if("f2"!=g)return 0/0;d=h.pop(),e=h.pop(),h.push(a[i](d,e))}return h[0]},doDeriv:function(a,b){var c=this;if(b.length>1)return 0/0;var d,e,f,g="",h=[],i=0/0,j=0/0;if(b.length!=c.aVarNames.length)return 0/0;for(j=0;j<b.length;j++)if("number"!=typeof b[j])return 0/0;for(i=0;i<a.length;i++)if(g=a[i++],"n"==g)h.push([a[i],0]);else if("v"==g)if("e"==a[i])h.push([Math.E,0]);else if("pi"==a[i])h.push([Math.PI,0]);else for(j=0;j<c.aVarNames.length;j++)a[i]==c.aVarNames[j]&&h.push([b[j],1]);else if("f1"==g)d=h.pop(),h.push(a[i](d));else{if("f2"!=g)return 0/0;e=h.pop(),f=h.pop(),h.push(a[i](e,f))}return h[0][1]},_gcd:function(a,b){var c=this,d=[].slice.call(arguments,2),e=1;if(a>b&&(a+=b,b=a-b,a-=b),b==Math.round(b/a)*a)e=a;else for(var f=Number(Math.round(a/2));f>1;f--)a==Math.round(a/f)*f&&b==Math.round(b/f)*f&&(e=f,f=-1);return d.length?c._gcd.apply(this,d.concat(e)):e},_lcm:function(a,b){var c=this,d=[].slice.call(arguments,2),e=Number(a*b/c._gcd(a,b));return d.length?c._lcm.apply(this,d.concat(e)):e}});metaCalc.extendObject(MathParser,{errManyMinuses:"No need for so many minuses.",errExpected:"'(' expected at position ",errOperatorExpected:"Operator expected at position ",errUnknownFunctions:"Unknown functions at position ",errTwoArgumentsExpected:"Two arguments expected for function at position ",errUnknownEntries:"Unknown entries at position ",errEntriesExpected:"Entries expected at position ",errStrayComma:"Stray comma at position ",errUnknownChar:"Unknown characters at position ",errFirst:"Error at the first ",errLast:"Error at the last ",errCharNumber:"Error at %s number %f.",errOoops:"Oooops!",errLastMinus:"Error at the last minus.",errPosition:"Error at position ",errFisrt2:"Error at the first ^.",errLast2:"Error at the last ^.",errNumber2:"Error at ^ number %f from the end.",errImput:"Empty input.",errUnknownChar2:"Unknown characters.",errMismatchedParenthesis:"Mismatched parenthesis.",errMismatchedParenthesis2:"Mismatched parenthesis at position number ",errSyntaxError:"Syntax error. ",errNumberArguments:"Check number of arguments in your functions.",errEvaluate:"Can't evaluate."});var PanelManager={panels:[]},SimplePanel,PanelTransitions,PanelAlerts;!function(a){function b(c,d){var e="";d=d||"data-";for(var f in c){var g=c[f];a.isArray(g)?a.each(g,function(a,b){e+="&"+d+f+"-"+a+"="+encodeURIComponent(JSON.stringify(b))}):e+="object"==typeof g?b(g,d+f+"-"):"&"+d+f+"="+encodeURIComponent(JSON.stringify(c[f]))}return e}function c(a){if(null==a)return null;if("undifined"==a)return void 0;try{return JSON.parse(a)}catch(b){return null}}function d(b){var d,e={},f=b.split("&");return a.each(f,function(a,b){var b=b.split("=");2!==b.length&&(b[1]=b[1]+"="+b[2]);var f=b[0].split("-");f.length>2?(void 0===e[f[1]]&&(e[f[1]]=isNaN(f[2])?{}:[]),d=c(b[1]),null!=d&&void 0!=d&&(e[f[1]][f[2]]=d)):f.length>1&&(d=c(b[1]),null!=d&&void 0!=d&&(e[f[1]]=d))}),e}function e(){var a=h.getState();if(PanelManager._currRandom!==a.data.rand||a.data.id!==PanelManager.getActivePanel())if(void 0===a.data.id&&a.hash){var b=a.hash.substring(a.hash.indexOf("?")),c=b.match(/data-(.*)$/);b=b.match(/^\?([a-z\-0-9]+)(\#|\?)*.*$/),null!==b&&b.length>=2&&(PanelManager.activatePanel("#"+b[1],PanelTransitions.SLIDE_RIGHT,!0),null!==c&&c.length>=2&&(c=decodeURIComponent("data-"+c[1]),c=d(c),PanelManager.OpenHistory({data:c,id:"#"+b[1]})))}else"#home"===a.data.id?PanelManager.activatePanel(a.data.id,PanelTransitions.SLIDE_RIGHT,!0):(a.data.id!==PanelManager.getActivePanel()||PanelManager._currRandom!==a.data.rand)&&(PanelManager.activatePanel(a.data.id,PanelTransitions.SLIDE_RIGHT,!0),PanelManager.OpenHistory(a.data))}function f(){h.Adapter.bind(window,"statechange",e),e()}function g(){setTimeout(function(){void 0!==h.Adapter?f():g()},100)}var h=window.History;PanelTransitions={SLIDE_RIGHT:"slideRight",SLIDE_LEFT:"slideLeft"},PanelAlerts={errMessages:{errAlert1:"Special Characters are not Valid.",errAlert2:"Special Characters are not Valid."},_currentObj:null,_currentTitle:"Error Message!",_currentMsg:"",_currentValidator:"",_jsonRules:{},initRules:function(a){this._jsonRules=a},setObj:function(b,c,d){var e=this;e._currentObj=b,e._currentValidator=c,e._currentObj.popover(a.extend(d||{},{placement:"top",trigger:"manual",title:function(){return e._currentTitle},content:function(){return e._currentMsg}}))},showMessage:function(a){var b=this;b._currentMsg=PanelAlerts.errMessages[a],b._currentObj.popover({content:a});var c=b._currentObj;"undefined"!=typeof c.data("timer1")&&clearTimeout(c.data("timer1")),c.data("timer1",setTimeout(function(){c.popover("show"),c.removeData("timer1"),"undefined"!=typeof c.data("timer2")&&clearTimeout(c.data("timer2")),c.data("timer2",setTimeout(function(){c.removeData("timer2"),c.popover("hide")},4e3))},400))},hideMessage:function(){var a=this,b=a._currentObj;"undefined"!=typeof b.data("timer1")&&(clearTimeout(b.data("timer1")),b.removeData("timer1")),"undefined"!=typeof b.data("timer2")&&(clearTimeout(b.data("timer2")),b.removeData("timer2"),b.popover("hide"))},validate:function(b){var c=this;if(c._jsonRules.Rules){var d=String(b),e=c._jsonRules.Rules[c._currentValidator],f=0;return a.isArray(e)&&a.each(e,function(b,e){switch(e.type){case 1:if(a.each(e.chars,function(a,b){return d.indexOf(b)>=0?(c.showMessage(e.message),d=d.replace(b,""),f++,!1):void 0}),f>0)return!1;break;case 2:if(new RegExp(e.reg).test(d))return c.showMessage(e.message),f++,!1;break;case 3:}}),f||c.hideMessage(),d}}},PanelManager=jQuery.extend(PanelManager,{panels:[],_currentPanel:null,_currRandom:0,getActivePanel:function(){return this._currentPanel},activatePanel:function(b,c,d){if("undefined"!=typeof window.stop_activation&&window.stop_activation===!0)return void(window.stop_activation=null);var e=this._currentPanel?this._currentPanel:null,f=b?b:"#home";if("undefined"!=typeof window.already_active&&window.already_active===!0)return void(window.already_active=null);{var g=a(f).siblings(".tabs"),i=a(f).parents(".area");a("body").data("current-url")}if(e?(a(e).toggle(),"#home"==f?(a(".tabs").hide(),a("#shortener").hide()):(a(".tabs, .area").hide(),g.show(),i.show()),"#home"==e&&(g.show(),i.show())):(a("#home").hide(),g.toggle(),i.toggle()),a(f).toggle(),this._currentPanel=f,a("input[type=text]:first",f).focus(),!d&&void 0!==h){var j=(h.getState(),Math.random());if(void 0!==h.Adapter){this._currRandom=j;var k=this.getUrl(f);h.pushState({id:f,trans:c,rand:j},document.title,k.url,!1),console.log("Pushing state for new URL: ",k.url),a("body").data("current-url","http://"+window.location.host+window.location.pathname+k.url)}}if(this.checkHost()){var l=this;a("#home").is(":visible")||(a("#shortener .url").val(a("#shortener .url").data("base-value")),a("#shortener .url").attr("data-clipboard-text",a("body").data("current-url")),a("#shortener").slideDown(400)),a("#shortener > button").unbind("click").click(function(){l.getShortUrl(b,null,!0),a(this).text("Update URL")})}return f},checkHost:function(){return"localhost"===document.location.hostname||(-1!==window.location.hostname.search(/mathwarehouse\.cn\.com$/)||-1!==window.location.hostname.search(/meta-calculator\.com$/))&&-1===window.location.pathname.search(/online-licensee/)?!0:!1},getShortUrl:function(c,d,e){if(this.checkHost()){var f=a("body").data("current-url"),g=window.location.hash,h=a("#shortener input[name=token]").val(),i=this.panels[c];if(null!==i&&void 0!==i&&"function"==typeof i.save){var j=this.getUrl(c),k=i.save();j.url+=b(k),current_url="http://"+window.location.host+window.location.pathname+j.url,console.log("From Callback current url is ",current_url)}else e?(current_url=f,console.log("Override is ON. current url is ",current_url)):(f=f.split("?")[0],current_url=f+d+g,console.log("Override is OFF. current url is ",current_url));a.ajax({type:"POST",url:"shorturl.php",data:{token:h,raw_url:f,current_url:current_url},success:function(b){var c=b.split("ERROR:")[1];void 0===c?(a("#shortener .url").val(b),a("#shortener .url").attr("data-clipboard-text",b)):a("#shortener .url").val(c);var d=new ZeroClipboard(document.getElementById("shortener-url-input"),{moviePath:"swf/ZeroClipboard.swf"});d.on("load",function(a){a.on("complete",function(a,b){alert("Copied URL to clipboard: "+b.text),a=null}),a.on("copy",function(a){var b=document.getElementById("yourTextArea").value,c=b.replace(/\n/g,"\r\n");a.clipboardData.setData("text/plain",c)})})}})}},getUrl:function(a){var b=a.substring(1),c="?"+b;return{url:c}},AddHistory:function(c,d){var e=this;if(!d||null===d.rand||d.rand!==this._currRandom){var f=this.panels[c],g=this.getUrl(c);null!==f&&void 0!==f&&"function"==typeof f.save&&(d=f.save()),g.url+=b(d),this._currRandom=Math.random(),h.pushState({id:c,trans:null,rand:this._currRandom,data:d},document.title,g.url,!1),console.log("addHistory()");var i="http://"+window.location.host+window.location.pathname+g.url;a("body").data("current-url",i),console.log("changing current-url in body with addHistory()'s newUrl.url",i),a("#shortener > button").unbind("click").click(function(){e.getShortUrl(c,g.url,!1),a(this).text("Update URL")})}},tryies:2,OpenHistory:function(a){var b=this.panels[a.id];if(null!==b&&void 0!==b&&"function"==typeof b.load){var c=a.data;b.load(c)}else this.tryies-->0&&setTimeout(function(){PanelManager.OpenHistory(a)},100)}}),g()}(jQuery);var createClass=function(a){return function(){for(var b in a)this[b]=a[b];this.initialize.apply(this,arguments)}},DashedLine=createClass({initialize:function(a,b,c){this._curveaccuracy=6,this.offLength=0,this.onLength=0,this.dashLength=0,this.target=a,this.setDash(b,c),this.isLine=!0,this.overflow=0,this.pen={x:0,y:0}},setDash:function(a,b){this.onLength=a,this.offLength=b,this.dashLength=this.onLength+this.offLength},getDash:function(){return[this.onLength,this.offLength]},moveTo:function(a,b){this.targetMoveTo(a,b)},lineTo:function(a,b){var c=Number(a-this.pen.x),d=Number(b-this.pen.y),e=Number(Math.atan2(d,c)),f=Number(Math.cos(e)),g=Number(Math.sin(e)),h=Number(this.lineLength(c,d));if(this.overflow){if(this.overflow>h)return this.isLine?this.targetLineTo(a,b):this.targetMoveTo(a,b),void(this.overflow-=h);if(this.isLine?this.targetLineTo(this.pen.x+f*this.overflow,this.pen.y+g*this.overflow):this.targetMoveTo(this.pen.x+f*this.overflow,this.pen.y+g*this.overflow),h-=this.overflow,this.overflow=0,this.isLine=!this.isLine,!h)return}var i=Number(Math.floor(h/this.dashLength));if(i){for(var j=Number(f*this.onLength),k=Number(g*this.onLength),l=Number(f*this.offLength),m=Number(g*this.offLength),n=0;i>n;n++)this.isLine?(this.targetLineTo(this.pen.x+j,this.pen.y+k),this.targetMoveTo(this.pen.x+l,this.pen.y+m)):(this.targetMoveTo(this.pen.x+l,this.pen.y+m),this.targetLineTo(this.pen.x+j,this.pen.y+k));h-=this.dashLength*i}this.isLine?h>this.onLength?(this.targetLineTo(this.pen.x+f*this.onLength,this.pen.y+g*this.onLength),this.targetMoveTo(a,b),this.overflow=this.offLength-(h-this.onLength),this.isLine=!1):(this.targetLineTo(a,b),h==this.onLength?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=this.onLength-h,this.targetMoveTo(a,b))):h>this.offLength?(this.targetMoveTo(this.pen.x+f*this.offLength,this.pen.y+g*this.offLength),this.targetLineTo(a,b),this.overflow=this.onLength-(h-this.offLength),this.isLine=!0):(this.targetMoveTo(a,b),h==this.offLength?(this.overflow=0,this.isLine=!this.isLine):this.overflow=this.offLength-h)},curveTo:function(a,b,c,d){var e,f=Number(this.pen.x),g=Number(this.pen.y),h=Number(this.curveLength(f,g,a,b,c,d)),i=0,j=0;if(this.overflow){if(this.overflow>h)return this.isLine?this.targetCurveTo(a,b,c,d):this.targetMoveTo(c,d),void(this.overflow-=h);if(i=this.overflow/h,e=this.curveSliceUpTo(f,g,a,b,c,d,i),this.isLine?this.targetCurveTo(e[2],e[3],e[4],e[5]):this.targetMoveTo(e[4],e[5]),this.overflow=0,this.isLine=!this.isLine,!h)return}var k=Number(h-h*i),l=Number(Math.floor(k/this.dashLength)),m=Number(this.onLength/h),n=Number(this.offLength/h);if(l)for(var o=0;l>o;o++)this.isLine?(j=i+m,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetCurveTo(e[2],e[3],e[4],e[5]),i=j,j=i+n,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetMoveTo(e[4],e[5])):(j=i+n,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetMoveTo(e[4],e[5]),i=j,j=i+m,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetCurveTo(e[2],e[3],e[4],e[5])),i=j;k=h-h*i,this.isLine?k>this.onLength?(j=i+m,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetCurveTo(e[2],e[3],e[4],e[5]),this.targetMoveTo(c,d),this.overflow=this.offLength-(k-this.onLength),this.isLine=!1):(e=this.curveSliceFrom(f,g,a,b,c,d,i),this.targetCurveTo(e[2],e[3],e[4],e[5]),h==this.onLength?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=this.onLength-k,this.targetMoveTo(c,d))):k>this.offLength?(j=i+n,e=this.curveSlice(f,g,a,b,c,d,i,j),this.targetMoveTo(e[4],e[5]),e=this.curveSliceFrom(f,g,a,b,c,d,j),this.targetCurveTo(e[2],e[3],e[4],e[5]),this.overflow=this.onLength-(k-this.offLength),this.isLine=!0):(this.targetMoveTo(c,d),k==this.offLength?(this.overflow=0,this.isLine=!this.isLine):this.overflow=this.offLength-k)},clear:function(){this.target.clear()},lineStyle:function(a,b,c){this.target.lineStyle(a,b,c)},beginFill:function(a,b){this.target.beginFill(a,b)},beginGradientFill:function(a,b,c,d,e){this.target.beginGradientFill(a,b,c,d,e)},endFill:function(){this.target.endFill()},lineLength:function(a,b){var c=[].slice.call(arguments,2);if(!c.length)return Math.sqrt(a*a+b*b);var d=Number(c[0]),e=Number(c[1]),f=Number(d-a),g=Number(e-b);return Math.sqrt(f*f+g*g)},curveLength:function(a,b,c,d,e,f){for(var g=[].slice.call(arguments,6),h=0,i=Number(a),j=Number(b),k=0/0,l=0/0,m=0/0,n=0/0,o=0/0,p=0/0,q=0/0,r=Number(null!=g[0]?g[0]:this._curveaccuracy),s=1;r>=s;s++)m=s/r,n=1-m,o=n*n,p=2*m*n,q=m*m,k=o*a+p*c+q*e,l=o*b+p*d+q*f,h+=this.lineLength(i,j,k,l),i=k,j=l;return h},curveSlice:function(a,b,c,d,e,f,g,h){if(0==g)return this.curveSliceUpTo(a,b,c,d,e,f,h);if(1==h)return this.curveSliceFrom(a,b,c,d,e,f,g);var i=this.curveSliceUpTo(a,b,c,d,e,f,h);return i.push(g/h),this.curveSliceFrom.apply(this,i)},curveSliceUpTo:function(a,b,c,d,e,f,g){if(arguments.length<7&&(g=0),0==g&&(g=1),1!=g){var h=Number(c+(e-c)*g),i=Number(d+(f-d)*g);c=a+(c-a)*g,d=b+(d-b)*g,e=c+(h-c)*g,f=d+(i-d)*g}return[a,b,c,d,e,f]},curveSliceFrom:function(a,b,c,d,e,f,g){if(arguments.length<7&&(g=0),0==g&&(g=1),1!=g){var h=Number(a+(c-a)*g),i=Number(b+(d-b)*g);c+=(e-c)*g,d+=(f-d)*g,a=h+(c-h)*g,b=i+(d-i)*g}return[a,b,c,d,e,f]},targetMoveTo:function(a,b){this.pen={x:a,y:b},this.target.moveTo(a,b)},targetLineTo:function(a,b){(a!=this.pen.x||b!=this.pen.y)&&(this.pen={x:a,y:b},this.target.lineTo(a,b))},targetCurveTo:function(a,b,c,d){(a!=c||b!=d||c!=this.pen.x||d!=this.pen.y)&&(this.pen={x:c,y:d},this.target.curveTo(a,b,c,d))}}),Locale={numLanguages:0,languages:{},strings:[],targetTypes:[],init:function(a){var b=$(a);$("targetTypes type",b).each(function(){Locale.targetTypes[$(this).attr("id")]=$(this).attr("value")}),$("languages language",b).each(function(){Locale.languages[$(this).attr("id")]=new Language($(this).attr("id"),$(this).attr("name")),Locale.numLanguages++}),$("strings string",b).each(function(){var a=[],b={};$("target",this).each(function(){a.push(new LocaleStringTarget($(this).text(),$(this).attr("type")))}),$("text",this).each(function(){b[$(this).attr("lang")]=$(this).text()}),Locale.strings.push(new LocaleString(a,b))})},getLanguage:function(){return this._language||Locale.languages.en},setLanguage:function(a){if(a&&(!this._language||this._language.id!=a.id)){this._language=a;for(var b=0,c=Locale.strings.length;c>b;b++)Locale.strings[b].setLanguage(a)}},languageExists:function(a){for(var b=0,c=Locale.languages.length;c>b;b++)if(Locale.languages[b].id===a)return!0;return!1}},Language=metaCalc.createClass({initialize:function(a,b){this.id=a,this.name=b},toString:function(){return"[Language "+this.id+":("+this.name+")]"}}),LocaleString=metaCalc.createClass({initialize:function(a,b){this.targets=a||[],this.texts=b||{}},getLanguage:function(){return this._language||Locale.languages.en},setLanguage:function(a){for(var b in this.targets)this.targets.hasOwnProperty(b)&&this.targets[b].setText(this.texts[a.id]);this._language=a}}),LocaleStringTarget=metaCalc.createClass({initialize:function(a,b){this.path=a,this.type=b},setText:function(a){switch(parseInt(this.type,10)){case 1:$(this.path).text(a);break;case 2:$(this.path).val(a);break;case 3:$(this.path).html(a);break;case 4:$(this.path).attr("href",a);break;case 5:for(var b=this.path.split("."),c=window,d=0,e=b.length;e-1>d;d++)c=c[b[d]];c[b[d]]=a}}}),getQueryParamsJSON=function(){var a=window.location.toString().split("?")[1];if(a=a&&a.split("&"),!a)return{};for(var b={},c=0,d=a.length;d>c;c++)if(a[c]){var e=a[c].split("=");b[e[0]]=decodeURIComponent(e[1])}return b},Point=metaCalc.createClass({initialize:function(a,b){this.x=a,this.y=b}}),PolarPoint=metaCalc.createClass({initialize:function(a,b){this.r=a,this.t=b},toRectangular:function(){return new Point(this.r*Math.cos(this.t),this.r*Math.sin(this.t))}}),drawTimes=0,timoutControl=null,lastGraphType="L";window.GRAPH_SIZES=window.GRAPH_SIZES||[],function(){function a(){var a=metacalc.panels.Panel_102_Graph.getGraphObject();return a=c(a)}function b(a){var b=c(a);$.each(b.equations||[],function(a,b){$("#panel-101-equations .txtEquation"+(a+1)).val(b)}),$.each(b.domains||[],function(a,b){$.isArray(b)&&2===b.length&&($("#panel-101-equations .txtDomain1_"+(a+1)).val(b[0]),$("#panel-101-equations .txtDomain2_"+(a+1)).val(b[1]))}),$.each(b.ranges||[],function(a,b){$.isArray(b)&&2===b.length&&($("#panel-101-equations .txtRange1_"+(a+1)).val(b[0]),$("#panel-101-equations .txtRange2_"+(a+1)).val(b[1]))}),$.each(b.points||[],function(a,b){$.isArray(b)&&2===b.length&&($("#panel-106-point-plotter .txtPointX_"+a).val(b[0]),$("#panel-106-point-plotter .txtPointY_"+a).val(b[1]))}),$.each(b.polarPoints||[],function(a,b){$.isArray(b)&&2===b.length&&($("#panel-106-point-plotter .txtPointR_"+a).val(b[0]),$("#panel-106-point-plotter .txtPointT_"+a).val(b[1]))}),b.isXAxisPi&&$("#panel-102-graph #x-axis-pi").attr("checked",b.isXAxisPi),b.isYAxisPi&&$("#panel-102-graph #y-axis-pi").attr("checked",b.isYAxisPi),b.scale&&$("#panel-102-graph #scale-type").val(b.scale),b.hideGrid&&$("#panel-102-graph #showGrid").removeAttr("checked"),b.bounds&&(b.bounds.xMin&&$("#panel-102-graph .txtXMin").val(b.bounds.xMin),b.bounds.xMax&&$("#panel-102-graph .txtXMax").val(b.bounds.xMax),b.bounds.yMin&&$("#panel-102-graph .txtYMin").val(b.bounds.yMin),b.bounds.yMax&&$("#panel-102-graph .txtYMax").val(b.bounds.yMax))}function c(a){var b={bounds:a.bounds||{},equations:[],domains:[],ranges:[],points:a.points||[],polarPoints:a.polarPoints||[],scale:a.scale,rand:a.rand,hideGrid:a.hideGrid,isXAxisPi:!!a.isXAxisPi,isYAxisPi:!!a.isYAxisPi},c=[];return 1===b.bounds.scaleX&&delete b.bounds.scaleX,1===b.bounds.scaleY&&delete b.bounds.scaleY,b.isXAxisPi===!1&&delete b.isXAxisPi,b.isYAxisPi===!1&&delete b.isYAxisPi,$.each(a.equations||[],function(a,d){""!==d&&(b.equations.push(d),c[a]=!0)}),$.each(a.domains||[],function(a,d){return c[a]?void(!$.isArray(d)||"-Infinity"===d[0]&&"Infinity"===d[1]||b.domains.push(d)):!0}),$.each(a.ranges||[],function(a,d){return c[a]?void(!$.isArray(d)||"-Infinity"===d[0]&&"Infinity"===d[1]||b.ranges.push(d)):!0}),b.domains.length||delete b.domains,b.ranges.length||delete b.ranges,b.points.length||delete b.points,b.polarPoints.length||delete b.polarPoints,"L"===b.scale&&delete b.scale,b
}PanelManager.panels["#panel-101-equations"]={load:function(a){b(a),PanelManager.activatePanel("#panel-101-equations",PanelTransitions.SLIDE_RIGHT,!0)},save:function(){return a()}},PanelManager.panels["#panel-102-graph"]={load:function(a){b(a),PanelManager.activatePanel("#panel-102-graph",PanelTransitions.SLIDE_RIGHT,!0);var c=function(){void 0===metacalc?setTimeout(c,100):metacalc.panels.Panel_102_Graph.activate(PanelTransitions.SLIDE_RIGHT,!0)};setTimeout(c,100)},save:function(){return a()}},PanelManager.panels["#panel-106-point-plotter"]={load:function(a){b(a),PanelManager.activatePanel("#panel-106-point-plotter",PanelTransitions.SLIDE_RIGHT,!0);var c=function(){void 0===metacalc?setTimeout(c,100):metacalc.panels.Panel_106_PointPlotter.activate(PanelTransitions.SLIDE_RIGHT,!0)};setTimeout(c,100)},save:function(){return a()}}}();var doGraph=function(a,b,c,d,e){function f(a){var b=o(a),c=b+1,d=q(b),e=q(c),f=e-d;return f}function g(a){var b=p(a),c=b+1,d=r(b),e=r(c),f=d-e;return Math.abs(f)}function h(a){return vb&&wb.scaleX>1?q(a+1)-q(a):a*(ib.xMax-ib.xMin)/db}function k(a){return vb&&wb.scaleY>1?r(a+1)-r(a):a*(ib.yMax-ib.yMin)/eb}function l(a){return Math.log(a)/Math.log(wb.scaleX)}function m(a){return Math.log(a)/Math.log(wb.scaleY)}function n(a){return"number"!=typeof a||isNaN(a)||!isFinite(a)?!1:!0}function o(a){if(vb&&wb.scaleX>1){var b=l(ib.xMax/ib.xMin);return db*l(a/ib.xMin)/b}return(a-ib.xMin)/(ib.xMax-ib.xMin)*db}function p(a){if(vb&&wb.scaleY>1){var b=m(ib.yMax/ib.yMin);return eb-eb*m(a/ib.yMin)/b}return(ib.yMax-a)/(ib.yMax-ib.yMin)*eb}function q(a){if(vb&&wb.scaleX>1){var b=l(ib.xMax/ib.xMin);return ib.xMin*Math.pow(wb.scaleX,b*a/db)}return a/(db/(ib.xMax-ib.xMin))+ib.xMin}function r(a){if(vb&&wb.scaleY>1){var b=m(ib.yMax/ib.yMin),c=eb-a;return ib.yMin*Math.pow(wb.scaleY,b*c/eb)}return ib.yMax-a/(eb/(ib.yMax-ib.yMin))}function s(a,b){return M.addPoint(a,b),M.isValid()?{valid:!0,angle:t(M.pointA,M.pointB,M.pointC)}:{valid:!1,angle:null}}function t(a,b,c){var d={x:b.x-a.x,y:b.y-a.y},e={x:b.x-c.x,y:b.y-c.y},f=Number(d.x*e.x+d.y*e.y),g=Number(d.x*e.y-d.y*e.x),h=Math.atan2(g,f),i=Math.floor(180*h/Math.PI+.5);return 0>i?i+360:i}function u(a,b,c,d,e,f){f||(f=1);var g=Number((a-b).toFixed(7)),h=a-g,i=Number((h/10).toFixed(7));if(0>=i)return{detect:!1};var j=c,k=d,l=g,m=a;d>c&&(j=d,k=c,l=a,m=g);for(var n=g,o=c,p=c,q=0,r=0,s={x:a,y:c},v={x:g,y:c},w=null,x=null,y=null,z=!1;a>=n;){if(n=Number((n+i).toFixed(7)),o=Number(I(e,n)),w={x:n,y:o},x=t(s,v,w),o>j&&(j=o,l=n,q=1),k>o&&(k=o,m=n,r=1),null!==y){var A=x-y;if(180==A){z=!0;break}if(1>h&&Number(Math.abs(j-k).toFixed(7))>10){z=!0;break}if(Math.abs(A)>10)if(10>f){var B=u(n,Number((n-l).toFixed(7)),j,o,e,f+1);z=B.detect}else z=!1}p=o,y=x}return{detect:z}}function v(a,b){return a=a.toString().split("."),parseFloat(a[0]+"."+(a[1]?a[1].substr(0,b):""))}function w(a){try{return a?mb[N][0]<=a.x&&a.x<=mb[N][1]&&nb[N][0]<=a.y&&a.y<=nb[N][1]:!1}catch(b){return Q.error(req.url+"\n\n"+b.stack,R),!1}}function x(a){return a?"number"!=typeof a.x||isNaN(a.x)||!isFinite(a.x)?!1:"number"!=typeof a.y||isNaN(a.y)||!isFinite(a.y)?!1:!0:!1}function y(a){return x(a)&&w(a)}function z(a){return nb[N][0]<a&&a<nb[N][1]}function A(a){var b=hb,c=b>>16&255,d=b>>8&255,e=255&b,f=1;_.fillStyle="rgba("+c+", "+d+", "+e+", "+f+")",_.fillRect(0,0,db,eb),_.fillStyle="rgba(100, 100, 100, 1)",_.font="13px sans-serif",_.fillText(a,10,30)}function B(a){return/^ *y *(<|>|<=|>=)[^y]*$/.test(a)}function C(a){return/[<>]=?/.test(a)}function D(a){return a.match(/([<>]=?)/)[1]}function E(a){return/\b[rt]\b/.test(a)}function F(a,b){return Math.round(a/b)===a/b?1===Math.abs(a/b)?0>a/b?"-":"":(a/b).toString():Ratio.parse(a/b).toQuantityOf(2,3,4,5,6,7,8,9).toString()}function G(){_.clearRect(0,0,db,eb),_.font="10px sans-serif",_.fillStyle="rgba("+ob+", "+pb+", "+qb+", "+rb+")",_.fillRect(0,0,db,eb),_.fillStyle="rgba(100, 100, 100, 1)";var a=ib.xMax-ib.xMin,b=ib.yMax-ib.yMin;a=Math.round(a/15/2*4)/4,b=Math.round(b/11/2*4)/4,sb&&(a*=Math.PI),tb&&(b*=Math.PI);var c=Math.ceil(ib.xMin/a)*a,d=Math.ceil(ib.yMin/b)*b,e=0,f=7,g=20,h=1,i=0,j=7,k=1;for(vb&&(wb.scaleX>1&&(c=1,e=1),wb.scaleY>1&&(d=1,i=1,f=-7,g=-10));c<=ib.xMax;){jb&&(_.strokeStyle="rgba(200, 200, 200, 1)",_.beginPath(),_.moveTo(o(c),p(ib.yMin)),_.lineTo(o(c),p(ib.yMax)),_.stroke()),_.strokeStyle="rgba(100, 100, 100, 1)",_.beginPath(),_.moveTo(o(c),p(i)),_.lineTo(o(c),p(i)+f);var l,m;if(l=sb?F(c,Math.PI)+ub:c.toString(),m=_.measureText(l),c&&_.fillText(l,o(c)-m.width/2,p(i)+g),_.stroke(),vb&&wb.scaleX>1){h=c;for(var n=0;9>n;n++)c+=h,_.strokeStyle="rgba(100, 100, 100, 1)",_.beginPath(),_.moveTo(o(c),p(i)),_.lineTo(o(c),p(i)+f),_.stroke()}else c+=a}for(;d<=ib.yMax;){jb&&(_.strokeStyle="rgba(200, 200, 200, 1)",_.beginPath(),_.moveTo(o(ib.xMin),p(d)),_.lineTo(o(ib.xMax),p(d)),_.stroke()),_.strokeStyle="rgba(100, 100, 100, 1)",_.beginPath(),_.moveTo(o(e),p(d)),_.lineTo(o(e)+j,p(d));var l;if(l=tb?F(d,Math.PI)+ub:d.toString(),d&&_.fillText(l,o(e)+10,p(d)+5),_.stroke(),vb&&wb.scaleY>1){k=d;for(var n=0;9>n;n++)d+=k,_.strokeStyle="rgba(100, 100, 100, 1)",_.beginPath(),_.moveTo(o(e),p(d)),_.lineTo(o(e)+j,p(d)),_.stroke()}else d+=b}_.strokeStyle="rgba(100, 100, 100, 1)",_.beginPath(),_.moveTo(o(ib.xMin),p(0)),_.lineTo(o(ib.xMax),p(0)),_.moveTo(o(0),p(ib.yMin)),_.lineTo(o(0),p(ib.yMax)),_.closePath(),_.stroke();for(var n=0;n<kb.length;n++){var q=kb[n];_.fillStyle="rgba(50, 50, 200, 1)",_.beginPath(),_.arc(o(q[0]),p(q[1]),3,0,2*Math.PI),_.closePath(),_.fill(),_.fillText("("+q[0]+", "+q[1]+")",o(q[0])+5,p(q[1])+10)}for(var n=0;n<lb.length;n++){var q=lb[n],r=new W(q[0],q[1]).toRectangular();_.fillStyle="rgba(50, 200, 50, 1)",_.beginPath(),_.arc(o(r.x),p(r.y),3,0,2*Math.PI),_.closePath(),_.fill(),_.fillText("p ("+q[0]+", "+q[1]+")",o(r.x)+5,p(r.y)+10)}}function H(a){window.last_metacalc_data=a,a.forEach(function(a){var b=a[0],c=a[1],d=a[2]||[];if(2===d.length){var e=1e9,f=-1e9,g=d[0]>e?e:d[0]<f?f:d[0],h=d[1]>e?e:d[1]<f?f:d[1];(g!==d[0]||h!==d[1])&&(d=[g,h])}switch(c){case"property":b.split(".").length>1?_[b.split(".")[0]][b.split(".")[1]]=d:_[b]=d;break;case"function":b.split(".").length>1?_[b.split(".")[0]][b.split(".")[1]].apply(_[b.split(".")[0]],d):_[b].apply(_,d);break;case"new":"dashedLine"===b&&(b.split(".").length>1?_[b.split(".")[0]][b.split(".")[1]]=new DashedLine(_,d[0],d[1]):_[b]=new DashedLine(_,d[0],d[1]))}}),"undefined"!=typeof L.toDataURL?$(".btnSaveGraph").parent().on("click",function(){var a="download.php",b=$("#csrf").data("value"),c={base64_img:L.toDataURL(),csrf:b};$.ajax({url:a,type:"POST",data:c,success:function(b,d,e){var f=e.getResponseHeader("Content-Disposition");if(f&&-1!=f.search("attachment")){var g=$('<form method="POST" action="'+a+'">');$.each(c,function(a,b){g.append($('<input type="hidden" name="'+a+'" value="'+b+'">'))}),$("body").append(g),g.submit()}},error:function(){$("#panel-102-graph .btnSaveGraph").parent().attr("href",L.toDataURL())}})}):$("#panel-102-graph .btnSaveGraph").parent().css("display","none"),--drawTimes<0&&($(".loading").hide(),clearTimeout(timoutControl),timoutControl=null,e&&e.resolve("finished"))}function I(a,b){var c=a.replace(/x(?![a-z])/gi,"("+b+")"),d=O.parse(c);return isNaN(d)?d:(isFinite(d)||(d=1/0===d?1e20:-1e20),d)}function J(a,b,c){P.push([a,b,c])}function K(a,b,c){function d(a){b&&b(a)}var e={url:c};try{var l=(Math.PI,jQuery.extend(!0,{},a)),m=l.graphSize.width||600,q=l.graphSize.height||600,r=(l.backgroundColor||15790320,l.colors||[10027008,1441905,8585365,1008128,6179328,2857680,32870]),t=l.equations||["y=0"],F=(l.points||[],l.polarPoints||[],l.domains||[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]]),G=l.ranges||[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]];F.forEach(function(a){"-Infinity"===a[0]&&(a[0]=-1/0),"Infinity"===a[1]&&(a[1]=1/0)}),G.forEach(function(a){"-Infinity"===a[0]&&(a[0]=-1/0),"Infinity"===a[1]&&(a[1]=1/0)})}catch(H){return Q.error(e.url+"\n\n"+H.stack,R),Q.profile("graph",e.url,R),H}try{var K=+new Date;for(N=0;N<t.length;N++){var L=t[N];if(L){var O=2e3,S=15e3;X[N]=[],Y[N]=[],color=r[N]||6710886,cc=color>>16&255,pb=color>>8&255,qb=255&color,rb=1,J("strokeStyle","property","rgba("+cc+", "+pb+", "+qb+", "+rb+")"),J("beginPath","function");var U=E(L),Z=new T(U?["r","t"]:["x","y"]),_=!1,ab="",bb=!0,cb=-1===window.location.hostname.search(/meta\-calculator\.(com|off)$/)&&-1===window.location.hostname.search(/mathwarehouse\.cn\.com$/);if(C(L)&&!B(L))return A(metacalc.panels.Panel_102_Graph.errInvalidInequationForm.replace("%d",N+1)),d(P),Q.profile("graph",e.url,R),b(P);C(L)&&(_=!0,ab=D(L),L=L.replace(ab,"="));var db=L.split("="),eb=!1,fb=db[0].trim(),gb=db[1].trim();if("y"===fb&&gb.indexOf("y")<0)eb=!0;else if("y"===gb&&fb.indexOf("y")<0){var hb=gb;gb=fb,fb=hb,hb=null,eb=!0}var jb=fb+"-("+gb+")",kb=Z.doCompile(jb);if(Z.iserror)return A("Equation "+(N+1)+": "+Z.errorMes),Q.profile("graph",e.url,R),b(P);if(eb&&!U){var lb=100,mb=gb,nb=h(1),ob=((ib.yMax-ib.yMin)/lb,ib.yMax-ib.yMin,h(1)/2),sb=k(1)/3,tb=5*sb,ub=3*ob,xb=ib.xMin-nb,yb=I(mb,xb),zb=!0,Ab=0,Bb=yb,Cb=0,Db=!1,Eb=!1,Fb={angle:null,valid:!1},Gb=null,Hb=2,Ib=0,Jb=0,Kb=!1,Lb=null;M.resetPoints();var Mb,Nb="",Ob=[];for(_&&1===ab.length&&(Nb="dashedLine.",J("dashedLine","new",[5,2]));xb<ib.xMax;){if(Cb++,xb=Number((xb+nb).toFixed(7)),yb=Number(I(mb,xb)),n(yb)){if(n(Bb)){if(yb=Number((yb-0).toFixed(7)),Ab=Number(Math.abs(yb-Bb).toFixed(7)),Ib=yb>Bb?1:-1,Gb=s(xb,yb),Kb=!1,Gb.valid&&Fb.valid){var Pb=Math.abs(Gb.angle-Fb.angle);Hb>Pb&&(Kb=!0)}if(!Kb&&nb>ob){xb=Number((xb-nb).toFixed(7)),nb=Math.max(nb-ob,ob),M.revertPoint(),Db=!0;continue}if(sb>Ab&&ub>nb&&!Db||Kb&&!Db?(nb=Math.min(nb+ob,ub),Db=!0):Db=!1,Ib>0&&0>Jb||0>Ib&&Jb>0){if(null===Lb){var Qb=u(xb,nb,yb,Bb,mb);Lb=Qb.detect}Lb===!1||(zb=!0,Mb=[o(xb),p(Jb>0?ib.yMax:ib.yMin)],_&&Ob.push(Mb),J(Nb+"lineTo","function",Mb),Bb=yb,yb=Jb>0?Math.min(ib.yMin,yb):Math.max(ib.yMax,yb),lastX=xb,xb=Number((xb+ob).toFixed(7)),Mb=[o(xb),p(wb.scaleY>1?ib.yMin:yb)],_&&Ob.push(Mb),J(Nb+"moveTo","function",Mb),Ib=Jb),Lb=null}}Mb=[o(xb),p(yb)],w({x:xb,y:yb})&&(_&&Ob.push(Mb),zb?(zb=!1,J(Nb+"moveTo","function",Mb)):J(Nb+"lineTo","function",Mb))}else{if(nb>ob){xb=Number((xb-nb).toFixed(7)),nb=ob,Db=!0;continue}zb=!0}if(Bb=yb,Jb=Ib,Fb=Gb,vb&&wb.scaleX>1){var Rb=f(xb);ob=Rb/2,ub=2*Rb;var Sb=g(yb);sb=Sb/2,tb=2*Sb,ob>nb&&(nb=ob)}if(!Eb&&Cb>O){if(Eb=confirm(metacalc.panels.Panel_102_Graph.errOperationTakingToLongRespond),!Eb)break;Cb=0,Eb=!Eb,O=S}}if(J("stroke","function"),Ob.length>2){var Tb,Ub=p(G[N][0]),Vb=p(G[N][1]);Tb=">="==ab||">"==ab?Math.max(0,Vb):Math.min(q,Ub);var Wb=Ob[Ob.length-1],Xb=Ob[0];for(Ob.push([Wb[0],Tb]),Ob.push([Xb[0],Tb]),Ob.push(Xb),J("strokeStyle","property","rgba(0, 0, 0, 0)"),J("fillStyle","property","rgba("+cc+", "+pb+", "+qb+", 0.1)"),J("beginPath","function"),j=0;j<=Ob.length;j++){var Yb=Ob[j];0===j&&x(Yb)?J("moveTo","function",Yb):(y(Yb)||j<=Ob.length-2)&&J("lineTo","function",Yb)}J("closePath","function"),J("fill","function"),J("stroke","function")}}else{if(vb){alert(metacalc.panels.Panel_102_Graph.errLogLogOnlySuportExplicit),window.stop_activation=!0;break}if(!U&&cb){alert(metacalc.panels.Panel_102_Graph.errNotSuportImplicitEq),window.stop_activation=!0;break}if(U){if(U){lb=m,nb=(ib.xMax-ib.xMin)/lb;var Zb=F[N],$b=(G[N],[Zb[0]/Math.PI*180,Zb[1]/Math.PI*180]);$b[0]===-1/0&&($b[0]=-1440);var _b=Math.min($b[1]-$b[0],2880);$b[1]=$b[0]+_b;var Xb,Wb,Ob=[];for(i=$b[0];i<$b[1];i++){var ac,bc=new W(0/0,i*Math.PI/180),cc=bc.r=-Z.doEval(kb,[0,bc.t]),dc=bc.toRectangular();Ob.push(new V(o(dc.x),p(dc.y))),bb&&x(dc)&&z(cc)||(!x(_lastPt)||!z(ac))&&x(dc)&&z(cc)?(J("moveTo","function",[o(dc.x),p(dc.y)]),bb&&(bb=!1,Xb=dc)):x(dc)&&z(cc)&&(J("lineTo","function",[o(dc.x),p(dc.y)]),Wb=dc),_lastPt=dc,ac=cc;var ec=v(dc.x,4),fc=v(dc.y,4),gc=v(o(dc.x),4);Y[N].push({x:ec,y:fc,xpx:gc})}J("stroke","function")}}else{var hc=jQuery.extend(!0,{},a);hc.equations=[hc.equations[N]],"undefined"!=typeof hc.domains&&(hc.domains=[hc.domains[N]]),"undefined"!=typeof hc.ranges&&(hc.ranges=[hc.ranges[N]]),hc.color=N;var ic=e.url+encodeURIComponent(JSON.stringify(hc));drawTimes++;try{$.ajaxSetup({error:function(){alert(metacalc.panels.Panel_103_TableInput.errloading)}}),$.getJSON(ic,b).error(function(){alert(metacalc.panels.Panel_103_TableInput.errloading)})}catch(H){alert("Error: "+H.message)}}}var jc=+new Date,kc=jc-K;console.log("Time equation "+L+": "+kc);var K=+new Date}}}catch(H){Q.error(e.url+"\n\n"+H.stack,R)}var lc={};return Y.length>0&&Y.forEach(function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.xpx.toString();lc[d]=lc[d]||{},lc[d].x=parseFloat(c.x.toFixed(4)),lc[d].y=lc[d].y||[],lc[d].y[N]=lc[d].y[N]||[],lc[d].y[N].push(parseFloat(c.y.toFixed(4)))}}),b(P)}var L=document.getElementById(b);drawTimes=0,null!=timoutControl&&(clearTimeout(timoutControl),timoutControl=null),timoutControl=setTimeout(function(){$(".loading").hide()},15e3);var M={pointA:null,pointB:null,pointC:null,pointBack:null,addPoint:function(a,b){this.pointBack=this.pointA,this.pointA=this.pointB,this.pointB=this.pointC,this.pointC={x:a,y:b}},revertPoint:function(){this.pointC=this.pointB,this.pointB=this.pointA,this.pointA=this.pointBack,this.pointBack=null},resetPoints:function(){this.pointA=null,this.pointB=null,this.pointC=null,this.pointBack=null},isValid:function(){return null!=this.pointA&&null!=this.pointB&&null!=this.pointC}},N=0,O=new MathProcessor,P=[],Q={info:function(a,b){console.log({var1:a,var2:b})},error:function(a,b){console.log({var1:a,var2:b})},profile:function(a,b,c){console.log({var1:a,var2:b,var3:c})}},R={},S=new MetaCalcMath,T=S.MathParser,U=S.metaCalc,V=U.createClass({initialize:function(a,b){this.x=a,this.y=b}}),W=U.createClass({initialize:function(a,b){this.r=a,this.t=b},toRectangular:function(){return new V(this.r*Math.cos(this.t),this.r*Math.sin(this.t))}}),X=[],Y=[];if(L.getContext){if(a.graphSize=GRAPH_SIZES[L.id],"purple"===$("body").attr("data-theme"))var Z=a.backgroundColor||13421823;else var Z=a.backgroundColor||15790320;var _=L.getContext("2d"),ab=-1!==window.location.hostname.search(/meta\-calculator\.off$/),bb=ab?"localhost:8080":"metacalc-prod.herokuapp.com",cb="http://"+bb+"/graph?callback=?&q=",db=a.graphSize.width||600,eb=a.graphSize.height||600,fb=a.graphSize.top||150,gb=a.graphSize.left||150,hb=Z,ib=(a.colors||[10027008,1441905,8585365,1008128,6179328,2857680,32870],a.bounds||{xMin:-4,xMax:4,yMin:-4,yMax:4}),jb=!a.hideGrid,kb=(a.equations||["y=0"],a.points||[]),lb=a.polarPoints||[],mb=a.domains||[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],nb=a.ranges||[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],ob=hb>>16&255,pb=hb>>8&255,qb=255&hb,rb=1,sb=!!a.isXAxisPi,tb=!!a.isYAxisPi,ub="π",vb=!1,wb={scaleX:1,scaleY:1,times:1};switch(a.scale){case"L":"L"!==lastGraphType&&(ib.xMin=-10,ib.xMax=10,ib.yMin=-7.28,ib.yMax=7.28),vb=!1;break;case"SX":wb.scaleX=10,wb.times=4,ib.xMin<1&&(ib.xMax+=1-ib.xMin,ib.xMin=1),ib.xMax<30&&(ib.xMax=Math.pow(wb.scaleX,wb.times)),vb=!0;break;case"SY":wb.scaleY=10,wb.times=4,ib.yMin<1&&(ib.yMax+=1-ib.yMin,ib.yMin=1),ib.yMax<30&&(ib.yMax=Math.pow(wb.scaleY,wb.times)),vb=!0;break;case"LL":wb.scaleX=10,wb.scaleY=10,wb.times=4,ib.xMin<1&&(ib.xMax+=1-ib.xMin,ib.xMin=1),ib.xMax<30&&(ib.xMax=Math.pow(wb.scaleX,wb.times)),ib.yMin<1&&(ib.yMax+=1-ib.yMin,ib.yMin=1),ib.yMax<30&&(ib.yMax=Math.pow(wb.scaleY,wb.times)),vb=!0;break;default:vb=!1}lastGraphType=a.scale,$("#panel-102-graph .txtXMin").val(ib.xMin),$("#panel-102-graph .txtXMax").val(ib.xMax),$("#panel-102-graph .txtYMin").val(ib.yMin),$("#panel-102-graph .txtYMax").val(ib.yMax);var xb=db;db=633;var yb=q(-gb),zb=q(db+gb);if(ib.xMin=yb,ib.xMax=zb,db=xb,xb=eb,eb=461,yb=r(eb+fb),zb=r(-fb),ib.yMin=yb,ib.yMax=zb,eb=xb,G(),c&&"undefined"!=typeof window.last_metacalc_data)H(window.last_metacalc_data);else{var Ab=+new Date;K(a,H,cb);var Bb=+new Date,Cb=Bb-Ab;console.log("Time Total: "+Cb)}}else $("#panel-102-graph .messages .graphError").show()};if(function($){window.MetaCalcWeb=metaCalc.createClass({initialize:function MetaCalcWeb(){var self=this;self.memory=0,self.panels={},self.panelPrototypes={Panel_101_Equations:function(){var a=this;this.txtActiveEquation=null,this.errInvalidInequation="Inequations must be in the form y = f(x)",this.errInvalidDomain="Domain minimum should be lesser than maximum.",this.errInvalidRange="Range minimum should be lesser than maximum.",this.errEquation="Equation ",this.init=function(){$(".txtEquation1, .txtEquation2, .txtEquation3, .txtEquation4, .txtEquation5, .txtEquation6, .txtEquation7, .btnBackspace1, .btnBackspace2, .btnBackspace3, .btnBackspace4, .btnBackspace5, .btnBackspace6, .btnBackspace7",$("#panel-101-equations").get(0)).click(a.onEquationSelect),$(".btnDivide, .btnMultiply, .btnMinus, .btnPlus, .btnPower, .btnGt, .btnLt, .btnGe, .btnLe, .btnEquals",$("#panel-101-equations").get(0)).click(this.createHandler("op")),$(".btnSin, .btnCos, .btnTan, .btnCsc, .btnSec, .btnCot, .btnSinh, .btnCosh, .btnTanh, .btnCsch, .btnSech, .btnCoth, .btnLn, .btnLog10, .btnLog2, .btnSqrt, .btnAbs",$("#panel-101-equations").get(0)).click(this.createHandler("func")),$(".btn6, .btn7, .btn8, .btn9, .btn4, .btn5, .btn1, .btn2, .btn3, .btn0, .btnDecimal, .btnPercent, .btnPi, .btnE, .btnParenLeft, .btnParenRight, .btnX, .btnY, .btnR, .btnT",$("#panel-101-equations").get(0)).click(this.createHandler("asis")),$(".btnSinInv, .btnCosInv, .btnTanInv, .btnCscInv, .btnSecInv, .btnCotInv, .btnSinhInv, .btnCoshInv, .btnTanhInv, .btnCschInv, .btnSechInv, .btnCothInv",$("#panel-101-equations").get(0)).click(this.createHandler("inv")),$(".btnEx, .btnX2, .btnX3, .btnY2, .btnY3",$("#panel-101-equations").get(0)).click(this.createHandler("spcl")),$("#panel-101-equations .txtEquation").keyup(function(){var a=$(this),b=a.val();PanelAlerts.setObj(a,"panel-101-equations"),PanelAlerts.validate(b),/\br\b/i.test(b)||/\bt\b/i.test(b)?($(this).nextAll(".lblDomainVariable:eq(0)").html("&lt; &theta; &lt;"),$(this).nextAll(".lblRangeVariable:eq(0)").html("&lt; r &lt;")):($(this).nextAll(".lblDomainVariable:eq(0)").html("&lt; x &lt;"),$(this).nextAll(".lblRangeVariable:eq(0)").html("&lt; y &lt;"))}),$("#panel-101-equations .btnReset").click(function(){$("#panel-101-equations input[type=text]").val("")}),$("#panel-101-equations .content").keypress(function(a){13==a.which&&jQuery("#panel-101-equations .btnGraph").click()}),$("#panel-101-equations .btnGraph").click(function(){metacalc.panels.Panel_101_Equations.checkEquationFormat(),PanelManager.AddHistory("#panel-101-equations"),metacalc.panels.Panel_102_Graph.activate()}),this.txtActiveEquation=$("#panel-101-equations .txtEquation1")},this.checkEquationFormat=function(){$("#panel-101-equations .txtEquation").each(function(){var a=$(this).val(),b=!!/[=<>≤≥]/.test(a);a.length>0&&!b&&$(this).val("y="+a)})},this.activate=function(b){a.txtActiveEquation&&a.txtActiveEquation.focus(),PanelManager.activatePanel("#panel-101-equations",b,!0),PanelManager.AddHistory("#panel-101-equations")},this.deactivate=function(){},this.onEquationSelect=function(b){if(b.currentTarget.className.match(/btn/)){var c=b.currentTarget.className.match(/Backspace([0-9])$/)[1],d=$("#panel-101-equations .txtEquation"+c);if(d.val(d.val().substr(0,d.val().length-1)),d==a.txtActiveEquation)return;a.txtActiveEquation=d,d.focus()}else{if(b.currentTarget==a.txtActiveEquation.get(0))return;a.txtActiveEquation=$(b.currentTarget)}},this.createHandler=function(b){return"asis"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);d+=/[0-9xytreiπθ\)]$/.test(d)&&/^[a-z]/.test($(b.currentTarget).text())||/[%\!]$/.test(d)?" * "+$(b.currentTarget).text():$(b.currentTarget).text(),c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:"op"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);d=","==$(b.currentTarget).text()?d.replace(/ *$/,"")+$(b.currentTarget).text()+" ":d.replace(/ *$/,"")+" "+$(b.currentTarget).text()+" ",c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:"spcl"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start),e="";"ex"==$(b.currentTarget).text()?e="exp(":"x2"==$(b.currentTarget).text()?e="x ^ 2":"x3"==$(b.currentTarget).text()?e="x ^ 3":"y2"==$(b.currentTarget).text()?e="y ^ 2":"y3"==$(b.currentTarget).text()&&(e="y ^ 3"),/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(d)&&/[\(]$/.test(e)?d=e+d+")":d+=/[0-9ei%!\)]$/.test(d)&&/[\(]$/.test(e)?" × "+e:e,c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:"func"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(d)?d=$(b.currentTarget).text()+"("+d+")":d+=/[0-9ei%!\)]$/.test(d)?" * "+$(b.currentTarget).text()+"(":$(b.currentTarget).text()+"(",c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:"inv"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(d)?d="a"+$(b.currentTarget).text().match(/[a-z]*/)[0]+"("+d+")":d+=/[0-9ei%!\)]$/.test(d)?" × a"+$(b.currentTarget).text().match(/[a-z]*/)[0]+"(":"a"+$(b.currentTarget).text().match(/[a-z]*/)[0]+"(",c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:null},this.getEquations=function(){var a=[],b=[],c=this,d=new MathProcessor;return $("#panel-101-equations .txtEquation").each(function(e){var f=$(this).val();if(!f)return void a.push(f);if(metaCalc.utils.isInequation(f)&&!metaCalc.utils.isEquationInFxForm(f))throw new Error(c.errInvalidInequation);var g=metaCalc.utils.isPolar(f)?["r","t"]:["x","y"],h=new MathParser(g),i="",j="checked"==$("#"+$("#panel-101-equations .lblDegrees").attr("for")).attr("checked");f=f.replace(/\b(a?(sin|cos|tan|csc|sec|cot)h?\s*?)x\b/g,"$1(x)"),j&&(f=f.replace(/\b(a?(sin|cos|tan|csc|sec|cot)h?)\b/g,"$1d")),f=f.replace("xy","x*y").replace("yx","y*x").replace("≥",">=").replace("≤","<=").replace(/π/g,"pi").replace("θ","t").replace(/log2/g,"logtwo").replace(/log10/g,"logten").replace(/([0-9\)]) *([\(a-z])/gi,"$1*$2").replace(/\b(r|t|x|y|e|pi) +([a-z0-9])/gi,"$1*$2").replace(/\bpi\b/g,Math.PI),f=d.replaceVerticalBars(f),a.push(f);var k=f;metaCalc.utils.isInequation(f)&&(i=metaCalc.utils.getInequalitySign(f),k=f.replace(i,"="));var l=k.split("="),m=l[0]+"-("+l[1]+")",n=h.doCompile(m);if(h.iserror)throw new Error(this.errEquation+(e+1)+": "+h.errorMes);b.push(n)}),c._compiledObjects=b,a},this.getCompiledObjects=function(){return a._compiledObjects?a._compiledObjects:(this.getEquations(),a._compiledObjects)},this.getDomains=function(){var a="checked"==$("#"+$("#panel-101-equations .lblDegrees").attr("for")).attr("checked"),b=[],c=[];$("#panel-101-equations .txtDomain1").each(function(){b.push(metaCalc.utils.piEval($(this).val(),a))}),$("#panel-101-equations .txtDomain2").each(function(){c.push(metaCalc.utils.piEval($(this).val(),a))});for(var d=[],e=0;e<b.length;e++){if(isNaN(b[e])&&(b[e]=String(-1/0)),isNaN(c[e])&&(c[e]=String(1/0)),b[e]>c[e])throw new Error(this.errInvalidDomain);d.push([b[e],c[e]])}return d},this.getRanges=function(){var a="checked"==$("#"+$("#panel-101-equations .lblDegrees").attr("for")).attr("checked"),b=[],c=[];$("#panel-101-equations .txtRange1").each(function(){b.push(metaCalc.utils.piEval($(this).val(),a))}),$("#panel-101-equations .txtRange2").each(function(){c.push(metaCalc.utils.piEval($(this).val(),a))});for(var d=[],e=0;e<b.length;e++){if(isNaN(b[e])&&(b[e]=String(-1/0)),isNaN(c[e])&&(c[e]=String(1/0)),b[e]>c[e])throw new Error(this.errInvalidRange);d.push([b[e],c[e]])}return d}},Panel_102_Graph:function(){var a=this;this.errXMinGTEXMax="X-Min cannot be greater than or equal to X-Max.",this.errYMinGTEYMax="Y-Min cannot be greater than or equal to Y-Max.",this.errInvalidScale="Please enter a value greater than zero.",this.errNoEquationOrPoints="Please enter at least one equation or one Point.",this.errInvalidInequationForm="Equation %d : Inequations must be in the form y = f(x).",this.errNumberNotValid="At least one number is not valid.",this.errValueGreatZeroX="Enter a value greater than zero for X-Scale.",this.errValueGreatZeroY="Enter a value greater than zero for Y-Scale.",this.errOperationTakingToLongRespond="The operation is taking too long to respond, do you want to proceed?",this.errLogLogOnlySuportExplicit="Log-log Scale is only supported for explicit Equations.",this.errNotSuportImplicitEq="Implicit equations are currently not supported.",this.errloading="The operation is taking too long to respond.",this.CANVAS={WIDTH:949,HEIGTH:691,TOP:115,LEFT:158,CACHE:null},this.CANVAS.INNERWIDTH=this.CANVAS.WIDTH-2*this.CANVAS.LEFT,this.CANVAS.INNERHEIGHT=this.CANVAS.HEIGTH-2*this.CANVAS.TOP,window.GRAPH_SIZES=window.GRAPH_SIZES||[],window.GRAPH_SIZES.graph={width:a.CANVAS.WIDTH,height:a.CANVAS.HEIGTH,top:a.CANVAS.TOP,left:a.CANVAS.LEFT},this.init=function(){function b(a,b){return Math.log(a)/Math.log(b.scaleX)}function c(a,b){return Math.log(a)/Math.log(b.scaleY)}function d(a,c,d){return d.scaleX>1?c*b(a/d.xMin,d)/l:(a-d.xMin)/(d.xMax-d.xMin)*c}function e(a,b,d){return d.scaleY>1?b-b*c(a/d.yMin,d)/m:(d.yMax-a)/(d.yMax-d.yMin)*b}function f(a,b,c){return c.scaleX>1?c.xMin*Math.pow(c.scaleX,l*a/b):a/(b/(c.xMax-c.xMin))+c.xMin}function g(a,b,c){if(c.scaleY>1){var d=b-a;return c.yMin*Math.pow(c.scaleY,m*d/b)}return c.yMax-a/(b/(c.yMax-c.yMin))}var h,i,j,k,l,m;$("#panel-102-graph .graphWindow").css({overflow:"hidden",position:"relative",width:a.CANVAS.INNERWIDTH,height:a.CANVAS.INNERHEIGHT}).find("canvas").attr("width",a.CANVAS.WIDTH).attr("height",a.CANVAS.HEIGTH).css({position:"absolute",left:-a.CANVAS.LEFT,top:-a.CANVAS.TOP}),$("#panel-102-graph .graphWindow canvas").draggable({opacity:.5,start:function(d,e){k=a.getBounds(),i=[e.position.left+a.CANVAS.LEFT,e.position.top+a.CANVAS.TOP],l=b(k.xMax/k.xMin,k),m=c(k.yMax/k.yMin,k);metaCalc.utils.piEval},drag:function(b,c){j=[c.position.left+a.CANVAS.LEFT,c.position.top+a.CANVAS.TOP],h=[j[0]-i[0],j[1]-i[1]];var k=a.getBounds();if(1==k.scaleX){var n=d(0,633,k);h[0]+=n;var o=f(h[0],633,k);k.xMin-=o,k.xMax-=o}else{var p=f(-h[0],633,k);k.xMax=f(-h[0]+633,633,k),k.xMin=p,k.xMin<1&&(j[0]=c.position.left+a.CANVAS.LEFT-j[0],c.position.left=-a.CANVAS.LEFT,k.xMin=1,k.xMax=Math.pow(k.scaleX,l))}if(1==k.scaleY){var q=e(0,461,k);h[1]+=q;var r=g(h[1],461,k);k.yMin-=r,k.yMax-=r}else{var p=g(-h[1]+461,461,k);k.yMax=g(-h[1],461,k),k.yMin=p,k.yMin<1&&(j[1]=c.position.top+a.CANVAS.TOP-j[1],c.position.top=-a.CANVAS.TOP,k.yMin=1,k.yMax=Math.pow(k.scaleY,m))}$("#panel-102-graph .txtXMin").val(k.xMin),$("#panel-102-graph .txtXMax").val(k.xMax),$("#panel-102-graph .txtYMin").val(k.yMin),$("#panel-102-graph .txtYMax").val(k.yMax),i=j},stop:function(){var b=$("#panel-102-graph .graphWindow canvas").position();if(!(b.top>=2*-a.CANVAS.TOP&&b.top<=0&&b.left>=2*-a.CANVAS.LEFT&&b.left<=0)){var c=$.Deferred();c.then(function(){$("#panel-102-graph .graphWindow canvas").css({left:-a.CANVAS.LEFT,top:-a.CANVAS.TOP})}),a.drawGraphWithLoading(!1,c)}}}),$("#panel-102-graph .btnGoBack").click(function(){metacalc.panels.Panel_101_Equations.activate(PanelTransitions.SLIDE_RIGHT)}),$("#panel-102-graph #x-axis-pi").change(function(){a.drawGraphWithLoading(!0)}),$("#panel-102-graph #y-axis-pi").change(function(){a.drawGraphWithLoading(!0)}),$("#panel-102-graph #showGrid").change(function(){a.drawGraphWithLoading(!0)}),$("#panel-102-graph #scale-type").change(function(){var b=$(this).val();switch(b){case"LL":$("#panel-102-graph .txtXScale").val(1).attr("disabled",!0),$("#panel-102-graph .txtYScale").val(1).attr("disabled",!0);break;case"SX":$("#panel-102-graph .txtXScale").val(1).attr("disabled",!0),$("#panel-102-graph .txtYScale").removeAttr("disabled");break;case"SY":$("#panel-102-graph .txtYScale").val(1).attr("disabled",!0),$("#panel-102-graph .txtXScale").removeAttr("disabled");break;case"L":default:$("#panel-102-graph .txtXScale").removeAttr("disabled"),$("#panel-102-graph .txtYScale").removeAttr("disabled")}a.changeZoom(),a.drawGraphWithLoading(!1)}),$("#panel-102-graph .btnZoomIn").click(function(){$("#panel-102-graph .txtXScale").val((parseFloat($("#panel-102-graph .txtXScale").val())||0)/2),$("#panel-102-graph .txtYScale").val((parseFloat($("#panel-102-graph .txtYScale").val())||0)/2),a.changeZoom(),a.drawGraphWithLoading()}),$("#panel-102-graph .btnZoomOut").click(function(){$("#panel-102-graph .txtXScale").val(2*(parseFloat($("#panel-102-graph .txtXScale").val())||0)),$("#panel-102-graph .txtYScale").val(2*(parseFloat($("#panel-102-graph .txtYScale").val())||0)),a.changeZoom(),a.drawGraphWithLoading()}),$("#panel-102-graph .btnReset").click(function(){$("#panel-102-graph .txtXScale").val("1"),$("#panel-102-graph .txtYScale").val("1"),$("#panel-102-graph .txtXMin").val("-10"),$("#panel-102-graph .txtXMax").val("10"),$("#panel-102-graph .txtYMin").val("-7.28"),$("#panel-102-graph .txtYMax").val("7.28"),$("#panel-102-graph .graphWindow canvas").css({left:-a.CANVAS.LEFT,top:-a.CANVAS.TOP}),a.cacheScales=[1,1],a.drawGraphWithLoading()});var n=null;$(".txtXMin, .txtYMin, .txtXMax, .txtYMax",$("#panel-102-graph").get(0)).keyup(function(){a.IsLoading||(null!=n&&clearTimeout(n),n=setTimeout(function(){a.changeBounds(),a.drawGraphWithLoading()},1e3))}),$(".txtXScale, .txtYScale",$("#panel-102-graph").get(0)).keyup(function(){a.IsLoading||(null!=n&&clearTimeout(n),n=setTimeout(function(){a.changeZoom(),a.drawGraphWithLoading()},1e3))})},this.cacheScales=[1,1],this.changeBounds=function(){var b=metaCalc.utils.piEval,c=b($("#panel-102-graph .txtXMin").val()),d=b($("#panel-102-graph .txtYMin").val()),e=b($("#panel-102-graph .txtXMax").val()),f=b($("#panel-102-graph .txtYMax").val()),g=($("#panel-102-graph #scale-type").val(),e-c),h=f-d;g=Math.round(g/10/2*4)/4,h=Math.round(h/7.28/2*4)/4,$("#panel-102-graph .txtXScale").val(g),$("#panel-102-graph .txtYScale").val(h),a.cacheScales=[g,h]},this.changeZoom=function(){var b=metaCalc.utils.piEval,c=b($("#panel-102-graph .txtXMin").val()),d=b($("#panel-102-graph .txtYMin").val()),e=b($("#panel-102-graph .txtXMax").val()),f=b($("#panel-102-graph .txtYMax").val()),g=b($("#panel-102-graph .txtXScale").val()),h=b($("#panel-102-graph .txtYScale").val()),i=$("#panel-102-graph #scale-type").val();if(isNaN(g)||isNaN(h))throw new Error("At least one scale is not valid.");if(0>=g)throw new Error(a.errValueGreatZeroX);if(0>=h)throw new Error(a.errValueGreatZeroY);g||(g=1),h||(h=1),1!==a.cacheScales[0]&&(c/=a.cacheScales[0],e/=a.cacheScales[0]),1!==a.cacheScales[1]&&(d/=a.cacheScales[1],f/=a.cacheScales[1]);var j={};if("L"===i||"SY"===i){var k=(e-c)*g;j.xMin=(e+c-k)/2,j.xMax=j.xMin+k,j.scaleX=1}else{j.scaleX=10,1>c&&(e+=1-c,c=1),30>e&&(e=Math.pow(j.scaleX,4));var l=Math.log(e/c)/Math.log(j.scaleX)*g;j.xMin=c,j.xMax=j.xMin*Math.pow(j.scaleX,l)}if("L"===i||"SX"===i){var m=(f-d)*h;j.yMin=(f+d-m)/2,j.yMax=j.yMin+m,j.scaleY=1}else{j.scaleY=10,1>d&&(f+=1-d,d=1),30>f&&(f=Math.pow(j.scaleY,4));var l=Math.log(f/d)/Math.log(j.scaleY)*h;j.yMin=d,j.yMax=j.yMin*Math.pow(j.scaleY,l)}$("#panel-102-graph .txtXMin").val(j.xMin),$("#panel-102-graph .txtYMin").val(j.yMin),$("#panel-102-graph .txtXMax").val(j.xMax),$("#panel-102-graph .txtYMax").val(j.yMax),a.cacheScales=[g,h]},this.getBounds=function(){var b=metaCalc.utils.piEval,c=b($("#panel-102-graph .txtXMin").val()),d=b($("#panel-102-graph .txtYMin").val()),e=b($("#panel-102-graph .txtXMax").val()),f=b($("#panel-102-graph .txtYMax").val()),g=$("#panel-102-graph #scale-type").val();if(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f))throw new Error(a.errNumberNotValid);var h={};if("L"===g||"SY"===g)h.xMin=c,h.xMax=e,h.scaleX=1;else{h.scaleX=10,1>c&&(e+=1-c,c=1),30>e&&(e=Math.pow(h.scaleX,4));var i=Math.log(e/c)/Math.log(h.scaleX);h.xMin=c,h.xMax=h.xMin*Math.pow(h.scaleX,i)}if("L"===g||"SX"===g)h.yMin=d,h.yMax=f,h.scaleY=1;else{h.scaleY=10,1>d&&(f+=1-d,d=1),30>f&&(f=Math.pow(h.scaleY,4));var i=Math.log(f/d)/Math.log(h.scaleY);h.yMin=d,h.yMax=h.yMin*Math.pow(h.scaleY,i)
}return h},this.getScale=function(){var a=$("#panel-102-graph #scale-type");return a.val()},this.drawGraphWithLoading=function(b,c){a.IsLoading=!0;var d=$(".loading");$(".loadingMessage",d).show(),$(d).slideDown("slow",function(){a.drawGraph(b,c),d.hide(),a.IsLoading=!1})},this.getGraphObject=function(){var b=metacalc.panels.Panel_101_Equations.getEquations(),c=metacalc.panels.Panel_101_Equations.getDomains(),d=metacalc.panels.Panel_101_Equations.getRanges(),e=metacalc.panels.Panel_106_PointPlotter.getPoints(),f=metacalc.panels.Panel_106_PointPlotter.getPolarPoints();e=e.concat(metacalc.panels.Panel_105_Intersection.getPoints());var g=$("#panel-102-graph #showGrid").is(":checked"),h=a.getScale(),i=a.getBounds();if(i.xMin>=i.xMax)throw new Error(a.errXMinGTEXMax);if(i.yMin>=i.yMax)throw new Error(a.errXMinGTEYMax);var j=!1;if($("#panel-101-equations .txtEquation").each(function(){$(this).val()&&(j=!0)}),0==j&&0==e.length&&0==f.length)throw new Error(a.errNoEquationOrPoints);var k={bounds:i,equations:b,domains:c,ranges:d,points:e,polarPoints:f,scale:h,hideGrid:!g,isXAxisPi:$("#panel-102-graph #x-axis-pi").is(":checked"),isYAxisPi:$("#panel-102-graph #y-axis-pi").is(":checked")};return k},this.drawGraph=function(b,c){try{c=c||$.Deferred(),c.done(function(){a.fromHistory||PanelManager.AddHistory("#panel-102-graph"),a.fromHistory=!1});var d=this.getGraphObject();doGraph(d,"graph",b,void 0,c)}catch(e){alert(e.message),$(".loading").hide()}},this.activate=function(b,c){try{this.fromHistory=c,$("#panel-102-graph .graphWindow").css({overflow:"hidden",position:"relative",width:a.CANVAS.INNERWIDTH,height:a.CANVAS.INNERHEIGHT}).find("canvas").attr("width",a.CANVAS.WIDTH).attr("height",a.CANVAS.HEIGTH).css({position:"absolute",left:-a.CANVAS.LEFT,top:-a.CANVAS.TOP}),this.drawGraphWithLoading()}catch(d){if($(document.activeElement).parents("#panel-101-equations").length>0){var e=$(document.activeElement);$(e).addClass("input-error")}alert(d.message),$(e).removeClass("input-error"),$(".loading").hide()}},this.deactivate=function(){return!0}},Panel_103_TableInput:function(){this.errInvalidEquationForTable="Table can be created only for equations in y = f(x) form.";var a=this;a.fromHistory=!1,PanelManager.panels["#panel-103-table-input"]={load:function(a){$.each(a.eqs||[],function(a,b){$("#panel-101-equations .txtEquation"+(a+1)).val(b)}),metacalc.panels.Panel_103_TableInput.fromHistory=!0,metacalc.panels.Panel_103_TableInput.activate()},save:function(){var a={eqs:[]},b=metacalc.panels.Panel_101_Equations.getEquations();return $.each(b,function(b,c){null!=c&&""!=c&&a.eqs.push(c.trim())}),a}},this.init=function(){$("#panel-103-table-input .btnCreateTable").click(function(){metacalc.panels.Panel_104_TableOutput.activate()})},this.processEquations=function(a){$(".lblEquation1, .lblEquation2, .lblEquation3, .lblEquation4, .lblEquation5, .lblEquation6, .lblEquation7",$("#panel-103-table-input").get(0)).each(function(b){b<a.length?($(this).show(),$("#"+$(this).attr("for")).show().attr("data-index",b)):($(this).hide(),$("#"+$(this).attr("for")).hide()),$(this).html($("#panel-101-equations .lblEquation"+(b+1)).text()+" "+a[b])})},this.activate=function(a){try{var b="",c=0,d=metacalc.panels.Panel_101_Equations.getEquations();if(errNoEquation="Please enter at least one equation.",$("#panel-101-equations .txtEquation").each(function(){$(this).val()&&(hasAtLeastOneEquation=!0,b=$(this).val(),c++)}),1>c)throw new Error(errNoEquation);this.processEquations(d),1==c&&""!=b?$("#panel-103-table-input .btnCreateTable").click():c>1&&(metacalc.panels.Panel_103_TableInput.fromHistory?metacalc.panels.Panel_103_TableInput.fromHistory=!1:PanelManager.AddHistory("#panel-103-table-input"),PanelManager.activatePanel("#panel-103-table-input",a,!0))}catch(e){alert(e.message)}},this.getSelectedEquationWithLabel=function(){return $("label[for='"+$('input[name="graphing_table_input"]:checked').attr("id")+"']").html()},this.getSelectedEquation=function(){var a=this.getSelectedEquationWithLabel().split("<br>");if(a=a[a.length-1],!metaCalc.utils.isEquationInFxForm(a))throw new Error(this.errInvalidEquationForTable);return a},this.getSelectedEquationCompiledObject=function(){return metacalc.panels.Panel_101_Equations.getCompiledObjects()[$('input[name="graphing_table_input"]:checked').attr("data-index")]},this.deactivate=function(){return!0}},Panel_104_TableOutput:function(){this.fromHistory=!1,this.historyCords=null,PanelManager.panels["#panel-104-table-output"]={load:function(a){$('input[name="graphing_table_input"][value="1"]').prop("checked",!0),$("#panel-101-equations .txtEquation1").val(a.eq),$("#panel-104-table-output .txtStartXAt").val(a.start),$("#panel-104-table-output .txtIntervalOfX").val(a.step),metacalc.panels.Panel_104_TableOutput.fromHistory=!0;var b=[];$.each(a.cords||[],function(a,c){b.push({key:a,val:c})}),metacalc.panels.Panel_103_TableInput.processEquations([a.eq]),metacalc.panels.Panel_104_TableOutput.historyCords=b,metacalc.panels.Panel_104_TableOutput.activate(PanelTransitions.SLIDE_RIGHT)},save:function(){var a=metacalc.panels.Panel_103_TableInput.getSelectedEquation(),b=$("#panel-104-table-output .txtStartXAt").val(),c=$("#panel-104-table-output .txtIntervalOfX").val(),d={eq:a.trim(),start:b,step:c,cords:metacalc.panels.Panel_104_TableOutput.getCordsOfX()};return d}},this.init=function(){$("#panel-104-table-output .btnGoBack").click(function(){metacalc.panels.Panel_103_TableInput.activate(PanelTransitions.SLIDE_RIGHT)}),$("#panel-104-table-output .txtStartXAt, #panel-104-table-output .txtIntervalOfX, #panel-104-table-output .txtEstimationX").on("keyup",$.proxy(this.onEstimation,this))},this.getCordsOfX=function(){var a=[];return $("#panel-104-table-output .txtEstimationX").each(function(b,c){a.push(String(Math.round(1e4*$(c).val())/1e4))}),a},this.processEstimation=function(a){var b=new MathParser(["x"]),c=this.compiledObj,d=$("#panel-104-table-output");$.each(a,function(a,e){var f=metaCalc.utils.piEval(e.val);d.find(".txtEstimationX_"+e.key).val(String(Math.round(1e4*f)/1e4)),d.find(".txtEstimationY_"+e.key).val(String(Math.round(1e4*b.doEval(c,[f]))/1e4))})},this.onEstimation=function(a){var b=(new MathParser(["x"]),$("#panel-104-table-output .txtStartXAt")),c=$("#panel-104-table-output .txtIntervalOfX"),d=0,e=0;if(a&&a.currentTarget!=b.get(0)&&a.currentTarget!=c.get(0)){d=a.target.className.match(/X_([0-9]*)$/)[1];var f=metaCalc.utils.piEval(a.target.value);if(isNaN(f))return;this.processEstimation([{key:d,val:f}])}else{var g=metaCalc.utils.piEval(b.val()),h=metaCalc.utils.piEval(c.val());if(isNaN(g)||isNaN(h))return;$("#panel-104-table-output .txtEstimationX").each(function(){e++});var i=[];if(this.fromHistory&&$.isArray(this.historyCords)&&(i=this.historyCords,this.historyCords=null),i.length<e)for(d=i.length;e>d;d++)i.push({key:d,val:g+h*d});this.processEstimation(i)}},this.activate=function(a){try{var b=metacalc.panels.Panel_103_TableInput.getSelectedEquationWithLabel(),c=metacalc.panels.Panel_103_TableInput.getSelectedEquation();$("#panel-104-table-output .lblEquation1").html(b),$("#panel-104-table-output .txtEstimation").attr("tabindex","-1"),this._equation=c.replace(/^.*\=/,"");{new MathParser(["x"])}this.compiledObj=new MathParser(["x"]).doCompile(this._equation).PolishArray,this.onEstimation(),this.fromHistory?this.fromHistory=!1:PanelManager.AddHistory("#panel-104-table-output"),PanelManager.activatePanel("#panel-104-table-output",a,!0)}catch(d){alert(d.message)}},this.deactivate=function(){return!0}},Panel_105_Intersection:function(){var a=this;this.errInvalidEquationForIntersection="Points of intersections can be found only for equations in y = f(x) form.",this.errTooManyIntersections="Too many intersections to list.",this.errNoIntersections="No intersections found on the current graph.",this.fromHistory=!1,PanelManager.panels["#panel-105-intersection"]={load:function(a){metacalc.panels.Panel_105_Intersection.fromHistory=!0,$.each(a.eqs||[],function(a,b){$("#panel-101-equations .txtEquation"+(a+1)).val(b)}),metacalc.panels.Panel_105_Intersection.activate(PanelTransitions.SLIDE_RIGHT)}},this.init=function(){$("#panel-105-intersection .btnPlotPointsOfIntersection").click(function(){try{a.findPointsOfIntersection(),PanelManager.activatePanel("#panel-102-graph",PanelTransitions.SLIDE_RIGHT,!0),metacalc.panels.Panel_102_Graph.activate(PanelTransitions.SLIDE_RIGHT)}catch(b){alert(b.message)}}),$("#panel-105-intersection .btnEquation").click(function(){$("#panel-105-intersection .btnEquation:checked").each(function(){this.checked=!1}),a.lastChecked.checked=!0,this.checked=!0,a.lastChecked=this}),a.lastChecked=$("#panel-105-intersection .btnEquation1").get(0)},this.activate=function(){try{var a=metacalc.panels.Panel_101_Equations.getEquations();errNoAtLeastTwoEquation="Please enter at least two equations.";var b=0;if($("#panel-101-equations .txtEquation").each(function(){$(this).val()&&b++}),2>b)throw new Error(errNoAtLeastTwoEquation);$(".lblEquation1, .lblEquation2, .lblEquation3, .lblEquation4, .lblEquation5, .lblEquation6, .lblEquation7",$("#panel-105-intersection").get(0)).each(function(b){b<a.length?($(this).show(),$("#"+$(this).attr("for")).show().attr("data-index",b)):($(this).hide(),$("#"+$(this).attr("for")).hide()),$(this).html($("#panel-101-equations .lblEquation"+(b+1)).text()+" "+a[b])});var c={eqs:[]};$.each(a,function(a,b){null!=b&&""!=b&&c.eqs.push(b.trim())}),this.fromHistory?this.fromHistory=!1:PanelManager.AddHistory("#panel-105-intersection",c)}catch(d){alert(d.message)}},this.getPoints=function(){var a=this._points||[];return this._points=[],a},this.findPointsOfIntersection=function(){var a=new MathParser(["x"]),b=$("#panel-105-intersection .btnEquation:checked"),c=b.eq(0).attr("data-index"),d=b.eq(1).attr("data-index"),e=metacalc.panels.Panel_101_Equations.getEquations();if(!metaCalc.utils.isEquationInFxForm(e[c])||!metaCalc.utils.isEquationInFxForm(e[d]))throw new Error(this.errInvalidEquationForIntersection);var f=a.doCompile(e[c].replace(/^.*\=/,"")),g=a.doCompile(e[d].replace(/^.*\=/,"")),h=[],i=metacalc.panels.Panel_102_Graph.getBounds(),j=(i.xMax-i.xMin)/100;console.log(i,j);var k,l,m,n,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=!1,y=3,z=0,A=[],B=[],C=[];for(k=i.xMin;k<=i.xMax;k+=j)A.push(Math.round(100*k)/100);var D=100,E=function(a){return a>=i.yMin&&a<=i.yMax},F=function(a){var b=void 0,c=void 0;return b=Math.round(1e4*a),c=b/1e4};for(k=1;D>=k;){x=!1;var G=0;t=A[k],o=a.doEval(f.PolishArray,[t]),p=a.doEval(g.PolishArray,[t]),q=t,r=o,s=p;var H=u>v&&p>=o||v>u&&o>=p;if((E(o)&&E(p)||E(u)&&E(v))&&(++y,H)){for(console.log("crossover");0==x&&12>G;)++G,void 0==o||void 0==p?x=!0:F(o)==F(p)?(console.log("found: ( "+t+", "+o+" )"),B[z]=F(t),C[z]=F(o),++z,x=!0):(u>v&&p>o||v>u&&o>p)&&(l=(w+t)/2,m=a.doEval(f.PolishArray,[t]),n=a.doEval(g.PolishArray,[t]),u>v&&p>o?(console.log("	CROSSOVER a ["+G+"] , midx = "+l+" , midy1 = "+m+" , midy2 = "+n),F(m)>F(n)?(w=l,u=m,v=n):(t=l,o=m,p=n)):v>u&&o>p&&(console.log("	CROSSOVER b ["+G+"] , midx = "+l+" , midy1 = "+m+" , midy2 = "+n),F(m)<F(n)?(w=l,u=m,v=n):(t=l,o=m,p=n)));0==x&&(B[z]=F(l),C[z]=F(m),++z)}w=q,u=r,v=s,++k}if(z>200)throw new Error(this.errTooManyIntersections);if(0>=z)throw new Error(this.errNoIntersections);for(h.push([B[0],C[0]]),k=1;z>k;)h.push([B[k],C[k]]),++k;this._points=h},this.deactivate=function(){return!0}},Panel_106_PointPlotter:function(){this.init=function(){$("#panel-106-point-plotter .btnPlotPoints").click(function(){PanelManager.activatePanel("#panel-102-graph",PanelTransitions.SLIDE_RIGHT,!0),metacalc.panels.Panel_102_Graph.activate(PanelTransitions.SLIDE_RIGHT)}),$("#panel-106-point-plotter input[type=text]").keypress(function(a){13==a.which&&$("#panel-106-point-plotter .btnPlotPoints").focus().click()})},this.activate=function(a){try{PanelManager.activatePanel("#panel-106-point-plotter",a,!0),PanelManager.AddHistory("#panel-106-point-plotter")}catch(b){alert(b.message)}},this.deactivate=function(){return!0},this.getPoints=function(){var a,b,c,d=[],e=0;for($("#panel-106-point-plotter .txtPointX").each(function(){e++}),a=0;e>a;a++)b=$("#panel-106-point-plotter .txtPointX_"+a).val(),c=$("#panel-106-point-plotter .txtPointY_"+a).val(),b&&c&&d.push([metaCalc.utils.piEval(b),metaCalc.utils.piEval(c)]);return d},this.getPolarPoints=function(){var a,b,c,d=[],e=0;for($("#panel-106-point-plotter .txtPointR").each(function(){e++}),a=0;e>a;a++)b=$("#panel-106-point-plotter .txtPointR_"+a).val(),c=$("#panel-106-point-plotter .txtPointT_"+a).val(),b&&c&&d.push([metaCalc.utils.piEval(b),metaCalc.utils.piEval(c)]);return d}},Panel_201_Calculator:function(){var a=this,b="",c="",d="";this.errStackOverflow="Stack overflow occured.\n\nPossible causes:\n* Factorial of large numbers cannot be calculated.",this.errOnlyAllowPositive="We only allow positive and integers for gcd and lcm.",this.errSyntaxError="Syntax error in the expression. Please recheck.\n\nPossible causes:\n* Mismatched brackets.\n* Missing operands.\n* Consecutive operators.\n*Factorial/Log of negative numbers.",this.errOnlyNumbers="Only numbers are allowed.",PanelManager.panels["#panel-201-calculator"]={load:function(a){metacalc.panels.Panel_201_Calculator.fromSave=!0,a&&a.eq&&($("#panel-201-calculator input[type=text]").val(a.eq),$("#panel-201-calculator .currentExpression").get(0).innerHTML=a.eq,a.isDeg&&$("#"+$("#panel-201-calculator .lblDegrees").attr("for")).attr("checked","checked")),PanelManager.activatePanel("#panel-201-calculator",PanelTransitions.SLIDE_RIGHT,!0),metacalc.panels.Panel_201_Calculator.onEvalCurrentExpression()},save:function(){var a={};return a.eq=$("#panel-201-calculator .currentExpression").get(0).innerHTML,a.isDeg="checked"==$("#"+$("#panel-201-calculator .lblDegrees").attr("for")).attr("checked"),a}},this.init=function(){return $(".btn6, .btn7, .btn8, .btn9, .btn4, .btn5, .btn1, .btn2, .btn3, .btn0, .btnDecimal,               .btnPercent, .btnPi, .btnE, .btnParenLeft, .btnParenRight",$("#panel-201-calculator").get(0)).click(this.createHandler("asis")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnDivide, .btnMultiply, .btnMinus, .btnPlus, .btnPower, .btnMod, .btnComma",$("#panel-201-calculator").get(0)).click(this.createHandler("op")),$("#_087cb8, #_ac8080",$("#panel-201-calculator").get(0)).click(this.onEvalCurrentExpression),$(".btnEx, .btnFac, .btnX2, .btnX3",$("#panel-201-calculator").get(0)).click(this.createHandler("spcl")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnSin, .btnCos, .btnTan, .btnCsc, .btnSec, .btnCot, .btnSinh, .btnCosh, .btnTanh, .btnCsch, .btnSech, .btnCoth,               .btnLn, .btnLog10, .btnLog2, .btnLcm, .btnGcd, .btnSqrt, .btnAbs, .btnNcr, .btnNpr, .btnMax, .btnMin, .btnFloor, .btnCeil,               .btnRound",$("#panel-201-calculator").get(0)).click(this.createHandler("func")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnSinInv, .btnCosInv, .btnTanInv, .btnCscInv, .btnSecInv, .btnCotInv, .btnSinhInv, .btnCoshInv, .btnTanhInv, .btnCschInv, .btnSechInv, .btnCothInv",$("#panel-201-calculator").get(0)).click(this.createHandler("inv")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnVarA, .btnUpVarA, .btnVarB, .btnUpVarB, .btnVarC, .btnUpVarC",$("#panel-201-calculator").get(0)).click(this.createHandler("save")),$(".btnMC, .btnMR, .btnMS, .btnMPlus, .btnMMinus",$("#panel-201-calculator").get(0)).click(this.createHandler("mem")),$("#panel-201-calculator .btnBackspace").click(this.createHandler("bksp")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$("#panel-201-calculator .btnC").click(this.createHandler("c")),$("#panel-201-calculator .btnCE").click(this.createHandler("ce")),$("#panel-201-calculator .btnEquals").click(this.createHandler("equal")),$("#panel-201-calculator .btnEquals").click(this.onEvalExpression).click(this.onEvalCurrentExpression),$("#panel-201-calculator .btnPrimeF").click(this.onPrimeFactorization),$("#panel-201-calculator input[type=text]").keypress(function(a){13===a.which&&$("#panel-201-calculator .btnEquals").focus().click()}),$("#panel-201-calculator input[type=text]").keyup(function(a){13!==a.which&&($("#panel-201-calculator .currentExpression").get(0).innerHTML=$("#panel-201-calculator .txtExpression").get(0).value,$("#panel-201-calculator .txtExpression").focus())}).keyup(this.onEvalCurrentExpression),this},this.parser=new MathProcessor,this.onEvalExpression=function(){var b="checked"==$("#"+$("#panel-201-calculator .lblDegrees").attr("for")).attr("checked"),c=$("#panel-201-calculator .txtExpression").val().toLowerCase();$("#panel-201-calculator .txtExpression").focus();try{var d=a.parser.parse(c,b);isNaN(d)?$("#panel-201-calculator .txtExpression").get(0).value="Undefined":(d=String(d).replace(/-/,"–").replace(/\+/,"").replace("e"," × 10 ^ "),$("#panel-201-calculator .txtExpression").get(0).value=d,$("#panel-201-calculator .txtExpression").caret($("#panel-201-calculator .txtExpression").val().length,$("#panel-201-calculator .txtExpression").val().length),PanelManager.AddHistory("#panel-201-calculator"))}catch(e){e.message.match(/1023/)&&alert(self.errStackOverflow),alert(e.message.match(/1024/)?self.errOnlyAllowPositive:e.message)}},this.onEvalCurrentExpression=function(){var b="checked"===$("#"+$("#panel-201-calculator .lblDegrees").attr("for")).attr("checked"),c=$("#panel-201-calculator .currentExpression").get(0).innerHTML.toLowerCase();PanelAlerts.setObj($("#panel-201-calculator .currentExpression"),"panel-201-calculator"),PanelAlerts.validate(c),c=c.replace(/\s/g,"");var d=c[c.length-1];if($("#panel-201-calculator .txtExpression").focus(),"*"!==d&&"/"!==d&&"^"!==d&&"-"!==d&&"+"!==d)try{var e=a.parser.parse(c,b);isNaN(e)?($("#panel-201-calculator .currentExpression").get(0).innerHTML=c,$("#panel-201-calculator .currentResult").get(0).innerHTML=""!=c?" ":""):""!=c?(e=String(e).replace(/-/,"–").replace(/\+/,"").replace("e"," × 10 ^ "),$("#panel-201-calculator .currentResult").get(0).innerHTML="= "+e,$("#panel-201-calculator .currentResult").caret($("#panel-201-calculator .currentResult").val().length,$("#panel-201-calculator .currentResult").val().length)):$("#panel-201-calculator .currentResult").get(0).innerHTML=""}catch(f){$("#panel-201-calculator .currentResult").get(0).innerHTML=" "}else $("#panel-201-calculator .currentResult").get(0).innerHTML=" "},this.onPrimeFactorization=function(){var a=$("#panel-201-calculator .txtExpression").val(),b=function(a){var b=window.setInterval(function(){$("#panel-201-calculator .txtExpression").get(0).value+="."},1e3);$.ajax({url:a,type:"GET",success:function(a){window.clearInterval(b),200===a.status?$("#panel-201-calculator .txtExpression").get(0).value=a.data.join(", "):205===a.status&&($("#panel-201-calculator .txtExpression").get(0).value="Factorization timed out")},error:function(){window.clearInterval(b),$("#panel-201-calculator .txtExpression").get(0).value="Factorization timed out"},dataType:"json",timeout:3e4})};if(/^\d+$/.test(a)){var c="http://www.mathwarehouse.com/arithmetic/numbers/prime-number/prime-factorization-meta.php?n="+a;$("#panel-201-calculator .txtExpression").get(0).value="Performing factorization",b(c)}else alert(self.errOnlyNumbers)},this.createHandler=function(a){return"asis"==a?function(a){var b=$("#panel-201-calculator .txtExpression"),c=b.val();/(Undefined|Infinity)/.test(c)&&(b.get(0).value="");var d=b.caret(),e=c.substr(0,d.start);e+=/[0-9ei\)]$/.test(e)&&/^[a-z]/.test($(a.currentTarget).text())||/[%\!]$/.test(e)?" × "+$(a.currentTarget).text():$(a.currentTarget).text();var f=c.substr(d.end);b.get(0).value=e+f,b.caret(e.length,e.length),b.focus()}:"span"==a?function(){$("#panel-201-calculator .currentExpression").get(0).innerHTML=$("#panel-201-calculator .txtExpression").get(0).value,$("#panel-201-calculator .txtExpression").focus()}:"spcl"==a?function(a){/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value="");var b=$("#panel-201-calculator .txtExpression").val().substr(0,$("#panel-201-calculator .txtExpression").caret().start),c="";"ex"==$(a.currentTarget).text()?c="exp(":"!"==$(a.currentTarget).text()?c="fac(":"x2"==$(a.currentTarget).text()?c=" ^ 2":"x3"==$(a.currentTarget).text()&&(c=" ^ 3"),/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)&&/[\(]$/.test(c)?b=c+b+")":b+=/[0-9ei%!\)]$/.test(b)&&/[\(]$/.test(c)?" × "+c:c,$("#panel-201-calculator .txtExpression").get(0).value=b+$("#panel-201-calculator .txtExpression").val().substr($("#panel-201-calculator .txtExpression").caret().end),$("#panel-201-calculator .txtExpression").caret(b.length,b.length),$("#panel-201-calculator .txtExpression").focus()}:"op"==a?function(a){lastResult=$("#panel-201-calculator .txtExpression").get(0).value,/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value="");var b=$("#panel-201-calculator .txtExpression").val().substr(0,$("#panel-201-calculator .txtExpression").caret().start);b=","==$(a.currentTarget).text()?b.replace(/ +?$/,"")+$(a.currentTarget).text()+" ":b.replace(/ +?$/,"")+" "+$(a.currentTarget).text()+" ",$("#panel-201-calculator .txtExpression").get(0).value=b+$("#panel-201-calculator .txtExpression").val().substr($("#panel-201-calculator .txtExpression").caret().end),$("#panel-201-calculator .txtExpression").caret(b.length,b.length),$("#panel-201-calculator .txtExpression").focus()}:"func"==a?function(a){/Undefined/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value="");var b=$("#panel-201-calculator .txtExpression").val().substr(0,$("#panel-201-calculator .txtExpression").caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)?b=/^(gcd|npr|ncr|lcm|max|min)$/i.test($(a.currentTarget).text())?$(a.currentTarget).text()+"("+b+",  ":$(a.currentTarget).text()+"("+b+")":b+=/[0-9ei%!\)]$/.test(b)?" × "+$(a.currentTarget).text()+"(":$(a.currentTarget).text()+"(",$("#panel-201-calculator .txtExpression").get(0).value=b+$("#panel-201-calculator .txtExpression").val().substr($("#panel-201-calculator .txtExpression").caret().end),$("#panel-201-calculator .txtExpression").caret(b.length,b.length),$("#panel-201-calculator .txtExpression").focus()}:"inv"==a?function(a){/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value="");var b=$("#panel-201-calculator .txtExpression").val().substr(0,$("#panel-201-calculator .txtExpression").caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)?b="a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"("+b+")":b+=/[0-9ei%!\)]$/.test(b)?" × a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"(":"a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"(",$("#panel-201-calculator .txtExpression").get(0).value=b+$("#panel-201-calculator .txtExpression").val().substr($("#panel-201-calculator .txtExpression").caret().end),$("#panel-201-calculator .txtExpression").caret(b.length,b.length),$("#panel-201-calculator .txtExpression").focus()}:"bksp"==a?function(){if(/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value=""),$("#panel-201-calculator .txtExpression").caret().start==$("#panel-201-calculator .txtExpression").caret().end){var a=$("#panel-201-calculator .txtExpression").caret().start,b=$("#panel-201-calculator .txtExpression").val().substring(0,a-1),c=$("#panel-201-calculator .txtExpression").val().substring(a);$("#panel-201-calculator .txtExpression").get(0).value=b+c,$("#panel-201-calculator .txtExpression").caret(a-1,a-1)}else{a=$("#panel-201-calculator .txtExpression").caret().start;var d=$("#panel-201-calculator .txtExpression").caret().end;b=$("#panel-201-calculator .txtExpression").val().substring(0,a),c=$("#panel-201-calculator .txtExpression").val().substring(d),$("#panel-201-calculator .txtExpression").get(0).value=b+c,$("#panel-201-calculator .txtExpression").caret(a,a)}$("#panel-201-calculator .txtExpression").focus()}:"c"==a?function(){/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value=""),$("#panel-201-calculator .txtExpression").get(0).value="",b="",c="",d="",$("#panel-201-calculator .txtExpression").focus(),$("#panel-201-calculator .currentExpression").get(0).innerHTML=" ",$("#panel-201-calculator .currentResult").get(0).innerHTML=" "}:"ce"==a?function(){$("#panel-201-calculator .txtExpression").get(0).value="",$("#panel-201-calculator .txtExpression").focus(),$("#panel-201-calculator .currentExpression").get(0).innerHTML=" ",$("#panel-201-calculator .currentResult").get(0).innerHTML=" "}:"equal"==a?function(){$("#panel-201-calculator .currentExpression").get(0).innerHTML=$("#panel-201-calculator .txtExpression").get(0).value,$("#panel-201-calculator .txtExpression").focus()}:"save"==a?function(a){"A↓"==$(a.currentTarget).text()?b=$("#panel-201-calculator .txtExpression").get(0).value:"B↓"==$(a.currentTarget).text()?c=$("#panel-201-calculator .txtExpression").get(0).value:"C↓"==$(a.currentTarget).text()?d=$("#panel-201-calculator .txtExpression").get(0).value:"A↑"==$(a.currentTarget).text()?($("#panel-201-calculator .txtExpression").get(0).value+=b,$("#panel-201-calculator .txtExpression").focus()):"B↑"==$(a.currentTarget).text()?($("#panel-201-calculator .txtExpression").get(0).value+=c,$("#panel-201-calculator .txtExpression").focus()):$("#panel-201-calculator .txtExpression").get(0).value+=d,$("#panel-201-calculator .txtExpression").focus()}:"mem"==a?function(a){if("MC"==$(a.currentTarget).text())$("#panel-201-calculator .lblMemory").addClass("invisible"),self.memory=0;else if("MR"==$(a.currentTarget).text()){var b=self.memory.toString().replace("-","–").replace(/\+/,"").replace("e"," × 10 ^ ");if(!$("#panel-201-calculator .lblMemory").hasClass("invisible")){/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val())&&($("#panel-201-calculator .txtExpression").get(0).value="");var c=$("#panel-201-calculator .txtExpression").val().substr(0,$("#panel-201-calculator .txtExpression").caret().start);0===parseFloat($("#panel-201-calculator .txtExpression").val())?$("#panel-201-calculator .txtExpression").get(0).value=b:c+=/[0-9ei%!\)]$/.test(c)?" × "+b:b,$("#panel-201-calculator .txtExpression").get(0).value=c+$("#panel-201-calculator .txtExpression").val().substr($("#panel-201-calculator .txtExpression").caret().end),$("#panel-201-calculator .txtExpression").caret(c.length,c.length),$("#panel-201-calculator .txtExpression").focus()}}else if("M+"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-201-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val()))return;memory+=parseFloat($("#panel-201-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}else if("M–"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-201-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val()))return;memory-=parseFloat($("#panel-201-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}else if("MS"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-201-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-201-calculator .txtExpression").val()))return;memory=parseFloat($("#panel-201-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}}:null},this.activate=function(a){PanelManager.activatePanel("#panel-201-calculator",a)},this.deactivate=function(){return!0}},Panel_202_EquationSolver:function(){var a=this;this.showSolution="Solution is:\n",this.txtActiveEquation=null,this.init=function(){$(".btn7, .btn6, .btn5, .btn8, .btn9, .btn1, .btn2, .btn3, .btn4, .btn0, .btnDecimal",$("#panel-202-equation-solver").get(0)).click(a.createHandler("asis")),$(".btnU, .btnV, .btnW, .btnX, .btnY, .btnZ, .btnPlus, .btnMinus, .btnEquals",$("#panel-202-equation-solver").get(0)).click(a.createHandler("op")),$(".txtEquation1, .txtEquation2, .txtEquation3, .txtEquation4, .txtEquation5, .txtEquation6, .btnBackspace1, .btnBackspace2, .btnBackspace3, .btnBackspace4, .btnBackspace5, .btnBackspace6",$("#panel-202-equation-solver").get(0)).click(a.onEquationSelect),$("#panel-202-equation-solver .btnSolve").click(a.onEquationSolve),$(".txtEquation1, .txtEquation2, .txtEquation3, .txtEquation4, .txtEquation5, .txtEquation6",$("#panel-202-equation-solver").get(0)).keyup(function(){var a=$(this);PanelAlerts.setObj(a,"panel-202-equation-solver"),PanelAlerts.validate(a.val())}),this.txtActiveEquation=$("#panel-202-equation-solver .txtEquation1")},this.onEquationSelect=function(b){if(b.currentTarget.className.match(/btn/)){var c=b.currentTarget.className.match(/Backspace([0-9])$/)[1],d=$("#panel-202-equation-solver .txtEquation"+c);if(d.val(d.val().substr(0,d.val().length-1)),d==a.txtActiveEquation)return;a.txtActiveEquation=d,d.focus()}else{if(b.currentTarget==a.txtActiveEquation.get(0))return;a.txtActiveEquation=$(b.currentTarget)}},this.onEquationSolve=function(){for(var b=new SystemOfEquations,c=0;6>c;c++){var d=$("#panel-202-equation-solver .txtEquation"+(c+1));d.val()&&b.addEquations(d.val().replace(/ /g,""))}try{var e=b.solve();PanelManager.AddHistory("#panel-202-equation-solver");var f="";for(var g in e)f+=g+" = "+(Math.round(1e4*e[g])/1e4).toString()+"\n";alert(a.showSolution+f)}catch(h){alert(h.message)}},this.createHandler=function(b){return"asis"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);d+=/[0-9ei\)]$/.test(d)&&/^[a-z]/.test($(b.currentTarget).text())||/[%\!]$/.test(d)?" * "+$(b.currentTarget).text():$(b.currentTarget).text(),c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:"op"==b?function(b){var c=a.txtActiveEquation,d=c.val().substr(0,c.caret().start);d=","==$(b.currentTarget).text()?d.replace(/ *$/,"")+$(b.currentTarget).text()+" ":d.replace(/ *$/,"")+" "+$(b.currentTarget).text()+" ",c.val(d+c.val().substr(c.caret().end)),c.caret(d.length,d.length),c.focus()}:null},this.activate=function(b){a.txtActiveEquation&&a.txtActiveEquation.focus(),PanelManager.activatePanel("#panel-202-equation-solver",b)},this.deactivate=function(){return!0},this.fromSave=!0,PanelManager.panels["#panel-202-equation-solver"]={load:function(a){if(metacalc.panels.Panel_202_EquationSolver.fromSave=!0,a&&a.eq)for(var b=0;b<a.eq.length;b++){var c=$("#panel-202-equation-solver .txtEquation"+(b+1));c.val(a.eq[b])}PanelManager.activatePanel("#panel-202-equation-solver",PanelTransitions.SLIDE_RIGHT,!0)},save:function(){for(var a={eq:[]},b=0;6>b;b++){var c=$("#panel-202-equation-solver .txtEquation"+(b+1));c.val()&&a.eq.push(c.val().replace(/ /g,""))}return a}}},Panel_203_SimpleCalculator:function(){var a=this,b="",c="",d="";this.errStackOverflow="Stack overflow occured.\n\nPossible causes:\n* Factorial of large numbers cannot be calculated.",this.errOnlyAllowPositive="We only allow positive and integers for gcd and lcm.",this.errSyntaxError="Syntax error in the expression. Please recheck.\n\nPossible causes:\n* Mismatched brackets.\n* Missing operands.\n* Consecutive operators.\n*Factorial/Log of negative numbers.",this.errOnlyNumbers="Only numbers are allowed.",PanelManager.panels["#panel-203-simple-calculator"]={load:function(a){metacalc.panels.Panel_203_SimpleCalculator.fromSave=!0,a&&a.eq&&($("#panel-203-simple-calculator input[type=text]").val(a.eq),$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=a.eq),PanelManager.activatePanel("#panel-203-simple-calculator",PanelTransitions.SLIDE_RIGHT,!0),metacalc.panels.Panel_203_SimpleCalculator.onEvalCurrentExpression()},save:function(){var a={};return a.eq=$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML,a
}},this.init=function(){return $(".btn6, .btn7, .btn8, .btn9, .btn4, .btn5, .btn1, .btn2, .btn3, .btn0, .btnDecimal,               .btnPercent, .btnPi, .btnE, .btnParenLeft, .btnParenRight",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("asis")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnDivide, .btnMultiply, .btnMinus, .btnPlus, .btnPower, .btnMod, .btnComma",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("op")),$("#_087cb8, #_ac8080",$("#panel-203-simple-calculator").get(0)).click(this.onEvalCurrentExpression),$(".btnEx, .btnFac, .btnX2, .btnX3",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("spcl")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnSin, .btnCos, .btnTan, .btnCsc, .btnSec, .btnCot, .btnSinh, .btnCosh, .btnTanh, .btnCsch, .btnSech, .btnCoth,               .btnLn, .btnLog10, .btnLog2, .btnLcm, .btnGcd, .btnSqrt, .btnAbs, .btnNcr, .btnNpr, .btnMax, .btnMin, .btnFloor, .btnCeil,               .btnRound",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("func")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnSinInv, .btnCosInv, .btnTanInv, .btnCscInv, .btnSecInv, .btnCotInv, .btnSinhInv, .btnCoshInv, .btnTanhInv, .btnCschInv, .btnSechInv, .btnCothInv",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("inv")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$(".btnVarA, .btnUpVarA, .btnVarB, .btnUpVarB, .btnVarC, .btnUpVarC",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("save")),$(".btnMC, .btnMR, .btnMS, .btnMPlus, .btnMMinus",$("#panel-203-simple-calculator").get(0)).click(this.createHandler("mem")),$("#panel-203-simple-calculator .btnBackspace").click(this.createHandler("bksp")).click(this.createHandler("span")).click(this.onEvalCurrentExpression),$("#panel-203-simple-calculator .btnC").click(this.createHandler("c")),$("#panel-203-simple-calculator .btnCE").click(this.createHandler("ce")),$("#panel-203-simple-calculator .btnEquals").click(this.createHandler("equal")),$("#panel-203-simple-calculator .btnEquals").click(this.onEvalExpression).click(this.onEvalCurrentExpression),$("#panel-203-simple-calculator .btnPrimeF").click(this.onPrimeFactorization),$("#panel-203-simple-calculator input[type=text]").keypress(function(a){13===a.which&&$("#panel-203-simple-calculator .btnEquals").focus().click()}),$("#panel-203-simple-calculator input[type=text]").keyup(function(a){13!==a.which&&($("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=$("#panel-203-simple-calculator .txtExpression").get(0).value,$("#panel-203-simple-calculator .txtExpression").focus())}).keyup(this.onEvalCurrentExpression),this},this.parser=new MathProcessor,this.onEvalExpression=function(){var b="checked"==$("#"+$("#panel-203-simple-calculator .lblDegrees").attr("for")).attr("checked"),c=$("#panel-203-simple-calculator .txtExpression").val().toLowerCase();$("#panel-203-simple-calculator .txtExpression").focus();try{var d=a.parser.parse(c,b);isNaN(d)?$("#panel-203-simple-calculator .txtExpression").get(0).value="Undefined":(d=String(d).replace(/-/,"–").replace(/\+/,"").replace("e"," × 10 ^ "),$("#panel-203-simple-calculator .txtExpression").get(0).value=d,$("#panel-203-simple-calculator .txtExpression").caret($("#panel-203-simple-calculator .txtExpression").val().length,$("#panel-203-simple-calculator .txtExpression").val().length),PanelManager.AddHistory("#panel-203-simple-calculator"))}catch(e){e.message.match(/1023/)&&alert(self.errStackOverflow),alert(e.message.match(/1024/)?self.errOnlyAllowPositive:e.message)}},this.onEvalCurrentExpression=function(){var b="checked"===$("#"+$("#panel-203-simple-calculator .lblDegrees").attr("for")).attr("checked"),c=$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML.toLowerCase();PanelAlerts.setObj($("#panel-203-simple-calculator .txtExpression"),"panel-203-simple-calculator"),PanelAlerts.validate(c),c=c.replace(/\s/g,"");var d=c[c.length-1];if($("#panel-203-simple-calculator .txtExpression").focus(),"*"!==d&&"/"!==d&&"^"!==d&&"-"!==d&&"+"!==d)try{var e=a.parser.parse(c,b);isNaN(e)?($("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=c,$("#panel-203-simple-calculator .currentResult").get(0).innerHTML=""!=c?" ":""):""!=c?(e=String(e).replace(/-/,"–").replace(/\+/,"").replace("e"," × 10 ^ "),$("#panel-203-simple-calculator .currentResult").get(0).innerHTML="= "+e,$("#panel-203-simple-calculator .currentResult").caret($("#panel-203-simple-calculator .currentResult").val().length,$("#panel-203-simple-calculator .currentResult").val().length)):$("#panel-203-simple-calculator .currentResult").get(0).innerHTML=""}catch(f){$("#panel-203-simple-calculator .currentResult").get(0).innerHTML=" "}},this.onPrimeFactorization=function(){var a=$("#panel-203-simple-calculator .txtExpression").val(),b=function(a){var b=window.setInterval(function(){$("#panel-203-simple-calculator .txtExpression").get(0).value+="."},1e3);$.ajax({url:a,type:"GET",success:function(a){window.clearInterval(b),200===a.status?$("#panel-203-simple-calculator .txtExpression").get(0).value=a.data.join(", "):205===a.status&&($("#panel-203-simple-calculator .txtExpression").get(0).value="Factorization timed out")},error:function(){window.clearInterval(b),$("#panel-203-simple-calculator .txtExpression").get(0).value="Factorization timed out"},dataType:"json",timeout:3e4})};if(/^\d+$/.test(a)){var c="http://www.mathwarehouse.com/arithmetic/numbers/prime-number/prime-factorization-meta.php?n="+a;$("#panel-203-simple-calculator .txtExpression").get(0).value="Performing factorization",b(c)}else alert(self.errOnlyNumbers)},this.createHandler=function(a){return"asis"==a?function(a){var b=$("#panel-203-simple-calculator .txtExpression"),c=b.val();/(Undefined|Infinity)/.test(c)&&(b.get(0).value="");var d=b.caret(),e=c.substr(0,d.start);e+=/[0-9ei\)]$/.test(e)&&/^[a-z]/.test($(a.currentTarget).text())||/[%\!]$/.test(e)?" × "+$(a.currentTarget).text():$(a.currentTarget).text();var f=c.substr(d.end);b.get(0).value=e+f,b.caret(e.length,e.length),b.focus()}:"span"==a?function(){$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=$("#panel-203-simple-calculator .txtExpression").get(0).value,$("#panel-203-simple-calculator .txtExpression").focus()}:"spcl"==a?function(a){/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value="");var b=$("#panel-203-simple-calculator .txtExpression").val().substr(0,$("#panel-203-simple-calculator .txtExpression").caret().start),c="";"ex"==$(a.currentTarget).text()?c="exp(":"!"==$(a.currentTarget).text()?c="fac(":"x2"==$(a.currentTarget).text()?c=" ^ 2":"x3"==$(a.currentTarget).text()&&(c=" ^ 3"),/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)&&/[\(]$/.test(c)?b=c+b+")":b+=/[0-9ei%!\)]$/.test(b)&&/[\(]$/.test(c)?" × "+c:c,$("#panel-203-simple-calculator .txtExpression").get(0).value=b+$("#panel-203-simple-calculator .txtExpression").val().substr($("#panel-203-simple-calculator .txtExpression").caret().end),$("#panel-203-simple-calculator .txtExpression").caret(b.length,b.length),$("#panel-203-simple-calculator .txtExpression").focus()}:"op"==a?function(a){lastResult=$("#panel-203-simple-calculator .txtExpression").get(0).value,/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value="");var b=$("#panel-203-simple-calculator .txtExpression").val().substr(0,$("#panel-203-simple-calculator .txtExpression").caret().start);b=","==$(a.currentTarget).text()?b.replace(/ +?$/,"")+$(a.currentTarget).text()+" ":b.replace(/ +?$/,"")+" "+$(a.currentTarget).text()+" ",$("#panel-203-simple-calculator .txtExpression").get(0).value=b+$("#panel-203-simple-calculator .txtExpression").val().substr($("#panel-203-simple-calculator .txtExpression").caret().end),$("#panel-203-simple-calculator .txtExpression").caret(b.length,b.length),$("#panel-203-simple-calculator .txtExpression").focus()}:"func"==a?function(a){/Undefined/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value="");var b=$("#panel-203-simple-calculator .txtExpression").val().substr(0,$("#panel-203-simple-calculator .txtExpression").caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)?b=/^(gcd|npr|ncr|lcm|max|min)$/i.test($(a.currentTarget).text())?$(a.currentTarget).text()+"("+b+",  ":$(a.currentTarget).text()+"("+b+")":b+=/[0-9ei%!\)]$/.test(b)?" × "+$(a.currentTarget).text()+"(":$(a.currentTarget).text()+"(",$("#panel-203-simple-calculator .txtExpression").get(0).value=b+$("#panel-203-simple-calculator .txtExpression").val().substr($("#panel-203-simple-calculator .txtExpression").caret().end),$("#panel-203-simple-calculator .txtExpression").caret(b.length,b.length),$("#panel-203-simple-calculator .txtExpression").focus()}:"inv"==a?function(a){/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value="");var b=$("#panel-203-simple-calculator .txtExpression").val().substr(0,$("#panel-203-simple-calculator .txtExpression").caret().start);/^ ?[+–]? ?([0-9\.]+|pi|e)$/.test(b)?b="a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"("+b+")":b+=/[0-9ei%!\)]$/.test(b)?" × a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"(":"a"+$(a.currentTarget).text().match(/[a-z]*/)[0]+"(",$("#panel-203-simple-calculator .txtExpression").get(0).value=b+$("#panel-203-simple-calculator .txtExpression").val().substr($("#panel-203-simple-calculator .txtExpression").caret().end),$("#panel-203-simple-calculator .txtExpression").caret(b.length,b.length),$("#panel-203-simple-calculator .txtExpression").focus()}:"bksp"==a?function(){if(/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value=""),$("#panel-203-simple-calculator .txtExpression").caret().start==$("#panel-203-simple-calculator .txtExpression").caret().end){var a=$("#panel-203-simple-calculator .txtExpression").caret().start,b=$("#panel-203-simple-calculator .txtExpression").val().substring(0,a-1),c=$("#panel-203-simple-calculator .txtExpression").val().substring(a);$("#panel-203-simple-calculator .txtExpression").get(0).value=b+c,$("#panel-203-simple-calculator .txtExpression").caret(a-1,a-1)}else{a=$("#panel-203-simple-calculator .txtExpression").caret().start;var d=$("#panel-203-simple-calculator .txtExpression").caret().end;b=$("#panel-203-simple-calculator .txtExpression").val().substring(0,a),c=$("#panel-203-simple-calculator .txtExpression").val().substring(d),$("#panel-203-simple-calculator .txtExpression").get(0).value=b+c,$("#panel-203-simple-calculator .txtExpression").caret(a,a)}$("#panel-203-simple-calculator .txtExpression").focus()}:"c"==a?function(){/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value=""),$("#panel-203-simple-calculator .txtExpression").get(0).value="",b="",c="",d="",$("#panel-203-simple-calculator .txtExpression").focus(),$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=" ",$("#panel-203-simple-calculator .currentResult").get(0).innerHTML=" "}:"ce"==a?function(){$("#panel-203-simple-calculator .txtExpression").get(0).value="",$("#panel-203-simple-calculator .txtExpression").focus(),$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=" ",$("#panel-203-simple-calculator .currentResult").get(0).innerHTML=" "}:"equal"==a?function(){$("#panel-203-simple-calculator .currentExpression").get(0).innerHTML=$("#panel-203-simple-calculator .txtExpression").get(0).value,$("#panel-203-simple-calculator .txtExpression").focus()}:"save"==a?function(a){"A↓"==$(a.currentTarget).text()?b=$("#panel-203-simple-calculator .txtExpression").get(0).value:"B↓"==$(a.currentTarget).text()?c=$("#panel-203-simple-calculator .txtExpression").get(0).value:"C↓"==$(a.currentTarget).text()?d=$("#panel-203-simple-calculator .txtExpression").get(0).value:"A↑"==$(a.currentTarget).text()?($("#panel-203-simple-calculator .txtExpression").get(0).value+=b,$("#panel-203-simple-calculator .txtExpression").focus()):"B↑"==$(a.currentTarget).text()?($("#panel-203-simple-calculator .txtExpression").get(0).value+=c,$("#panel-203-simple-calculator .txtExpression").focus()):$("#panel-203-simple-calculator .txtExpression").get(0).value+=d,$("#panel-203-simple-calculator .txtExpression").focus()}:"mem"==a?function(a){if("MC"==$(a.currentTarget).text())$("#panel-203-simple-calculator .lblMemory").addClass("invisible"),self.memory=0;else if("MR"==$(a.currentTarget).text()){var b=self.memory.toString().replace("-","–").replace(/\+/,"").replace("e"," × 10 ^ ");if(!$("#panel-203-simple-calculator .lblMemory").hasClass("invisible")){/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val())&&($("#panel-203-simple-calculator .txtExpression").get(0).value="");var c=$("#panel-203-simple-calculator .txtExpression").val().substr(0,$("#panel-203-simple-calculator .txtExpression").caret().start);0===parseFloat($("#panel-203-simple-calculator .txtExpression").val())?$("#panel-203-simple-calculator .txtExpression").get(0).value=b:c+=/[0-9ei%!\)]$/.test(c)?" × "+b:b,$("#panel-203-simple-calculator .txtExpression").get(0).value=c+$("#panel-203-simple-calculator .txtExpression").val().substr($("#panel-203-simple-calculator .txtExpression").caret().end),$("#panel-203-simple-calculator .txtExpression").caret(c.length,c.length),$("#panel-203-simple-calculator .txtExpression").focus()}}else if("M+"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-203-simple-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val()))return;memory+=parseFloat($("#panel-203-simple-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}else if("M–"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-203-simple-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val()))return;memory-=parseFloat($("#panel-203-simple-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}else if("MS"==$(a.currentTarget).text()){if(onEvalExpression(a),$("#panel-203-simple-calculator .lblMemory").removeClass("invisible"),/(Undefined|Infinity)/.test($("#panel-203-simple-calculator .txtExpression").val()))return;memory=parseFloat($("#panel-203-simple-calculator .txtExpression").val().replace("–","-").replace(/ /g,"").replace("×10^","e"))}}:null},this.activate=function(a){PanelManager.activatePanel("#panel-203-simple-calculator",a)},this.deactivate=function(){return!0}},Panel_301_Matrices:function(){var a=this;this.parser=new MathProcessor,this.matrixANumRows=3,this.matrixANumCols=3,this.matrixBNumRows=3,this.matrixBNumCols=3,this.lastFunction=void 0,PanelManager.panels["#panel-301-matrices"]={load:function(b){b&&b.ma&&b.mb&&(a.setMatrix("A",b.ma),a.setMatrix("B",b.mb)),PanelManager.activatePanel("#panel-301-matrices",PanelTransitions.SLIDE_RIGHT,!0),b&&b.func&&$("#panel-301-matrices ."+b.func).trigger("click")},save:function(){var b={};return a.lastFunction&&(b.func=a.lastFunction),b.ma=a.getMatrix("A")._m,b.mb=a.getMatrix("B")._m,b}},this.init=function(){return $(".txtMatrixARows, .txtMatrixACols, .txtMatrixBRows, .txtMatrixBCols",$("#panel-301-matrices").get(0)).keyup(this.onMatrixPropertyChange).val("3").keyup(),$(".btnACrossA, .btnACrossB, .btnBCrossA, .btnBCrossB, .btnAPlusB, .btnAMinusB, .btnATranspose, .btnBTranspose, .btnAInverse, .btnBInverse, .btnADeterminant, .btnBDeterminant",$("#panel-301-matrices").get(0)).click(a.onMatrixFunction),$("input[class^=txtMatrix]",$("#panel-301-matrices").get(0)).keyup(function(){PanelAlerts.setObj($(this),"panel-301-matrices"),PanelAlerts.validate($(this).val())}),this},this.onMatrixPropertyChange=function(b){var c,d,e,f,g;switch(b.target){case $("#panel-301-matrices .txtMatrixARows").get(0):e="A";case $("#panel-301-matrices .txtMatrixBRows").get(0):if(e=e||"B",f=parseInt(b.target.value),isNaN(f)||1>f||f>5)return;for(b.target.value=f,a["matrix"+e+"NumRows"]=f,c=1;5>=c;c++)for(d=1;5>=d;d++)c>f||d>a["matrix"+e+"NumCols"]?$("#panel-301-matrices .txtMatrix"+e+"_"+(c-1)+"_"+(d-1)).attr("disabled","disabled"):$("#panel-301-matrices .txtMatrix"+e+"_"+(c-1)+"_"+(d-1)).removeAttr("disabled");break;case $("#panel-301-matrices .txtMatrixACols").get(0):e="A";case $("#panel-301-matrices .txtMatrixBCols").get(0):if(e=e||"B",g=parseInt(b.target.value),isNaN(g)||1>g||g>5)return;for(b.target.value=g,a["matrix"+e+"NumCols"]=g,c=1;5>=c;c++)for(d=1;5>=d;d++)c>a["matrix"+e+"NumRows"]||d>g?$("#panel-301-matrices .txtMatrix"+e+"_"+(c-1)+"_"+(d-1)).val(0).attr("disabled","disabled"):$("#panel-301-matrices .txtMatrix"+e+"_"+(c-1)+"_"+(d-1)).removeAttr("disabled")}},this.onMatrixFunction=function(b){var c=b.currentTarget.className.match(/(btn.*)\b/)[1];try{var d=a.matrixFunction(c);if(d instanceof Matrix){for(var e,f="",g=0;g<(e=d.rows());g++){f+="<tr>",0===g&&(f+="<td rowspan='"+e+"'>"+b.currentTarget.innerHTML+" = </td>",f+="<td class='tdBorderLeft' rowspan='"+e+"'></td>");for(var h=0;h<d.cols();h++)f+="<td>"+(Math.round(1e4*d.getElement(g,h))/1e4||0)+"</td>";0===g&&(f+="<td class='tdBorderRight' rowspan='"+e+"'></td>"),f+="</tr>"}$(".tableMatrixResult").html(f)}else $(".tableMatrixResult").html("<tr><td>"+b.currentTarget.innerHTML+" =</td><td>"+d+"</td></tr>");PanelManager.AddHistory("#panel-301-matrices")}catch(b){alert(b.message)}},this.matrixFunction=function(b){switch(a.lastFunction=b,b){case"btnAPlusB":return a.getMatrix("A").add(a.getMatrix("B"));case"btnAMinusB":return a.getMatrix("A").subtract(a.getMatrix("B"));case"btnACrossB":return a.getMatrix("A").multiply(a.getMatrix("B"));case"btnBCrossA":return a.getMatrix("B").multiply(a.getMatrix("A"));case"btnACrossA":return a.getMatrix("A").multiply(a.getMatrix("A"));case"btnBCrossB":return a.getMatrix("B").multiply(a.getMatrix("B"));case"btnATranspose":return a.getMatrix("A").transpose();case"btnBTranspose":return a.getMatrix("B").transpose();case"btnAInverse":return a.getMatrix("A").invert();case"btnBInverse":return a.getMatrix("B").invert();case"btnADeterminant":return a.getMatrix("A").determinant();case"btnBDeterminant":return a.getMatrix("B").determinant()}},this.getMatrix=function(b){b=b||"A";var c,d,e=new Matrix(this["matrix"+b+"NumRows"],this["matrix"+b+"NumCols"]),f=[];for(c=1;5>=c;c++)for(d=1;5>=d;d++)if(!$("#panel-301-matrices .txtMatrix"+b+"_"+(c-1)+"_"+(d-1)).attr("disabled")){var g=$("#panel-301-matrices .txtMatrix"+b+"_"+(c-1)+"_"+(d-1)).val(),h=a.parser.parse(g,!1);f.push(h)}return e.set.apply(e,f),e},this.setMatrix=function(b,c){b=b||"A";var d,e;a["matrix"+b+"NumRows"]=c.length,a["matrix"+b+"NumCols"]=c[0].length,$("#panel-301-matrices .txtMatrix"+b+"Rows").val(c.length),$("#panel-301-matrices .txtMatrix"+b+"Cols").val(c[0].length);for(d=1;5>=d;d++)for(e=1;5>=e;e++){var f=$("#panel-301-matrices .txtMatrix"+b+"_"+(d-1)+"_"+(e-1)),g=c.length>=d&&c[d-1].length>=e?c[d-1][e-1]:void 0;void 0===g?f.val(0).attr("disabled","disabled"):f.val(g).removeAttr("disabled")}},this.activate=function(a){PanelManager.activatePanel("#panel-301-matrices",a)},this.deactivate=function(){return!0}},Panel_302_Vectors:function(){this.errUnequalVectors="Vectors are not of equal length.",this.errVectorLengthNot3="The length of the vectors must equal 3.";var a=this;this.parser=new MathProcessor,this.vectorANumCols=3,this.vectorBNumCols=3,this.lastFunction=void 0,this.fromSave=!1,PanelManager.panels["#panel-302-vectors"]={load:function(b){b&&b.ma&&b.mb&&(a.setVector("A",b.ma),a.setVector("B",b.mb)),PanelManager.activatePanel("#panel-302-vectors",PanelTransitions.SLIDE_RIGHT,!0),b&&b.func&&(metacalc.panels.Panel_302_Vectors.fromSave=!0,$("#panel-302-vectors ."+b.func).trigger("click"))},save:function(){var b={};return a.lastFunction&&(b.func=a.lastFunction),b.ma=a.getVector("A")._m[0],b.mb=a.getVector("B")._m[0],b}},this.init=function(){return $(".txtVectorACols, .txtVectorBCols",$("#panel-302-vectors").get(0)).keyup(this.onVectorPropertyChange).val("3").keyup(),$(".btnACrossB, .btnBCrossA, .btnADotA, .btnADotB, .btnBDotA, .btnBDotB, .btnAMinusB, .btnAPlusB",$("#panel-302-vectors").get(0)).click(a.onVectorFunction),$("input[class^=txtVector]",$("#panel-302-vectors").get(0)).keyup(function(){PanelAlerts.setObj($(this),"panel-302-vectors"),PanelAlerts.validate($(this).val())}),this},this.onVectorPropertyChange=function(b){var c,d;switch(b.target){case $("#panel-302-vectors .txtVectorACols").get(0):d="A";case $("#panel-302-vectors .txtVectorBCols").get(0):d=d||"B";var e=parseInt(b.target.value);if(isNaN(e)||1>e||e>5)return;for(b.target.value=e,a["vector"+d+"NumCols"]=e,c=1;5>=c;c++)c>a["vector"+d+"NumCols"]?$("#panel-302-vectors .txtVector"+d+"_"+(c-1)).val(0).attr("disabled","disabled"):$("#panel-302-vectors .txtVector"+d+"_"+(c-1)).removeAttr("disabled")}},this.onVectorFunction=function(b){var c=b.currentTarget.className.match(/(btn.*)\b/)[1];try{var d=a.vectorFunction(c);if(d instanceof Matrix){for(var e,f="",g=0;g<(e=d.rows());g++){f+="<tr>",0===g&&(f+="<td rowspan='"+e+"'>"+b.currentTarget.innerHTML+" = </td>",f+="<td class='tdBorderLeft' rowspan='"+e+"'></td>");for(var h=0;h<d.cols();h++)f+="<td>"+(Math.round(1e4*d.getElement(g,h))/1e4||0)+"</td>";0===g&&(f+="<td class='tdBorderRight' rowspan='"+e+"'></td>"),f+="</tr>"}$(".tableVectorResult").html(f)}else $(".tableVectorResult").html("<tr><td>"+b.currentTarget.innerHTML+" =</td><td>"+d+"</td></tr>");metacalc.panels.Panel_302_Vectors.fromSave===!0?metacalc.panels.Panel_302_Vectors.fromSave=!1:PanelManager.AddHistory("#panel-302-vectors")}catch(b){alert(b.message)}},this.vectorFunction=function(b){var c,d;switch(a.lastFunction=b,b){case"btnAPlusB":try{return a.getVector("A").add(a.getVector("B"))}catch(e){throw new Error(a.errUnequalVectors)}case"btnAMinusB":try{return a.getVector("A").subtract(a.getVector("B"))}catch(e){throw new Error(a.errUnequalVectors)}case"btnBMinusA":try{return a.getVector("B").subtract(a.getVector("A"))}catch(e){throw new Error(a.errUnequalVectors)}case"btnACrossB":if(c=a.getVector("A").get(),d=a.getVector("B").get(),a.vectorANumCols!=a.vectorBNumCols)throw new Error(a.errUnequalVectors);if(3!=a.vectorANumCols||3!=a.vectorBNumCols)throw new Error(a.errVectorLengthNot3);var f=new Matrix(1,3),g=[c[1]*d[2]-c[2]*d[1],c[2]*d[0]-c[0]*d[2],c[0]*d[1]-c[1]*d[0]];return f.set.apply(f,g),f;case"btnBCrossA":if(c=a.getVector("A").get(),d=a.getVector("B").get(),a.vectorANumCols!=a.vectorBNumCols)throw new Error(a.errUnequalVectors);if(3!=a.vectorANumCols||3!=a.vectorBNumCols)throw new Error(a.errVectorLengthNot3);return f=new Matrix(1,3),g=[d[1]*c[2]-d[2]*c[1],d[2]*c[0]-d[0]*c[2],d[0]*c[1]-d[1]*c[0]],f.set.apply(f,g),f;case"btnADotB":try{return a.getVector("A").multiply(a.getVector("B").transpose()).getElement(0,0)}catch(e){throw new Error(a.errUnequalVectors)}case"btnBDotA":try{return a.getVector("B").multiply(a.getVector("A").transpose()).getElement(0,0)}catch(e){throw new Error(a.errUnequalVectors)}case"btnADotA":try{return a.getVector("A").multiply(a.getVector("A").transpose()).getElement(0,0)}catch(e){throw new Error(a.errUnequalVectors)}case"btnBDotB":try{return a.getVector("B").multiply(a.getVector("B").transpose()).getElement(0,0)}catch(e){throw new Error(a.errUnequalVectors)}}},this.getVector=function(b){b=b||"A";for(var c=new Matrix(1,this["vector"+b+"NumCols"]),d=[],e=1;5>=e;e++)if(!$("#panel-302-vectors .txtVector"+b+"_"+(e-1)).attr("disabled")){var f=$("#panel-302-vectors .txtVector"+b+"_"+(e-1)).val(),g=a.parser.parse(f,!1);d.push(g)}return c.set.apply(c,d),c},this.setVector=function(b,c){b=b||"A",a["vector"+b+"NumCols"]=c.length,$("#panel-302-vectors .txtVector"+b+"Cols").val(c.length);for(var d=1;5>=d;d++){var e=$("#panel-302-vectors .txtVector"+b+"_"+(d-1)),f=c.length>=d?c[d-1]:void 0;void 0===f?e.val(0).attr("disabled","disabled"):e.val(f).removeAttr("disabled")}},this.activate=function(a){PanelManager.activatePanel("#panel-302-vectors",a)},this.deactivate=function(){return!0}},Panel_401_BasicStatsInput:function(){var a=this;this.parser=new MathProcessor,PanelManager.panels["#panel-401-basic-stats-input"]={load:function(b){b&&b.data&&a.setData(b),PanelManager.activatePanel("#panel-401-basic-stats-input",PanelTransitions.SLIDE_RIGHT,!0)},save:function(){var b={data:[]};return a.getData(b.data),b.func="checked"==$("#"+$("#panel-401-basic-stats-input .lblRawData").attr("for")).attr("checked")?"rd":"checked"==$("#"+$("#panel-401-basic-stats-input .lblGroupedData").attr("for")).attr("checked")?"gd":"checked"==$("#"+$("#panel-401-basic-stats-input .lblFrequencyDistribution").attr("for")).attr("checked")?"fd":"nd",b}},this.init=function(){$("#"+$("#panel-401-basic-stats-input .lblRawData").attr("for")).click(function(){$("#panel-401-basic-stats-input .rawDataContainer").removeClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").addClass("invisible")}),$("#"+$("#panel-401-basic-stats-input .lblGroupedData").attr("for")).click(function(){$("#panel-401-basic-stats-input .rawDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").removeClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").addClass("invisible")}),$("#"+$("#panel-401-basic-stats-input .lblFrequencyDistribution").attr("for")).click(function(){$("#panel-401-basic-stats-input .rawDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").removeClass("invisible")}),$("#panel-401-basic-stats-input .btnCalculateStatistics").click(function(){metacalc.panels.Panel_402_BasicStatsOutput.activate()})},this.getData=function(b){var c,d,e,f,g,h,i=b||[],j=0;if("checked"==$("#"+$("#panel-401-basic-stats-input .lblRawData").attr("for")).attr("checked")){for($("#panel-401-basic-stats-input .rawDataContainer .txtPointX").each(function(){j++}),c=0;j>c;c++)d=$("#panel-401-basic-stats-input .rawDataContainer .txtPointX_"+c).val(),d&&i.push(Number(a.parser.parse(d,!1)));return h=new RawData,h.add.apply(h,i)}if("checked"==$("#"+$("#panel-401-basic-stats-input .lblGroupedData").attr("for")).attr("checked")){for($("#panel-401-basic-stats-input .groupedDataContainer .txtPointX").each(function(){j++}),c=0;j>c;c++)d=$("#panel-401-basic-stats-input .groupedDataContainer .txtPointX_"+c).val(),e=$("#panel-401-basic-stats-input .groupedDataContainer .txtPointF_"+c).val(),d&&e&&i.push({x:Number(a.parser.parse(d,!1)),f:Number(a.parser.parse(e,!1))});return h=new GroupedData,h.add.apply(h,i)}if("checked"==$("#"+$("#panel-401-basic-stats-input .lblFrequencyDistribution").attr("for")).attr("checked")){for($("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXA").each(function(){j++}),c=0;j>c;c++)f=$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXA_"+c).val(),g=$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXB_"+c).val(),f=Number(a.parser.parse(f,!1)),g=Number(a.parser.parse(g,!1)),d=String((f+g)/2),e=$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointF_"+c).val(),e=Number(a.parser.parse(e,!1)),f&&g&&e&&i.push({x:parseFloat(d),xa:f,xb:g,f:e});return h=new FrequencyDistribution,h.add.apply(h,i)}return null},this.setData=function(a){var b,c=(a.data||[],0);if("rd"===a.func)for($("#"+$("#panel-401-basic-stats-input .lblRawData").attr("for")).attr("checked","checked"),$("#panel-401-basic-stats-input .rawDataContainer").removeClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").addClass("invisible"),$("#panel-401-basic-stats-input .rawDataContainer .txtPointX").each(function(){c++}),b=0;c>b;b++)b<a.data.length&&$("#panel-401-basic-stats-input .rawDataContainer .txtPointX_"+b).val(a.data[b]);else if("gd"===a.func)for($("#"+$("#panel-401-basic-stats-input .lblGroupedData").attr("for")).attr("checked","checked"),$("#panel-401-basic-stats-input .rawDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").removeClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").addClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer .txtPointX").each(function(){c++}),b=0;c>b;b++)b<a.data.length&&($("#panel-401-basic-stats-input .groupedDataContainer .txtPointX_"+b).val(a.data[b].x),$("#panel-401-basic-stats-input .groupedDataContainer .txtPointF_"+b).val(a.data[b].f));else if("fd"===a.func)for($("#"+$("#panel-401-basic-stats-input .lblFrequencyDistribution").attr("for")).attr("checked","checked"),$("#panel-401-basic-stats-input .rawDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .groupedDataContainer").addClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer").removeClass("invisible"),$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXA").each(function(){c++}),b=0;c>b;b++)b<a.data.length&&($("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXA_"+b).val(a.data[b].xa),$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointXB_"+b).val(a.data[b].xb),$("#panel-401-basic-stats-input .frequencyDistributionContainer .txtPointF_"+b).val(a.data[b].f))},this.activate=function(a){PanelManager.activatePanel("#panel-401-basic-stats-input",a)},this.deactivate=function(){return!0}},Panel_402_BasicStatsOutput:function(){PanelManager.panels["#panel-402-basic-stats-output"]={load:function(a){a&&a.data&&metacalc.panels.Panel_401_BasicStatsInput.setData(a),metacalc.panels.Panel_402_BasicStatsOutput.activate(PanelTransitions.SLIDE_RIGHT,!0)},save:function(){var a={data:[]};return metacalc.panels.Panel_401_BasicStatsInput.getData(a.data),a.func="checked"==$("#"+$("#panel-401-basic-stats-input .lblRawData").attr("for")).attr("checked")?"rd":"checked"==$("#"+$("#panel-401-basic-stats-input .lblGroupedData").attr("for")).attr("checked")?"gd":"checked"==$("#"+$("#panel-401-basic-stats-input .lblFrequencyDistribution").attr("for")).attr("checked")?"fd":"nd",a}},this.init=function(){$("#panel-402-basic-stats-output .btnGoBack").click(function(){metacalc.panels.Panel_401_BasicStatsInput.activate(PanelTransitions.SLIDE_RIGHT)})},this.activate=function(a,b){var c=metacalc.panels.Panel_401_BasicStatsInput.getData();$("#panel-402-basic-stats-output .txtBasicStats_0").val(Math.round(1e4*c.maximum())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_1").val(Math.round(1e4*c.minimum())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_2").val(Math.round(1e4*c.midrange())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_3").val(Math.round(1e4*c.sum())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_4").val(Math.round(1e4*c.count())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_5").val(Math.round(1e4*c.mean())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_6").val(Math.round(1e4*c.median())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_7").val(c.mode().join(", ")||0),$("#panel-402-basic-stats-output .txtBasicStats_8").val(Math.round(1e4*c.variance())/1e4||0),$("#panel-402-basic-stats-output .txtBasicStats_9").val(Math.round(1e4*c.standardDeviation())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_0").val(Math.round(1e4*c.quartile1())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_1").val(Math.round(1e4*c.quartile2())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_2").val(Math.round(1e4*c.quartile3())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_3").val(Math.round(1e4*c.interquartileRange())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_4").val(Math.round(1e4*c.sumOfSquares())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_5").val(Math.round(1e4*c.meanDeviation())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_6").val(Math.round(1e4*c.rootMeanSquared())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_7").val(Math.round(1e4*c.standardErrorOfMean())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_8").val(Math.round(1e4*c.skewness())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_9").val(Math.round(1e4*c.kurtosis())/1e4||0),$("#panel-402-basic-stats-output .txtExtendedStats_10").val(Math.round(1e4*c.coefficientOfVariation())/1e4||0),PanelManager.activatePanel("#panel-402-basic-stats-output",a,b)
},this.deactivate=function(){return!0}},Panel_403_RegressionInput:function(){var a=this;this.parser=new MathProcessor,PanelManager.panels["#panel-403-regression-input"]={load:function(b){b&&b.points&&a.setData(b.points),b&&b.func&&$("#"+$("#panel-403-regression-input .lbl"+b.func).attr("for")).attr("checked","checked"),PanelManager.activatePanel("#panel-403-regression-input",PanelTransitions.SLIDE_RIGHT,!0)},save:function(){var b={data:[]};b.points=a.getInputData();var c=a.getRegressionType();return b.func=c.charAt(0).toUpperCase()+c.slice(1),b}},this.init=function(){$("#panel-403-regression-input .btnAnalyze").click(function(){metacalc.panels.Panel_404_RegressionOutput.activate()})},this.getRegressionType=function(){return"checked"==$("#"+$("#panel-403-regression-input .lblLinear").attr("for")).attr("checked")?"linear":"checked"==$("#"+$("#panel-403-regression-input .lblQuadratic").attr("for")).attr("checked")?"quadratic":"checked"==$("#"+$("#panel-403-regression-input .lblCubic").attr("for")).attr("checked")?"cubic":"checked"==$("#"+$("#panel-403-regression-input .lblExponential").attr("for")).attr("checked")?"exponential":"checked"==$("#"+$("#panel-403-regression-input .lblPower").attr("for")).attr("checked")?"power":"checked"==$("#"+$("#panel-403-regression-input .lblLogarithmic").attr("for")).attr("checked")?"logarithmic":"checked"==$("#"+$("#panel-403-regression-input .lblNaturalLogarithmic").attr("for")).attr("checked")?"naturalLogarithmic":void 0},this.getInputData=function(){var b=[],c=0;$("#panel-403-regression-input .txtPointX").each(function(){c++});for(var d=0;c>d;d++){var e=$("#panel-403-regression-input .txtPointX_"+d).val(),f=$("#panel-403-regression-input .txtPointY_"+d).val(),g=Number(a.parser.parse(e,!1)),h=Number(a.parser.parse(f,!1));e&&f&&!isNaN(g)&&!isNaN(h)&&b.push([g,h])}return b},this.getData=function(){var b=[],c=[],d=this.getRegressionType(),e=0;$("#panel-403-regression-input .txtPointX").each(function(){e++});for(var f=0;e>f;f++){var g=$("#panel-403-regression-input .txtPointX_"+f).val(),h=$("#panel-403-regression-input .txtPointY_"+f).val(),i=Number(a.parser.parse(g,!1)),j=Number(a.parser.parse(h,!1));g&&h&&!isNaN(i)&&!isNaN(j)&&(b.push(i),c.push(j))}return new RegressionCurve(d,b,c)},this.setData=function(a){var b=0;$("#panel-403-regression-input .txtPointX").each(function(){b++});for(var c=0;b>c;c++)if(c<a.length&&2==a[c].length){$("#panel-403-regression-input .txtPointX_"+c).val(a[c][0]),$("#panel-403-regression-input .txtPointY_"+c).val(a[c][1])}},this.activate=function(a){PanelManager.activatePanel("#panel-403-regression-input",a)},this.deactivate=function(){return!0}},Panel_404_RegressionOutput:function(){PanelManager.panels["#panel-404-regression-output"]={load:function(a){a&&a.points&&metacalc.panels.Panel_403_RegressionInput.setData(a.points),metacalc.panels.Panel_404_RegressionOutput.activate(PanelTransitions.SLIDE_RIGHT,!0)},save:function(){var a={data:[]};a.points=metacalc.panels.Panel_403_RegressionInput.getInputData();var b=metacalc.panels.Panel_403_RegressionInput.getRegressionType();return a.func=b.charAt(0).toUpperCase()+b.slice(1),a}},this.init=function(){$("#panel-404-regression-output .btnGoBack").click(function(){metacalc.panels.Panel_403_RegressionInput.activate(PanelTransitions.SLIDE_RIGHT)}),$("#panel-404-regression-output .btnPlotGraph").click(function(){metacalc.panels.Panel_405_RegressionGraph.activate()}),$("#panel-404-regression-output .txtStartXAt, #panel-404-regression-output .txtIntervalOfX, #panel-404-regression-output .txtEstimationX").on("keyup",$.proxy(this.onEstimation,this))},this.onEstimation=function(a){var b=new MathParser(["x"]),c=$("#panel-404-regression-output .txtStartXAt"),d=$("#panel-404-regression-output .txtIntervalOfX"),e=0,f=0;if(a&&a.currentTarget!=c.get(0)&&a.currentTarget!=d.get(0)){e=a.target.className.match(/X_([0-9]*)$/)[1];var g=metaCalc.utils.piEval(a.target.value);if(isNaN(g))return;$("#panel-404-regression-output .txtEstimationY_"+e).val(String(Math.round(1e4*b.doEval(this.compiledObj,[g]))/1e4))}else{var h=metaCalc.utils.piEval(c.val()),i=metaCalc.utils.piEval(d.val());if(isNaN(h)||isNaN(i))return;for($("#panel-404-regression-output .txtEstimationX").each(function(){f++}),e=0;f>e;e++){var j=$("#panel-404-regression-output .txtEstimationX_"+e),k=$("#panel-404-regression-output .txtEstimationY_"+e);j.val(String(Math.round(1e4*(h+i*e))/1e4)),k.val(String(Math.round(1e4*b.doEval(this.compiledObj,[h+i*e]))/1e4))}}},this.activate=function(a,b){var c;try{c=metacalc.panels.Panel_403_RegressionInput.getData()}catch(d){return void alert(d.message)}this._equation=c.equation.replace(/^.*\=/,"");new MathParser(["x"]);this.compiledObj=new MathParser(["x"]).doCompile(this._equation).PolishArray,this.onEstimation(),$("#panel-404-regression-output .txtRegressionEquation").val(c.formattedEquation),$("#panel-404-regression-output .txtCoefficientOfCorelation").val(Math.round(1e4*c.corelationCoeff)/1e4||0),$("#panel-404-regression-output .txtCoefficientOfDetermination").val(Math.round(1e4*c.determinationCoeff)/1e4||0),PanelManager.activatePanel("#panel-404-regression-output",a,b)},this.deactivate=function(){return!0}},Panel_405_RegressionGraph:function(){var self=this;this.errXMinGTEXMax="X-Min cannot be greater than or equal to X-Max.",this.errYMinGTEYMax="Y-Min cannot be greater than or equal to Y-Max.",this.errInvalidScale="Please enter a value greater than zero.",this.init=function(){$("#panel-405-regression-graph .graphWindow canvas").draggable({}),$("#panel-405-regression-graph .btnGoBack").click(function(){metacalc.panels.Panel_404_RegressionOutput.activate(PanelTransitions.SLIDE_RIGHT)}),$("#panel-405-regression-graph #reg-x-axis-pi").change(function(){self.drawGraph(!0)}),$("#panel-405-regression-graph #reg-y-axis-pi").change(function(){self.drawGraph(!0)}),$("#panel-405-regression-graph .btnZoomIn").click(function(){$("#panel-405-regression-graph .txtXScale").val(2*(parseFloat($("#panel-405-regression-graph .txtXScale").val())||0)),$("#panel-405-regression-graph .txtYScale").val(2*(parseFloat($("#panel-405-regression-graph .txtYScale").val())||0)),self.drawGraph()}),$("#panel-405-regression-graph .btnZoomOut").click(function(){$("#panel-405-regression-graph .txtXScale").val((parseFloat($("#panel-405-regression-graph .txtXScale").val())||0)/2),$("#panel-405-regression-graph .txtYScale").val((parseFloat($("#panel-405-regression-graph .txtYScale").val())||0)/2),self.drawGraph()}),$("#panel-405-regression-graph .btnReset").click(function(){$("#panel-405-regression-graph .txtXScale").val("1"),$("#panel-405-regression-graph .txtYScale").val("1"),$("#panel-405-regression-graph .txtXMin").val("-10"),$("#panel-405-regression-graph .txtXMax").val("10"),$("#panel-405-regression-graph .txtYMin").val("-7.28"),$("#panel-405-regression-graph .txtYMax").val("7.28"),$("#panel-405-regression-graph .graphWindow canvas").css({left:0,top:0}),self.drawGraph()}),$(".txtXScale, .txtYScale .txtXMin, .txtYMin, .txtXMax, .txtYMax",$("#panel-405-regression-graph").get(0)).keyup(function(){self.drawGraph()})},this.getBounds=function(){var piEval=function(val){var pi=Math.PI,s="var f = "+val;try{return eval(s),f}catch(e){return 0}},xMin=piEval($("#panel-405-regression-graph .txtXMin").val()),yMin=piEval($("#panel-405-regression-graph .txtYMin").val()),xMax=piEval($("#panel-405-regression-graph .txtXMax").val()),yMax=piEval($("#panel-405-regression-graph .txtYMax").val()),xScale=piEval($("#panel-405-regression-graph .txtXScale").val()),yScale=piEval($("#panel-405-regression-graph .txtYScale").val());xScale||(xScale=1),yScale||(yScale=1);var width=(xMax-xMin)*xScale,height=(yMax-yMin)*yScale,o={xMin:(xMax+xMin-width)/2,yMin:(yMax+yMin-height)/2};return o.xMax=o.xMin+width,o.yMax=o.yMin+height,o},this.drawGraph=function(){window.GRAPH_SIZES=window.GRAPH_SIZES||[],window.GRAPH_SIZES["reg-graph"]={width:633,height:461};var a={bounds:this.getBounds(),equations:[metacalc.panels.Panel_403_RegressionInput.getData().equation],points:metacalc.panels.Panel_403_RegressionInput.getInputData()};console.log(a),doGraph(a,"reg-graph")},this.activate=function(a){try{self.drawGraph(),PanelManager.activatePanel("#panel-405-regression-graph",a)}catch(b){alert(b.message)}},this.deactivate=function(){return!0}},Panel_406_TTestsInput:function(){this.init=function(){var a=this,b="#sagjhasi";$(".lblOneSample, .lblTwoSamplePaired, .lblTwoSampleUnpaired, .lblRawData, .lblMeanSDN, .lblMeanSEMN").each(function(a,c){b+=", #"+$(c).attr("for")}),$(b).click(function(){var b=a.getTTestType(),c=a.getInputFormat(),d=$("#panel-406-t-tests-input .oneSampleRawDataContainer"),e=$("#panel-406-t-tests-input .oneSampleMeanSEMNContainer"),f=$("#panel-406-t-tests-input .oneSampleMeanSDNContainer"),g=$("#panel-406-t-tests-input .twoSampleRawDataContainer"),h=$("#panel-406-t-tests-input .twoSampleMeanSEMNContainer"),i=$("#panel-406-t-tests-input .twoSampleMeanSDNContainer"),j=d.add(f).add(e).add(g).add(i).add(h);"twoSamplePaired"==b?($(".lblMeanSDN, .lblMeanSEMN",$("#panel-406-t-tests-input").get(0)).attr("disabled","disabled"),$("#"+$("#panel-406-t-tests-input .lblMeanSDN").attr("for")).attr("disabled","disabled"),$("#"+$("#panel-406-t-tests-input .lblMeanSEMN").attr("for")).attr("disabled","disabled"),$("#"+$("#panel-406-t-tests-input .lblRawData").attr("for")).attr("checked","checked"),c="rawData"):($(".lblMeanSDN, .lblMeanSEMN",$("#panel-406-t-tests-input").get(0)).removeAttr("disabled"),$("#"+$("#panel-406-t-tests-input .lblMeanSDN").attr("for")).removeAttr("disabled"),$("#"+$("#panel-406-t-tests-input .lblMeanSEMN").attr("for")).removeAttr("disabled")),j.hide(),"oneSample"==b&&"rawData"==c?d.show():"oneSample"==b&&"meanSDN"==c?f.show():"oneSample"==b&&"meanSEMN"==c?e.show():"twoSamplePaired"!=b&&"twoSampleUnpaired"!=b||"rawData"!=c?"twoSampleUnpaired"==b&&"meanSDN"==c?i.show():"twoSampleUnpaired"==b&&"meanSEMN"==c&&h.show():g.show()}),$("#panel-406-t-tests-input .btnAnalyze").click(function(){metacalc.panels.Panel_407_TTestsOutput.activate()})},this.getTTestType=function(){return"checked"==$("#"+$("#panel-406-t-tests-input .lblOneSample").attr("for")).attr("checked")?"oneSample":"checked"==$("#"+$("#panel-406-t-tests-input .lblTwoSamplePaired").attr("for")).attr("checked")?"twoSamplePaired":"checked"==$("#"+$("#panel-406-t-tests-input .lblTwoSampleUnpaired").attr("for")).attr("checked")?"twoSampleUnpaired":void 0},this.getInputFormat=function(){return"checked"==$("#"+$("#panel-406-t-tests-input .lblRawData").attr("for")).attr("checked")?"rawData":"checked"==$("#"+$("#panel-406-t-tests-input .lblMeanSDN").attr("for")).attr("checked")?"meanSDN":"checked"==$("#"+$("#panel-406-t-tests-input .lblMeanSEMN").attr("for")).attr("checked")?"meanSEMN":void 0},this.getData=function(){var a=this,b=a.getTTestType(),c=a.getInputFormat(),d="twoSamplePaired"==b;("twoSamplePaired"==b||"twoSampleUnpaired"==b)&&(b="twoSample");var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=0;if("oneSample"==b&&"rawData"==c){for(e=new RawData,$("#panel-406-t-tests-input .txtOneSampleRawData").each(function(){s++}),p=0;s>p;p++)q=$("#panel-406-t-tests-input .txtOneSampleRawData_"+p).val(),q&&e.add(parseFloat(q)||0);return g=parseFloat($("#panel-406-t-tests-input .txtOneSampleRawDataHypothesizedMean").val())||0,new OneSampleTTest(e,g)}if("oneSample"==b&&"meanSDN"==c)return e=new RawData,h=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSDN_0").val())||0,i=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSDN_1").val())||0,k=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSDN_2").val())||0,e.presetStats1(h,i,k),g=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSDN_3").val())||0,new OneSampleTTest(e,g);if("oneSample"==b&&"meanSEMN"==c)return e=new RawData,h=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSEMN_0").val())||0,j=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSEMN_1").val())||0,k=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSEMN_2").val())||0,e.presetStats2(h,j,k),g=parseFloat($("#panel-406-t-tests-input .txtOneSampleMeanSEMN_3").val())||0,new OneSampleTTest(e,g);if("twoSample"==b&&"rawData"==c){for($("#panel-406-t-tests-input .txtTwoSampleRawDataX").each(function(){s++}),e=new RawData,f=new RawData,d&&(e.sort=f.sort=!1),p=0;s>p;p++)q=$("#panel-406-t-tests-input .txtTwoSampleRawDataX_"+p).val(),r=$("#panel-406-t-tests-input .txtTwoSampleRawDataY_"+p).val(),(q||r)&&(q&&e.add(parseFloat(q)||0),r&&f.add(parseFloat(r)||0));return d?new TwoSamplePairedTTest(e,f):new TwoSampleUnpairedTTest(e,f)}return"twoSample"==b&&"meanSDN"==c?(e=new RawData,f=new RawData,h=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_0").val())||0,i=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_1").val())||0,k=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_2").val())||0,l=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_3").val())||0,m=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_4").val())||0,o=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSDN_5").val())||0,e.presetStats1(h,i,k),f.presetStats1(l,m,o),new TwoSampleUnpairedTTest(e,f)):"twoSample"==b&&"meanSEMN"==c?(e=new RawData,f=new RawData,h=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_0").val())||0,j=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_1").val())||0,k=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_2").val())||0,l=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_3").val())||0,n=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_4").val())||0,o=parseFloat($("#panel-406-t-tests-input .txtTwoSampleMeanSEMN_5").val())||0,e.presetStats2(h,j,k),f.presetStats2(l,n,o),new TwoSampleUnpairedTTest(e,f)):null},this.activate=function(a){metacalc.panels.Panel_406_TTestsInput.getData();PanelManager.activatePanel("#panel-406-t-tests-input",a)},this.deactivate=function(){return!0}},Panel_407_TTestsOutput:function(){this.init=function(){var a=this,b="#sagjhasi";$(".lbl50, .lbl60, .lbl70, .lbl80, .lbl90, .lbl95, .lbl98, .lbl99, .lbl995, .lbl998, .lbl999").each(function(a,c){b+=", #"+$(c).attr("for")}),$(b).click(function(){var b=parseFloat(a.getConfidenceInterval()),c=a.data.confidenceRange(TDistributionTable.TWO_SIDED,b);$("#panel-407-t-tests-output .txtCR1").val(Math.round(1e4*c.lowerLimit)/1e4||0),$("#panel-407-t-tests-output .txtCR2").val(Math.round(1e4*c.upperLimit)/1e4||0)}),$("#panel-407-t-tests-output .btnGoBack").click(function(){metacalc.panels.Panel_406_TTestsInput.activate(PanelTransitions.SLIDE_RIGHT)})},this.getConfidenceInterval=function(){return $("input[name='ttest_ci']:checked").val()},this.activate=function(a){var b=this.data=metacalc.panels.Panel_406_TTestsInput.getData(),c=parseFloat(this.getConfidenceInterval()),d=b.confidenceRange(TDistributionTable.TWO_SIDED,c);$("#panel-407-t-tests-output .txtTScore").val(Math.round(1e4*b.tValue())/1e4||0),$("#panel-407-t-tests-output .txtSED").val(Math.round(1e4*b.standardErrorOfDifference())/1e4||0),$("#panel-407-t-tests-output .txtDF").val(Math.round(1e4*b.df())/1e4||0),$("#panel-407-t-tests-output .txtPValue").val(Math.round(1e4*b.pValue())/1e4||0),$("#panel-407-t-tests-output .txtMD").val(Math.round(1e4*b.meanDifference())/1e4||0),$("#panel-407-t-tests-output .txtCR1").val(Math.round(1e4*d.lowerLimit)/1e4||0),$("#panel-407-t-tests-output .txtCR2").val(Math.round(1e4*d.upperLimit)/1e4||0),PanelManager.activatePanel("#panel-407-t-tests-output",a)},this.deactivate=function(){return!0}},Panel_Home:function(){this.init=function(){var a=this;$(".tabs .subtabs button").click(function(){var a=$(this).parent();window.already_active=a.hasClass("active")?!0:!1,a.addClass("active"),a.siblings().removeClass("active")}),$(".tabs .btnEquations").click(function(){metacalc.panels.Panel_101_Equations.activate()}),$(".tabs .btnGraph").click(function(){metacalc.panels.Panel_102_Graph.activate()}),$(".tabs .btnTable").click(function(){metacalc.panels.Panel_103_TableInput.activate()}),$(".tabs .btnIntersection").click(function(){metacalc.panels.Panel_105_Intersection.activate()}),$(".tabs .btnPlotPoints").click(function(){metacalc.panels.Panel_106_PointPlotter.activate()}),$(".tabs .btnCalculator").click(function(){metacalc.panels.Panel_201_Calculator.activate()}),$(".tabs .btnEquationSolver").click(function(){metacalc.panels.Panel_202_EquationSolver.activate()}),$(".tabs .btnSimpleCalculator").click(function(){metacalc.panels.Panel_203_SimpleCalculator.activate()}),$(".tabs .btnMatrices").click(function(){metacalc.panels.Panel_301_Matrices.activate()}),$(".tabs .btnVectors").click(function(){metacalc.panels.Panel_302_Vectors.activate()}),$(".tabs .btnBasicStatistics").click(function(){metacalc.panels.Panel_401_BasicStatsInput.activate()}),$(".tabs .btnRegressionAnalysis").click(function(){metacalc.panels.Panel_403_RegressionInput.activate()}),$(".tabs .btnTTests").click(function(){metacalc.panels.Panel_406_TTestsInput.activate()}),$(".btnGraphingCalculator, .btnScientificCalculator, .btnMatrixCalculator, .btnStatisticsCalculator").click(function(){var b=$(this).attr("class").split(/\s/),c=b[b.length-1];$(this).parent().hasClass("home-aware")?PanelManager.activatePanel("#home",PanelTransitions.SLIDE_RIGHT):(a.activateCalc(c),window.already_active=!1,$(".tabs .subtabs li").removeClass("active"))}),$(".btnProgrammersCalculator").click(function(){window.location="http://programmerscalc.com/"}),$(".btnHelp").click(function(){window.location="http://www.meta-calculator.com/how-to-use/"})},this.activateCalc=function(a,b){switch(a){case"btnGraphingCalculator":var c=b||metacalc.panels.Panel_101_Equations;setTimeout(c.activate,900);break;case"btnScientificCalculator":var c=b||metacalc.panels.Panel_201_Calculator;setTimeout(c.activate,600);break;case"btnMatrixCalculator":var c=b||metacalc.panels.Panel_301_Matrices;setTimeout(c.activate,600);break;case"btnStatisticsCalculator":var c=b||metacalc.panels.Panel_401_BasicStatsInput;setTimeout(c.activate,600)}setTimeout(function(){$("#floating").addClass("can-show")},600)}}}},initPanels:function(){for(var a in this.panelPrototypes)this.panels[a]=new this.panelPrototypes[a],this.panels[a].init();setTimeout(function(){$("#floating").addClass("can-show")},10)},mapKeys:function(){function a(a,b){if(null!=window.last_key_pressed){$("input").val(),String.fromCharCode(window.last_key_pressed),new RegExp("","g")}$(a).length>0&&(b.preventDefault(),$(a).click()),window.last_key_pressed=null}window.last_key_pressed=null,$(document).keypress(function(b){var c=b.which,d=b.shiftKey,e=b.ctrlKey;console.log(c),console.log("shift key?",d),console.log("ctrl key?",e),100==c?(window.last_key_pressed=null,window.history.back()):112==c?a(".btnPi",b):108==window.last_key_pressed&&111==c?a(".btnLog10",b):108==window.last_key_pressed&&50==c?a(".btnLog2",b):108==window.last_key_pressed&&110==c?a(".btnLn",b):115==c?a(".btnSin",b):99==c?a(".btnCos",b):116==c?a(".btnTan",b):d&&83==c?a(".btnSinInv",b):d&&67==c?a(".btnCosInv",b):d&&84==c?a(".btnTanInv",b):97==c&&a(".btnAbs",b),window.last_key_pressed=c}),$(".btnGraph, .btnReset, .tabs button").click(function(){window.last_key_pressed=""})},getPanelById:function(a){return(a="#panel-101-equations")?metacalc.panels.Panel_101_Equations:(a="#panel-102-graph")?metacalc.panels.Panel_102_Graph:(a="#panel-103-table-input")?metacalc.panels.Panel_103_TableInput:(a="#panel-104-table-output")?metacalc.panels.Panel_104_TableOutput:(a="#panel-105-intersection")?metacalc.panels.Panel_105_Intersection:(a="#panel-106-point-plotter")?metacalc.panels.Panel_106_PointPlotter:(a="#panel-201-calculator")?metacalc.panels.Panel_201_Calculator:(a="#panel-202-equation-solver")?metacalc.panels.Panel_202_EquationSolver:(a="#panel-203-simple-calculator")?metacalc.panels.Panel_203_SimpleCalculator:(a="#panel-301-matrices")?metacalc.panels.Panel_301_Matrices:(a="#panel-302-vectors")?metacalc.panels.Panel_302_Vectors:(a="#panel-401-basic-stats-input")?metacalc.panels.Panel_401_BasicStatsInput:(a="#panel-402-basic-stats-output")?metacalc.panels.Panel_402_BasicStatsOutput:(a="#panel-403-regression-input")?metacalc.panels.Panel_403_RegressionInput:(a="#panel-404-regression-output")?metacalc.panels.Panel_404_RegressionOutput:(a="#panel-405-regression-graph")?metacalc.panels.Panel_405_RegressionGraph:(a="#panel-406-t-tests-input")?metacalc.panels.Panel_406_TTestsInput:(a="#panel-407-t-tests-output")?metacalc.panels.Panel_407_TTestsOutput:void 0}})}(jQuery),!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(".dropdown-backdrop").remove(),a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||("ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),d.toggleClass("open")),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;
d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),"undefined"==typeof console){var console=new Object;console.log=function(){}}themeSetup(),adCheck(),browserCheck(),getAndActivateValidators(),localeAndActivateCalc(),window.metacalc=new MetaCalcWeb,window.metacalc.initPanels();